<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width" user-scalable="0">
    <style>
        *{
            margin:0;
            padding:0;
        }
        html,body{
            height: 100%;
            overflow: hidden;
        }
        #canvas{
            height: 100%;
            /*background: pink;*/
        }
        .btn{
            position: absolute;
            z-index: 2;
            width:30%;
            left:40%;
            bottom:5%;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="750" height="1206"></canvas>
    <img src="btn.png" class="btn go" alt="">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="InitCanvas.js"></script>
    <script>


   
    var config = {

        back : true,   // 画中画的顺序，false为缩小，true为放大
        during: 230,    // 缩放一副图片需要的时间
        id : 'canvas',  // canvas的id（canvas的宽高要和图片一致）
        // 图片位置信息
        imgArr:[
            {
                // 顶部图片
                imgUrl1:'http://img.wx.xiao-bo.com/z/act/2018-080910/gzl-hzh/1.jpg',
                // 底部图片
                imgUrl2:'http://img.wx.xiao-bo.com/z/act/2018-080910/gzl-hzh/2.jpg',
                // 底图目标点的的位置和宽高属性
                sx : 511,
                sy : 638,
                sw : 62,
                sh : 100,
                // 顶部图片位置和宽高属性
                sx2 : 0,
                sy2 : 0,
                sw2 : 750,
                sh2 : 1206,
            },
            {
                imgUrl1:'http://img.wx.xiao-bo.com/z/act/2018-080910/gzl-hzh/2.jpg',
                imgUrl2:'http://img.wx.xiao-bo.com/z/act/2018-080910/gzl-hzh/3.jpg',
                sx : 98,
                sy : 548,
                sw : 110,
                sh : 176,
                sx2 : 0,
                sy2 : 0,
                sw2 : 750,
                sh2 : 1206,

            }

        ]
    }

    var pip = new PinP(config);
    console.log(pip);
    $('.btn').on('touchstart',function(e){

        // 开始缩放
        startPip(pip,function(){
            console.log('播放完了');
            var $btn =  $('.btn');
            if ($btn.hasClass('go')){
                $btn.removeClass('go');
                $btn.attr('src','btn1.png');
            }else{
                $btn.addClass('go');
                $btn.attr('src','btn.png');
            }
        });
         e.preventDefault();
    });



    $('.btn').on('touchend',function(){
        // 停止缩放
        endPip()
    });
        
    </script>
</body>
</html>