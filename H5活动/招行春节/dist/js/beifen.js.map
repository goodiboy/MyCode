{"version":3,"sources":["../../js/beifen.js"],"names":["$img","$","$space","images","i","length","html","append","each","item","css","transform","rotate","startX","moveX","endX","moveDis","translateX","endDis","sTime","eTime","expendTime","speed","on","e","changedTouches","pageX","Date","getTime","console","log","everyImg","time","Math","abs","dis","imgArr","transition","hide","show","document","body","addEventListener","preventDefault","passive"],"mappings":"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","file":"beifen.js","sourcesContent":["\r\n\r\n\r\nlet $img = $('.img_cover');\r\nconst $space = $('#space');\r\nlet images = [\r\n    'img/8.png',\r\n    'img/11.png',\r\n    'img/14.png',\r\n    'img/18.png',\r\n    'img/6.png',\r\n    'img/7.png',\r\n    'img/8.png',\r\n    'img/9.png',\r\n    'img/9_1.png',\r\n    'img/10.png',\r\n    'img/11.png',\r\n    'img/11_1.png',\r\n    'img/12.png',\r\n    'img/13.png',\r\n    'img/14.png',\r\n    'img/14_1.png',\r\n    'img/16.png',\r\n    'img/17.png',\r\n    'img/17_1.png',\r\n    'img/18.png',\r\n    'img/19.png',\r\n    'img/20.png',\r\n    'img/21.png',\r\n    'img/22.png',\r\n    'img/23.png',\r\n    'img/24.png',\r\n    'img/25.png',\r\n    'img/26.png',\r\n    'img/27.png',\r\n    'img/28.png',\r\n    'img/28_1.png',\r\n    'img/29.png',\r\n    'img/30.png',\r\n    'img/31.png',\r\n    'img/32.png',\r\n    'img/33.png',\r\n    'img/34.png',\r\n];\r\nfor (let i = 0; i < images.length-1; i++){\r\n    let html = `\r\n                <div class=\"img_cover frame_01\"></div>\r\n                <div class=\"img_cover frame_02\"></div>\r\n                <div class=\"img_cover frame_01\"></div>\r\n                <div class=\"img_cover frame_02\"></div>\r\n                <div class=\"img_cover rot_img_${i+1}\"></div>\r\n                <div class=\"img_cover frame_01\"></div>\r\n                <div class=\"img_cover frame_02\"></div>\r\n                <div class=\"img_cover frame_01\"></div>\r\n        `;\r\n    $space.append(html)\r\n\r\n}\r\n$img = $('.img_cover');\r\n$.each($img, function (i, item) {\r\n    $(item).css({\r\n        transform: `rotateY(${-i * 15}deg)`,\r\n    });\r\n});\r\n\r\nrotate();\r\nfunction rotate() {\r\n    let startX = 0,moveX = 0, endX = 0;\r\n    let moveDis = 0,translateX = 0,endDis = 0;\r\n    let sTime = 0,eTime = 0,expendTime;\r\n    let speed = 0;\r\n    $space.on('touchstart', function (e) {\r\n        startX = e.changedTouches[0].pageX;\r\n        translateX = moveDis;\r\n        sTime = new Date().getTime();\r\n        console.log(startX)\r\n    });\r\n\r\n    $space.on('touchmove', function (e) {\r\n        moveX = e.changedTouches[0].pageX;\r\n        moveDis = (moveX - startX)*.15 + translateX;\r\n\r\n        if (moveDis < 0 ){\r\n            moveDis = 0;\r\n        }\r\n        if (moveDis >= ($img.length-4) * 15){\r\n            moveDis = ($img.length-4) * 15;\r\n        }\r\n\r\n        everyImg(moveDis);\r\n    });\r\n    $space.on('touchend', function (e) {\r\n\r\n        endX = e.changedTouches[0].pageX;\r\n        endDis = (endX - startX)*.15;\r\n        eTime = new Date().getTime();\r\n        expendTime = eTime - sTime;\r\n        speed = endDis / expendTime * 200;\r\n\r\n        moveDis = moveDis + speed;\r\n        if (moveDis < 0 ){\r\n            moveDis = 0;\r\n        }\r\n        if (moveDis >= ($img.length-4) * 15){\r\n            moveDis = ($img.length-4) * 15;\r\n        }\r\n\r\n        let time = Math.abs(speed * 70);\r\n        everyImg(moveDis,1000);\r\n\r\n        console.log('speed:'+speed,time);\r\n        console.log(moveDis-translateX,endDis);\r\n    })\r\n}\r\n\r\nfunction everyImg(dis,time){\r\n    let imgArr = [];\r\n    $.each($img, function (i, item) {\r\n        $(item).css({\r\n            transition:time + 'ms linear'\r\n        });\r\n        imgArr[i] = dis - i * 15;\r\n\r\n        if (imgArr[i] > 59 || imgArr[i] < -120){\r\n            $(this).hide();\r\n        }\r\n        if(imgArr[i] >= -120 && imgArr[i] < 60){\r\n            $(this).show();\r\n\r\n\r\n\r\n            $(item).css({\r\n                transform: `rotateY(${dis - i * 15}deg)`,\r\n            });\r\n        }\r\n        if (dis >= ($img.length-1) * 15 && imgArr[i] < 60 ){\r\n            console.log(this)\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n\r\ndocument.body.addEventListener('touchmove', function (e) {\r\n    e.preventDefault(); //阻止默认的处理方式(阻止下拉滑动的效果)\r\n}, {passive: false}); //passive 参数不能省略，用来兼容ios和android"]}