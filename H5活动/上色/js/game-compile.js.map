{"version":3,"sources":["game.js"],"names":[],"mappings":"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","file":"game-compile.js","sourcesContent":["$(function () {\n    const cjs = createjs;\n    const itemObjectSize = 10;\n    let game = 2;\n    //配置颜色\n    const eastColor = [{\n        display: \"朱\\n砂\",\n        color: \"#e9473b\",\n        audio: \"e9473b\"\n    }, {\n        display: \"靛\\n青\\n蓝\",\n        color: \"#094b85\",\n        audio: \"094b85\"\n    }, {\n        display: \"灰\\n茶\",\n        color: \"#905a3d\",\n        audio: \"905a3d\"\n    }, {\n        display: \"淡\\n珊\\n瑚\",\n        color: \"#e58887\",\n        audio: \"e58887\"\n    }, {\n        display: \"藤\\n黄\",\n        color: \"#eb992f\",\n        audio: \"eb992f\"\n    }, {\n        display: \"竹\\n青\",\n        color: \"#789262\",\n        audio: \"789262\"\n    }];\n    const westColor = [{\n        display: \"薄\\n荷\\n绿\",\n        color: \"#12aa9c\",\n        audio: \"12aa9c\"\n    }, {\n        display: \"天\\n蓝\",\n        color: \"#4c8fb9\",\n        audio: \"4c8fb9\"\n    }, {\n        display: \"柠\\n檬\\n黄\",\n        color: \"#f6ea21\",\n        audio: \"f6ea21\"\n    }, {\n        display: \"葡\\n萄\\n紫\",\n        color: \"#9d2f95\",\n        audio: \"9d2f95\"\n    }, {\n        display: \"橙\\n红\\n色\",\n        color: \"#d6623a\",\n        audio: \"d6623a\"\n    }, {\n        display: \"玫\\n瑰\\n红\",\n        color: \"#bd365e\",\n        audio: \"bd365e\"\n    }];\n\n\n    initSwiper();\n\n\n    function initSwiper() {\n        var mySwiper = new Swiper('.swiper-container', {\n            direction: 'horizontal', // 垂直切换选项\n            loop: true, // 循环模式选项\n            effect: 'coverflow',\n            slidesPerView: 1,\n            centeredSlides: true,\n            coverflowEffect: {\n                rotate: 0,\n                stretch: 30,\n                depth: 150,\n                modifier: 2,\n                slideShadows: false\n            },\n            // 如果需要分页器\n            pagination: {\n                el: '.swiper-pagination',\n            }\n        });\n\n        $('.choose_submit').on('click', function () {\n            // new initGame(mySwiper.activeIndex);\n            $('.load_page').fadeIn();\n            preloadImg(mySwiper.realIndex + 1)\n        });\n    }\n\n    // preloadImg(1);\n\n    //预加载\n    function preloadImg(chooseIdex) {\n        const queue = new cjs.LoadQueue(false, 'images/', true);\n        const $progress = $('#progress');\n        //配置图片\n        const manifest = [\n            {\n                src: `canvas_${chooseIdex}_1.png`,\n                id: `canvas_1`\n            },\n            {\n                src: `canvas_${chooseIdex}_2.png`,\n                id: `canvas_2`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_1.png`,\n                id: `canvas_3_1`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_2.png`,\n                id: `canvas_3_2`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_3.png`,\n                id: `canvas_3_3`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_4.png`,\n                id: `canvas_3_4`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_5.png`,\n                id: `canvas_3_5`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_6.png`,\n                id: `canvas_3_6`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_7.png`,\n                id: `canvas_3_7`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_8.png`,\n                id: `canvas_3_8`\n            }, {\n                src: `canvas_${chooseIdex}_3_9.png`,\n                id: `canvas_3_9`\n            },\n            {\n                src: `canvas_${chooseIdex}_3_10.png`,\n                id: `canvas_3_10`\n            },\n            {\n                src: `fill_top_bg.png`,\n                id: `fill_top_bg`\n            },\n            {\n                src: `fill_bottom_bg_bottom.png`,\n                id: `fill_bottom_bg_bottom`\n            },\n            {\n                src: `fill_bottom_text.png`,\n                id: `fill_bottom_text`\n            },\n            {\n                src: `fill_top_create_button.png`,\n                id: `fill_top_create_button`\n            },\n            {\n                src: `fill_top_finish_button.png`,\n                id: `fill_top_finish_button`\n            },\n            {\n                src: `east_button.png`,\n                id: `east_button`\n            },\n            {\n                src: `west_button.png`,\n                id: `west_button`\n            }\n        ];\n        queue.loadManifest(manifest);\n        queue.on(\"progress\", function (event) {\n            const p = parseInt(event.progress * 100);\n            $progress.css('height', p + '%');\n\n        }, this);\n        queue.on(\"complete\", function (event) {\n            game = new InitGame(this, chooseIdex, eastColor, westColor);\n\n            $('.result_again').on('click', function () {\n                $('.poster_wrap').fadeOut();\n                game.resetGame();\n            });\n        });\n    }\n\n    function func_guide() {\n        const $guide = $('.guide');\n        const $page_guide = $('.page_guide');\n        const guide_len = $guide.length;\n        let guideIndex = 0;\n        $('.game_page').show();\n        $('.load_page').fadeOut();\n        $('.select_page').hide();\n        $page_guide.show().click(function () {\n            $guide.eq(guideIndex).hide().next().show();\n            guideIndex++;\n            if (guideIndex >= guide_len) {\n                $(this).hide();\n            }\n        });\n        $('.guide_close').click(function () {\n            $page_guide.hide();\n        });\n\n    }\n\n    class InitGame {\n        constructor(queue, chooseIdex, eastColor, westColor) {\n            //颜色1\n            this._eastColor = eastColor;\n            this._westColor = westColor;\n            //舞台\n            this._stage = new cjs.Stage('game');\n            //queue加载对象\n            this._queue = queue;\n\n            this.resetGame();\n            //初始化游戏\n            InitGame.guideGame();\n            //刷新舞台\n            cjs.Ticker.addEventListener('tick', this._stage);\n\n        }\n\n        //初始化静态背景\n        initBg() {\n            //背景1\n            const bgBmp1 = new cjs.Bitmap(this._queue.getResult('canvas_1'));\n            //背景2\n            const bgBmp2 = new cjs.Bitmap(this._queue.getResult('canvas_2'));\n            this._bgContainer.addChild(bgBmp1, bgBmp2);\n\n            //头部背景\n            const fillTop = new cjs.Bitmap(this._queue.getResult('fill_top_bg'));\n            //底部背景\n            const fillBottom = new cjs.Bitmap(this._queue.getResult('fill_bottom_bg_bottom')).set({y: 790});\n            //选择提示字\n            const fill_bottom_text = new cjs.Bitmap(this._queue.getResult('fill_bottom_text')).set({y: 810});\n            this._fillBgContainer.addChild(fillTop, fillBottom, fill_bottom_text);\n        }\n\n\n        //初始化可改变颜色背景\n        initChangeBg() {\n            for (let i = itemObjectSize; i >= 1; i--) {\n                const itemObject = new cjs.Bitmap(this._queue.getResult(`canvas_3_${i}`));\n                //获取图片的大小\n                const {width, height} = itemObject.getBounds();\n                //缓存图片\n                itemObject.cache(0, 0, width, height);\n                //点击的时候替换颜色\n                itemObject.addEventListener('pressup', () => {\n                    //如果当前颜色和要填充的颜色一致，则恢复没有填充状态，否则填充颜色\n                    if (itemObject._currentColor === this._fillColor) {\n                        itemObject._currentColor = {\n                            r: 255,\n                            g: 255,\n                            b: 255\n                        }\n                    } else {\n                        itemObject._currentColor = this._fillColor;\n                    }\n                    //通过滤镜修改颜色\n                    itemObject.filters = [\n                        new cjs.ColorFilter(0, 0, 0, 1, itemObject._currentColor.r, itemObject._currentColor.g, itemObject._currentColor.b, 0)\n                    ];\n                    //更新缓存\n                    itemObject.updateCache()\n                });\n                this._itemObjectContainer.addChild(itemObject);\n            }\n        }\n\n        //创建颜色按钮\n        createColorButton(colors) {\n            this._colorButtonContainer.removeAllChildren();\n            for (let i = 0; i < colors.length; i++) {\n                const buttons = new cjs.Container().set({x: i * (70 + 50) + 80});\n                const shape = new createjs.Shape();\n                shape.graphics.beginFill(colors[i].color).drawCircle(0, 0, 32);\n                shape.addEventListener('pressup', () => {\n                    this._fillColor = InitGame.getRBGFromHex(shape.graphics._fill.style);\n                });\n                const text = new cjs.Text(colors[i].display, \"14px Arial\", \"#fff\");\n                text.y = -text.getMeasuredHeight() / 2;\n                text.textAlign = 'center';\n                text.lineHeight = 16;\n                buttons.addChild(shape, text);\n                this._colorButtonContainer.addChild(buttons);\n            }\n        }\n\n        //功能按钮\n        initToolButton() {\n            const finishBtn = this.createToolButton(this._queue.getResult('fill_top_finish_button'), 432);\n            const createBtn = this.createToolButton(this._queue.getResult('fill_top_create_button'), 0);\n            const east_button = this.createToolButton(this._queue.getResult('east_button'), 10, 930);\n            const west_button = this.createToolButton(this._queue.getResult('west_button'), 320, 930);\n\n            //完成按钮\n            finishBtn.addEventListener('pressup', () => {\n                //生成海报之前隐藏按钮\n                this._stage.getChildByName('toolMaxContainer').visible = false;\n                $('#game').attr('height', 809);\n                setTimeout(() => {\n                    $('#poster').prop('src', this._stage.toDataURL());\n                    //海报生成完毕之后显示按钮\n                    this._stage.getChildByName('toolMaxContainer').visible = true;\n                    //恢复高度\n                    $('#game').attr('height', 1128);\n                    $('.poster_wrap').css('display', 'flex');\n                }, 200);\n            });\n\n            createBtn.addEventListener('pressup', () => {\n                const children = this._itemObjectContainer.children;\n                for (let item of children) {\n                    //随机颜色分组\n                    const group = Math.round(Math.random());\n                    let fillColor;\n                    if (group) {\n                        //获取颜色分组的随机颜色\n                        const r = Math.floor(Math.random() * this._westColor.length);\n                        fillColor = InitGame.getRBGFromHex(this._westColor[r].color);\n                    } else {\n                        const r = Math.floor(Math.random() * this._eastColor.length);\n                        fillColor = InitGame.getRBGFromHex(this._eastColor[r].color);\n                    }\n                    //填充颜色\n                    item.filters = [new cjs.ColorFilter(0, 0, 0, 1, fillColor.r, fillColor.g, fillColor.b, 0)];\n                    //更新缓存\n                    item.updateCache();\n                }\n            });\n\n            //选择中式颜色\n            west_button.addEventListener('pressup', () => {\n                this.createColorButton(this._westColor);\n                east_button.alpha = 0.7;\n            });\n\n            //选择西式颜色\n            east_button.addEventListener('pressup', () => {\n                this.createColorButton(this._eastColor);\n                west_button.alpha = 0.7;\n            });\n\n        }\n\n        //封装功能按钮函数\n        createToolButton(id, x, y = 0) {\n            const toolBtn = new cjs.Bitmap(id).set({x, y});\n            const {width, height} = toolBtn.getBounds();\n            const rectArea = new cjs.Shape();\n            //添加点击区域\n            rectArea.graphics.beginFill('#fff').drawRect(0, 0, width, height);\n            toolBtn.hitArea = rectArea;\n            this._toolButtonContainer.addChild(toolBtn);\n            return toolBtn;\n        }\n\n\n        //格式化颜色\n        static getRBGFromHex(f) {\n            const e = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\n            let d = f.toLowerCase();\n            let b = {\n                r: 0,\n                g: 0,\n                b: 0\n            };\n            if (d && e.test(d)) {\n                if (d.length === 4) {\n                    let g = \"#\";\n                    for (let c = 1; c < 4; c += 1) {\n                        g += d.slice(c, c + 1).concat(d.slice(c, c + 1))\n                    }\n                    d = g\n                }\n                var a = [];\n                for (let c = 1; c < 7; c += 2) {\n                    a.push(parseInt(\"0x\" + d.slice(c, c + 2)))\n                }\n                b.r = a[0];\n                b.g = a[1];\n                b.b = a[2];\n                return b\n            } else {\n                return d\n            }\n        }\n\n        //重新游戏\n        resetGame() {\n            //删除全部子元素\n            this._stage.removeAllChildren();\n            //涂鸦背景容器\n            this._itemObjectContainer = new cjs.Container();  //set({y:20})\n            //背景容器\n            this._bgContainer = new cjs.Container();\n\n            // 工具容器的最外包裹层，便于生成海报是隐藏所以按钮\n            this._toolMaxContainer = new cjs.Container();\n            this._toolMaxContainer.name = 'toolMaxContainer';\n            //填充容器\n            this._fillBgContainer = new cjs.Container();\n            //工具按钮容器\n            this._toolButtonContainer = new cjs.Container();\n            //按钮容器\n            this._colorButtonContainer = new cjs.Container().set({y: 885});\n            //将填充层，按钮层，全部添加到工具包裹层\n            this._toolMaxContainer.addChild(this._fillBgContainer, this._toolButtonContainer, this._colorButtonContainer);\n            //把容器添加到舞台\n            this._stage.addChild(this._itemObjectContainer, this._bgContainer, this._toolMaxContainer);\n\n            //默认颜色\n            this._fillColor = {\n                r: 255,\n                g: 255,\n                b: 255\n            };\n            //初始化静态背景\n            this.initBg();\n            //初始化工具按钮\n            this.initToolButton();\n            //初始化可改变颜色背景\n            this.initChangeBg();\n            // 初始化按钮\n            this.createColorButton(this._eastColor);\n        }\n\n\n        // 引导游戏\n        static guideGame() {\n            const $guide = $('.guide');\n            const $page_guide = $('.page_guide');\n            const guide_len = $guide.length;\n            let guideIndex = 0;\n            $('.game_page').fadeIn();\n            $('.load_page').hide();\n            $('.select_page').hide();\n            $page_guide.show().click(function () {\n                $guide.eq(guideIndex).hide().next().show();\n                guideIndex++;\n                if (guideIndex >= guide_len) {\n                    $(this).hide();\n                }\n            });\n            $('.guide_close').click(function () {\n                $page_guide.hide();\n            });\n        }\n    }\n});"]}