{"version":3,"sources":["easeljs.js"],"names":[],"mappings":"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","file":"easeljs-compile.js","sourcesContent":["/*!\n* EaselJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2010 gskinner.com, inc.\n*\n* Permission is hereby granted, free of charge, to any person\n* obtaining a copy of this software and associated documentation\n* files (the \"Software\"), to deal in the Software without\n* restriction, including without limitation the rights to use,\n* copy, modify, merge, publish, distribute, sublicense, and/or sell\n* copies of the Software, and to permit persons to whom the\n* Software is furnished to do so, subject to the following\n* conditions:\n*\n* The above copyright notice and this permission notice shall be\n* included in all copies or substantial portions of the Software.\n*\n* THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES\n* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT\n* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\n* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\n* OTHER DEALINGS IN THE SOFTWARE.\n*/\n\n\n//##############################################################################\n// extend.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Sets up the prototype chain and constructor property for a new class.\n *\n * This should be called right after creating the class constructor.\n *\n * \tfunction MySubClass() {}\n * \tcreatejs.extend(MySubClass, MySuperClass);\n * \tMySubClass.prototype.doSomething = function() { }\n *\n * \tvar foo = new MySubClass();\n * \tconsole.log(foo instanceof MySuperClass); // true\n * \tconsole.log(foo.prototype.constructor === MySubClass); // true\n *\n * @method extend\n * @param {Function} subclass The subclass.\n * @param {Function} superclass The superclass to extend.\n * @return {Function} Returns the subclass's new prototype.\n */\ncreatejs.extend = function(subclass, superclass) {\n\t\"use strict\";\n\n\tfunction o() { this.constructor = subclass; }\n\to.prototype = superclass.prototype;\n\treturn (subclass.prototype = new o());\n};\n\n//##############################################################################\n// promote.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Promotes any methods on the super class that were overridden, by creating an alias in the format `prefix_methodName`.\n * It is recommended to use the super class's name as the prefix.\n * An alias to the super class's constructor is always added in the format `prefix_constructor`.\n * This allows the subclass to call super class methods without using `function.call`, providing better performance.\n *\n * For example, if `MySubClass` extends `MySuperClass`, and both define a `draw` method, then calling `promote(MySubClass, \"MySuperClass\")`\n * would add a `MySuperClass_constructor` method to MySubClass and promote the `draw` method on `MySuperClass` to the\n * prototype of `MySubClass` as `MySuperClass_draw`.\n *\n * This should be called after the class's prototype is fully defined.\n *\n * \tfunction ClassA(name) {\n * \t\tthis.name = name;\n * \t}\n * \tClassA.prototype.greet = function() {\n * \t\treturn \"Hello \"+this.name;\n * \t}\n *\n * \tfunction ClassB(name, punctuation) {\n * \t\tthis.ClassA_constructor(name);\n * \t\tthis.punctuation = punctuation;\n * \t}\n * \tcreatejs.extend(ClassB, ClassA);\n * \tClassB.prototype.greet = function() {\n * \t\treturn this.ClassA_greet()+this.punctuation;\n * \t}\n * \tcreatejs.promote(ClassB, \"ClassA\");\n *\n * \tvar foo = new ClassB(\"World\", \"!?!\");\n * \tconsole.log(foo.greet()); // Hello World!?!\n *\n * @method promote\n * @param {Function} subclass The class to promote super class methods on.\n * @param {String} prefix The prefix to add to the promoted method names. Usually the name of the superclass.\n * @return {Function} Returns the subclass.\n */\ncreatejs.promote = function(subclass, prefix) {\n\t\"use strict\";\n\n\tvar subP = subclass.prototype, supP = (Object.getPrototypeOf&&Object.getPrototypeOf(subP))||subP.__proto__;\n\tif (supP) {\n\t\tsubP[(prefix+=\"_\") + \"constructor\"] = supP.constructor; // constructor is not always innumerable\n\t\tfor (var n in supP) {\n\t\t\tif (subP.hasOwnProperty(n) && (typeof supP[n] == \"function\")) { subP[prefix + n] = supP[n]; }\n\t\t}\n\t}\n\treturn subclass;\n};\n\n//##############################################################################\n// indexOf.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Finds the first occurrence of a specified value searchElement in the passed in array, and returns the index of\n * that value.  Returns -1 if value is not found.\n *\n *      var i = createjs.indexOf(myArray, myElementToFind);\n *\n * @method indexOf\n * @param {Array} array Array to search for searchElement\n * @param searchElement Element to find in array.\n * @return {Number} The first index of searchElement in array.\n */\ncreatejs.indexOf = function (array, searchElement){\n\t\"use strict\";\n\n\tfor (var i = 0,l=array.length; i < l; i++) {\n\t\tif (searchElement === array[i]) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n//##############################################################################\n// UID.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Global utility for generating sequential unique ID numbers. The UID class uses a static interface (ex. <code>UID.get()</code>)\n\t * and should not be instantiated.\n\t * @class UID\n\t * @static\n\t **/\n\tfunction UID() {\n\t\tthrow \"UID cannot be instantiated\";\n\t}\n\n\n// private static properties:\n\t/**\n\t * @property _nextID\n\t * @type Number\n\t * @protected\n\t **/\n\tUID._nextID = 0;\n\n\n// public static methods:\n\t/**\n\t * Returns the next unique id.\n\t * @method get\n\t * @return {Number} The next unique id\n\t * @static\n\t **/\n\tUID.get = function() {\n\t\treturn UID._nextID++;\n\t};\n\n\n\tcreatejs.UID = UID;\n}());\n\n//##############################################################################\n// deprecate.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/**\n * @class Utility Methods\n */\n\n/**\n * Wraps deprecated methods so they still be used, but throw warnings to developers.\n *\n *\tobj.deprecatedMethod = createjs.deprecate(\"Old Method Name\", obj._fallbackMethod);\n *\n * The recommended approach for deprecated properties is:\n *\n *\ttry {\n *\t\tObj\tect.defineProperties(object, {\n *\t\t\treadyOnlyProp: { get: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }) },\n *\t\t\treadWriteProp: {\n *\t\t\t\tget: createjs.deprecate(\"readOnlyProp\", function() { return this.alternateProp; }),\n *\t\t\t\tset: createjs.deprecate(\"readOnlyProp\", function(val) { this.alternateProp = val; })\n *\t\t});\n *\t} catch (e) {}\n *\n * @method deprecate\n * @param {Function} [fallbackMethod=null] A method to call when the deprecated method is used. See the example for how\n * @param {String} [name=null] The name of the method or property to display in the console warning.\n * to deprecate properties.\n * @return {Function} If a fallbackMethod is supplied, returns a closure that will call the fallback method after\n * logging the warning in the console.\n */\ncreatejs.deprecate = function(fallbackMethod, name) {\n\t\"use strict\";\n\treturn function() {\n\t\tvar msg = \"Deprecated property or method '\"+name+\"'. See docs for info.\";\n\t\tconsole && (console.warn ? console.warn(msg) : console.log(msg));\n\t\treturn fallbackMethod && fallbackMethod.apply(this, arguments);\n\t}\n};\n\n//##############################################################################\n// Event.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n// constructor:\n\t/**\n\t * Contains properties and methods shared by all events for use with\n\t * {{#crossLink \"EventDispatcher\"}}{{/crossLink}}.\n\t * \n\t * Note that Event objects are often reused, so you should never\n\t * rely on an event object's state outside of the call stack it was received in.\n\t * @class Event\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @constructor\n\t **/\n\tfunction Event(type, bubbles, cancelable) {\n\t\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The type of event.\n\t\t * @property type\n\t\t * @type String\n\t\t **/\n\t\tthis.type = type;\n\t\n\t\t/**\n\t\t * The object that generated an event.\n\t\t * @property target\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.target = null;\n\t\n\t\t/**\n\t\t * The current target that a bubbling event is being dispatched from. For non-bubbling events, this will\n\t\t * always be the same as target. For example, if childObj.parent = parentObj, and a bubbling event\n\t\t * is generated from childObj, then a listener on parentObj would receive the event with\n\t\t * target=childObj (the original target) and currentTarget=parentObj (where the listener was added).\n\t\t * @property currentTarget\n\t\t * @type Object\n\t\t * @default null\n\t\t * @readonly\n\t\t*/\n\t\tthis.currentTarget = null;\n\t\n\t\t/**\n\t\t * For bubbling events, this indicates the current event phase:<OL>\n\t\t * \t<LI> capture phase: starting from the top parent to the target</LI>\n\t\t * \t<LI> at target phase: currently being dispatched from the target</LI>\n\t\t * \t<LI> bubbling phase: from the target to the top parent</LI>\n\t\t * </OL>\n\t\t * @property eventPhase\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.eventPhase = 0;\n\t\n\t\t/**\n\t\t * Indicates whether the event will bubble through the display list.\n\t\t * @property bubbles\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.bubbles = !!bubbles;\n\t\n\t\t/**\n\t\t * Indicates whether the default behaviour of this event can be cancelled via\n\t\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}}. This is set via the Event constructor.\n\t\t * @property cancelable\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.cancelable = !!cancelable;\n\t\n\t\t/**\n\t\t * The epoch time at which this event was created.\n\t\t * @property timeStamp\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t*/\n\t\tthis.timeStamp = (new Date()).getTime();\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property defaultPrevented\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.defaultPrevented = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopPropagation\"}}{{/crossLink}} or\n\t\t * {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called on this event.\n\t\t * @property propagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.propagationStopped = false;\n\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/stopImmediatePropagation\"}}{{/crossLink}} has been called\n\t\t * on this event.\n\t\t * @property immediatePropagationStopped\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.immediatePropagationStopped = false;\n\t\t\n\t\t/**\n\t\t * Indicates if {{#crossLink \"Event/remove\"}}{{/crossLink}} has been called on this event.\n\t\t * @property removed\n\t\t * @type Boolean\n\t\t * @default false\n\t\t * @readonly\n\t\t*/\n\t\tthis.removed = false;\n\t}\n\tvar p = Event.prototype;\n\n// public methods:\n\t/**\n\t * Sets {{#crossLink \"Event/defaultPrevented\"}}{{/crossLink}} to true if the event is cancelable.\n\t * Mirrors the DOM level 2 event standard. In general, cancelable events that have `preventDefault()` called will\n\t * cancel the default behaviour associated with the event.\n\t * @method preventDefault\n\t **/\n\tp.preventDefault = function() {\n\t\tthis.defaultPrevented = this.cancelable&&true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopPropagation\n\t **/\n\tp.stopPropagation = function() {\n\t\tthis.propagationStopped = true;\n\t};\n\n\t/**\n\t * Sets {{#crossLink \"Event/propagationStopped\"}}{{/crossLink}} and\n\t * {{#crossLink \"Event/immediatePropagationStopped\"}}{{/crossLink}} to true.\n\t * Mirrors the DOM event standard.\n\t * @method stopImmediatePropagation\n\t **/\n\tp.stopImmediatePropagation = function() {\n\t\tthis.immediatePropagationStopped = this.propagationStopped = true;\n\t};\n\t\n\t/**\n\t * Causes the active listener to be removed via removeEventListener();\n\t * \n\t * \t\tmyBtn.addEventListener(\"click\", function(evt) {\n\t * \t\t\t// do stuff...\n\t * \t\t\tevt.remove(); // removes this listener.\n\t * \t\t});\n\t * \n\t * @method remove\n\t **/\n\tp.remove = function() {\n\t\tthis.removed = true;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Event instance.\n\t * @method clone\n\t * @return {Event} a clone of the Event instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Event(this.type, this.bubbles, this.cancelable);\n\t};\n\t\n\t/**\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\n\t *\n\t * @method set\n\t * @param {Object} props A generic object containing properties to copy to the instance.\n\t * @return {Event} Returns the instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t*/\n\tp.set = function(props) {\n\t\tfor (var n in props) { this[n] = props[n]; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Event (type=\"+this.type+\")]\";\n\t};\n\n\tcreatejs.Event = Event;\n}());\n\n//##############################################################################\n// EventDispatcher.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * EventDispatcher provides methods for managing queues of event listeners and dispatching events.\r\n\t *\r\n\t * You can either extend EventDispatcher or mix its methods into an existing prototype or instance by using the\r\n\t * EventDispatcher {{#crossLink \"EventDispatcher/initialize\"}}{{/crossLink}} method.\r\n\t * \r\n\t * Together with the CreateJS Event class, EventDispatcher provides an extended event model that is based on the\r\n\t * DOM Level 2 event model, including addEventListener, removeEventListener, and dispatchEvent. It supports\r\n\t * bubbling / capture, preventDefault, stopPropagation, stopImmediatePropagation, and handleEvent.\r\n\t * \r\n\t * EventDispatcher also exposes a {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} method, which makes it easier\r\n\t * to create scoped listeners, listeners that only run once, and listeners with associated arbitrary data. The \r\n\t * {{#crossLink \"EventDispatcher/off\"}}{{/crossLink}} method is merely an alias to\r\n\t * {{#crossLink \"EventDispatcher/removeEventListener\"}}{{/crossLink}}.\r\n\t * \r\n\t * Another addition to the DOM Level 2 model is the {{#crossLink \"EventDispatcher/removeAllEventListeners\"}}{{/crossLink}}\r\n\t * method, which can be used to listeners for all events, or listeners for a specific event. The Event object also \r\n\t * includes a {{#crossLink \"Event/remove\"}}{{/crossLink}} method which removes the active listener.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Add EventDispatcher capabilities to the \"MyClass\" class.\r\n\t *\r\n\t *      EventDispatcher.initialize(MyClass.prototype);\r\n\t *\r\n\t * Add an event (see {{#crossLink \"EventDispatcher/addEventListener\"}}{{/crossLink}}).\r\n\t *\r\n\t *      instance.addEventListener(\"eventName\", handlerMethod);\r\n\t *      function handlerMethod(event) {\r\n\t *          console.log(event.target + \" Was Clicked\");\r\n\t *      }\r\n\t *\r\n\t * <b>Maintaining proper scope</b><br />\r\n\t * Scope (ie. \"this\") can be be a challenge with events. Using the {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}}\r\n\t * method to subscribe to events simplifies this.\r\n\t *\r\n\t *      instance.addEventListener(\"click\", function(event) {\r\n\t *          console.log(instance == this); // false, scope is ambiguous.\r\n\t *      });\r\n\t *      \r\n\t *      instance.on(\"click\", function(event) {\r\n\t *          console.log(instance == this); // true, \"on\" uses dispatcher scope by default.\r\n\t *      });\r\n\t * \r\n\t * If you want to use addEventListener instead, you may want to use function.bind() or a similar proxy to manage\r\n\t * scope.\r\n\t *\r\n\t * <b>Browser support</b>\r\n\t * The event model in CreateJS can be used separately from the suite in any project, however the inheritance model\r\n\t * requires modern browsers (IE9+).\r\n\t *      \r\n\t *\r\n\t * @class EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction EventDispatcher() {\r\n\t\r\n\t\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _listeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._listeners = null;\r\n\t\t\r\n\t\t/**\r\n\t\t * @protected\r\n\t\t * @property _captureListeners\r\n\t\t * @type Object\r\n\t\t **/\r\n\t\tthis._captureListeners = null;\r\n\t}\r\n\tvar p = EventDispatcher.prototype;\r\n\r\n// static public methods:\r\n\t/**\r\n\t * Static initializer to mix EventDispatcher methods into a target object or prototype.\r\n\t * \r\n\t * \t\tEventDispatcher.initialize(MyClass.prototype); // add to the prototype of the class\r\n\t * \t\tEventDispatcher.initialize(myObject); // add to a specific instance\r\n\t * \r\n\t * @method initialize\r\n\t * @static\r\n\t * @param {Object} target The target object to inject EventDispatcher methods into. This can be an instance or a\r\n\t * prototype.\r\n\t **/\r\n\tEventDispatcher.initialize = function(target) {\r\n\t\ttarget.addEventListener = p.addEventListener;\r\n\t\ttarget.on = p.on;\r\n\t\ttarget.removeEventListener = target.off =  p.removeEventListener;\r\n\t\ttarget.removeAllEventListeners = p.removeAllEventListeners;\r\n\t\ttarget.hasEventListener = p.hasEventListener;\r\n\t\ttarget.dispatchEvent = p.dispatchEvent;\r\n\t\ttarget._dispatchEvent = p._dispatchEvent;\r\n\t\ttarget.willTrigger = p.willTrigger;\r\n\t};\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Adds the specified event listener. Note that adding multiple listeners to the same function will result in\r\n\t * multiple callbacks getting fired.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.addEventListener(\"click\", handleClick);\r\n\t *      function handleClick(event) {\r\n\t *         // Click happened.\r\n\t *      }\r\n\t *\r\n\t * @method addEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function | Object} Returns the listener for chaining or assignment.\r\n\t **/\r\n\tp.addEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners;\r\n\t\tif (useCapture) {\r\n\t\t\tlisteners = this._captureListeners = this._captureListeners||{};\r\n\t\t} else {\r\n\t\t\tlisteners = this._listeners = this._listeners||{};\r\n\t\t}\r\n\t\tvar arr = listeners[type];\r\n\t\tif (arr) { this.removeEventListener(type, listener, useCapture); }\r\n\t\tarr = listeners[type]; // remove may have deleted the array\r\n\t\tif (!arr) { listeners[type] = [listener];  }\r\n\t\telse { arr.push(listener); }\r\n\t\treturn listener;\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut method for using addEventListener that makes it easier to specify an execution scope, have a listener\r\n\t * only run once, associate arbitrary data with the listener, and remove the listener.\r\n\t * \r\n\t * This method works by creating an anonymous wrapper function and subscribing it with addEventListener.\r\n\t * The wrapper function is returned for use with `removeEventListener` (or `off`).\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener, or use\r\n\t * {{#crossLink \"Event/remove\"}}{{/crossLink}}. Likewise, each time you call `on` a NEW wrapper function is subscribed, so multiple calls\r\n\t * to `on` with the same params will create multiple listeners.\r\n\t * \r\n\t * <h4>Example</h4>\r\n\t * \r\n\t * \t\tvar listener = myBtn.on(\"click\", handleClick, null, false, {count:3});\r\n\t * \t\tfunction handleClick(evt, data) {\r\n\t * \t\t\tdata.count -= 1;\r\n\t * \t\t\tconsole.log(this == myBtn); // true - scope defaults to the dispatcher\r\n\t * \t\t\tif (data.count == 0) {\r\n\t * \t\t\t\talert(\"clicked 3 times!\");\r\n\t * \t\t\t\tmyBtn.off(\"click\", listener);\r\n\t * \t\t\t\t// alternately: evt.remove();\r\n\t * \t\t\t}\r\n\t * \t\t}\r\n\t * \r\n\t * @method on\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener An object with a handleEvent method, or a function that will be called when\r\n\t * the event is dispatched.\r\n\t * @param {Object} [scope] The scope to execute the listener in. Defaults to the dispatcher/currentTarget for function listeners, and to the listener itself for object listeners (ie. using handleEvent).\r\n\t * @param {Boolean} [once=false] If true, the listener will remove itself after the first time it is triggered.\r\n\t * @param {*} [data] Arbitrary data that will be included as the second parameter when the listener is called.\r\n\t * @param {Boolean} [useCapture=false] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t * @return {Function} Returns the anonymous function that was created and assigned as the listener. This is needed to remove the listener later using .removeEventListener.\r\n\t **/\r\n\tp.on = function(type, listener, scope, once, data, useCapture) {\r\n\t\tif (listener.handleEvent) {\r\n\t\t\tscope = scope||listener;\r\n\t\t\tlistener = listener.handleEvent;\r\n\t\t}\r\n\t\tscope = scope||this;\r\n\t\treturn this.addEventListener(type, function(evt) {\r\n\t\t\t\tlistener.call(scope, evt, data);\r\n\t\t\t\tonce&&evt.remove();\r\n\t\t\t}, useCapture);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified event listener.\r\n\t *\r\n\t * <b>Important Note:</b> that you must pass the exact function reference used when the event was added. If a proxy\r\n\t * function, or function closure is used as the callback, the proxy/closure reference must be used - a new proxy or\r\n\t * closure will not work.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.removeEventListener(\"click\", handleClick);\r\n\t *\r\n\t * @method removeEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.removeEventListener = function(type, listener, useCapture) {\r\n\t\tvar listeners = useCapture ? this._captureListeners : this._listeners;\r\n\t\tif (!listeners) { return; }\r\n\t\tvar arr = listeners[type];\r\n\t\tif (!arr) { return; }\r\n\t\tfor (var i=0,l=arr.length; i<l; i++) {\r\n\t\t\tif (arr[i] == listener) {\r\n\t\t\t\tif (l==1) { delete(listeners[type]); } // allows for faster checks.\r\n\t\t\t\telse { arr.splice(i,1); }\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A shortcut to the removeEventListener method, with the same parameters and return value. This is a companion to the\r\n\t * .on method.\r\n\t * \r\n\t * <b>IMPORTANT:</b> To remove a listener added with `on`, you must pass in the returned wrapper function as the listener. See \r\n\t * {{#crossLink \"EventDispatcher/on\"}}{{/crossLink}} for an example.\r\n\t *\r\n\t * @method off\r\n\t * @param {String} type The string type of the event.\r\n\t * @param {Function | Object} listener The listener function or object.\r\n\t * @param {Boolean} [useCapture] For events that bubble, indicates whether to listen for the event in the capture or bubbling/target phase.\r\n\t **/\r\n\tp.off = p.removeEventListener;\r\n\r\n\t/**\r\n\t * Removes all listeners for the specified type, or all listeners of all types.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Remove all listeners\r\n\t *      displayObject.removeAllEventListeners();\r\n\t *\r\n\t *      // Remove all click listeners\r\n\t *      displayObject.removeAllEventListeners(\"click\");\r\n\t *\r\n\t * @method removeAllEventListeners\r\n\t * @param {String} [type] The string type of the event. If omitted, all listeners for all types will be removed.\r\n\t **/\r\n\tp.removeAllEventListeners = function(type) {\r\n\t\tif (!type) { this._listeners = this._captureListeners = null; }\r\n\t\telse {\r\n\t\t\tif (this._listeners) { delete(this._listeners[type]); }\r\n\t\t\tif (this._captureListeners) { delete(this._captureListeners[type]); }\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Dispatches the specified event to all listeners.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      // Use a string event\r\n\t *      this.dispatchEvent(\"complete\");\r\n\t *\r\n\t *      // Use an Event instance\r\n\t *      var event = new createjs.Event(\"progress\");\r\n\t *      this.dispatchEvent(event);\r\n\t *\r\n\t * @method dispatchEvent\r\n\t * @param {Object | String | Event} eventObj An object with a \"type\" property, or a string type.\r\n\t * While a generic object will work, it is recommended to use a CreateJS Event instance. If a string is used,\r\n\t * dispatchEvent will construct an Event instance if necessary with the specified type. This latter approach can\r\n\t * be used to avoid event object instantiation for non-bubbling events that may not have any listeners.\r\n\t * @param {Boolean} [bubbles] Specifies the `bubbles` value when a string was passed to eventObj.\r\n\t * @param {Boolean} [cancelable] Specifies the `cancelable` value when a string was passed to eventObj.\r\n\t * @return {Boolean} Returns false if `preventDefault()` was called on a cancelable event, true otherwise.\r\n\t **/\r\n\tp.dispatchEvent = function(eventObj, bubbles, cancelable) {\r\n\t\tif (typeof eventObj == \"string\") {\r\n\t\t\t// skip everything if there's no listeners and it doesn't bubble:\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tif (!bubbles && (!listeners || !listeners[eventObj])) { return true; }\r\n\t\t\teventObj = new createjs.Event(eventObj, bubbles, cancelable);\r\n\t\t} else if (eventObj.target && eventObj.clone) {\r\n\t\t\t// redispatching an active event object, so clone it:\r\n\t\t\teventObj = eventObj.clone();\r\n\t\t}\r\n\t\t\r\n\t\t// TODO: it would be nice to eliminate this. Maybe in favour of evtObj instanceof Event? Or !!evtObj.createEvent\r\n\t\ttry { eventObj.target = this; } catch (e) {} // try/catch allows redispatching of native events\r\n\r\n\t\tif (!eventObj.bubbles || !this.parent) {\r\n\t\t\tthis._dispatchEvent(eventObj, 2);\r\n\t\t} else {\r\n\t\t\tvar top=this, list=[top];\r\n\t\t\twhile (top.parent) { list.push(top = top.parent); }\r\n\t\t\tvar i, l=list.length;\r\n\r\n\t\t\t// capture & atTarget\r\n\t\t\tfor (i=l-1; i>=0 && !eventObj.propagationStopped; i--) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 1+(i==0));\r\n\t\t\t}\r\n\t\t\t// bubbling\r\n\t\t\tfor (i=1; i<l && !eventObj.propagationStopped; i++) {\r\n\t\t\t\tlist[i]._dispatchEvent(eventObj, 3);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn !eventObj.defaultPrevented;\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type.\r\n\t * @method hasEventListener\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns true if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.hasEventListener = function(type) {\r\n\t\tvar listeners = this._listeners, captureListeners = this._captureListeners;\r\n\t\treturn !!((listeners && listeners[type]) || (captureListeners && captureListeners[type]));\r\n\t};\r\n\t\r\n\t/**\r\n\t * Indicates whether there is at least one listener for the specified event type on this object or any of its\r\n\t * ancestors (parent, parent's parent, etc). A return value of true indicates that if a bubbling event of the\r\n\t * specified type is dispatched from this object, it will trigger at least one listener.\r\n\t * \r\n\t * This is similar to {{#crossLink \"EventDispatcher/hasEventListener\"}}{{/crossLink}}, but it searches the entire\r\n\t * event flow for a listener, not just this object.\r\n\t * @method willTrigger\r\n\t * @param {String} type The string type of the event.\r\n\t * @return {Boolean} Returns `true` if there is at least one listener for the specified event.\r\n\t **/\r\n\tp.willTrigger = function(type) {\r\n\t\tvar o = this;\r\n\t\twhile (o) {\r\n\t\t\tif (o.hasEventListener(type)) { return true; }\r\n\t\t\to = o.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[EventDispatcher]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _dispatchEvent\r\n\t * @param {Object | Event} eventObj\r\n\t * @param {Object} eventPhase\r\n\t * @protected\r\n\t **/\r\n\tp._dispatchEvent = function(eventObj, eventPhase) {\r\n\t\tvar l, arr, listeners = (eventPhase <= 2) ? this._captureListeners : this._listeners;\r\n\t\tif (eventObj && listeners && (arr = listeners[eventObj.type]) && (l=arr.length)) {\r\n\t\t\ttry { eventObj.currentTarget = this; } catch (e) {}\r\n\t\t\ttry { eventObj.eventPhase = eventPhase|0; } catch (e) {}\r\n\t\t\teventObj.removed = false;\r\n\t\t\t\r\n\t\t\tarr = arr.slice(); // to avoid issues with items being removed or added during the dispatch\r\n\t\t\tfor (var i=0; i<l && !eventObj.immediatePropagationStopped; i++) {\r\n\t\t\t\tvar o = arr[i];\r\n\t\t\t\tif (o.handleEvent) { o.handleEvent(eventObj); }\r\n\t\t\t\telse { o(eventObj); }\r\n\t\t\t\tif (eventObj.removed) {\r\n\t\t\t\t\tthis.off(eventObj.type, o, eventPhase==1);\r\n\t\t\t\t\teventObj.removed = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (eventPhase === 2) { this._dispatchEvent(eventObj, 2.1); }\r\n\t};\r\n\r\n\r\n\tcreatejs.EventDispatcher = EventDispatcher;\r\n}());\n\n//##############################################################################\n// Ticker.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Ticker provides a centralized tick or heartbeat broadcast at a set interval. Listeners can subscribe to the tick\n\t * event to be notified when a set time interval has elapsed.\n\t *\n\t * Note that the interval that the tick event is called is a target interval, and may be broadcast at a slower interval\n\t * when under high CPU load. The Ticker class uses a static interface (ex. `Ticker.framerate = 30;`) and\n\t * can not be instantiated.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          // Actions carried out each tick (aka frame)\n\t *          if (!event.paused) {\n\t *              // Actions carried out when the Ticker is not paused.\n\t *          }\n\t *      }\n\t *\n\t * @class Ticker\n\t * @uses EventDispatcher\n\t * @static\n\t **/\n\tfunction Ticker() {\n\t\tthrow \"Ticker cannot be instantiated.\";\n\t}\n\n\n// constants:\n\t/**\n\t * In this mode, Ticker uses the requestAnimationFrame API, but attempts to synch the ticks to target framerate. It\n\t * uses a simple heuristic that compares the time of the RAF return to the target time for the current frame and\n\t * dispatches the tick when the time is within a certain threshold.\n\t *\n\t * This mode has a higher variance for time between frames than {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}},\n\t * but does not require that content be time based as with {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}} while\n\t * gaining the benefits of that API (screen synch, background throttling).\n\t *\n\t * Variance is usually lowest for framerates that are a divisor of the RAF frequency. This is usually 60, so\n\t * framerates of 10, 12, 15, 20, and 30 work well.\n\t *\n\t * Falls back to {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF_SYNCHED\n\t * @static\n\t * @type {String}\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tTicker.RAF_SYNCHED = \"synched\";\n\n\t/**\n\t * In this mode, Ticker passes through the requestAnimationFrame heartbeat, ignoring the target framerate completely.\n\t * Because requestAnimationFrame frequency is not deterministic, any content using this mode should be time based.\n\t * You can leverage {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} and the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object's \"delta\" properties to make this easier.\n\t *\n\t * Falls back on {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}} if the requestAnimationFrame API is not\n\t * supported.\n\t * @property RAF\n\t * @static\n\t * @type {String}\n\t * @default \"raf\"\n\t * @readonly\n\t **/\n\tTicker.RAF = \"raf\";\n\n\t/**\n\t * In this mode, Ticker uses the setTimeout API. This provides predictable, adaptive frame timing, but does not\n\t * provide the benefits of requestAnimationFrame (screen synch, background throttling).\n\t * @property TIMEOUT\n\t * @static\n\t * @type {String}\n\t * @default \"timeout\"\n\t * @readonly\n\t **/\n\tTicker.TIMEOUT = \"timeout\";\n\n\n// static events:\n\t/**\n\t * Dispatched each tick. The event will be dispatched to each listener even when the Ticker has been paused using\n\t * {{#crossLink \"Ticker/paused:property\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          console.log(\"Paused:\", event.paused, event.delta);\n\t *      }\n\t *\n\t * @event tick\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Boolean} paused Indicates whether the ticker is currently paused.\n\t * @param {Number} delta The time elapsed in ms since the last tick.\n\t * @param {Number} time The total time in ms since Ticker was initialized.\n\t * @param {Number} runTime The total time in ms that Ticker was not paused since it was initialized. For example,\n\t * \tyou could determine the amount of time that the Ticker has been paused since initialization with `time-runTime`.\n\t * @since 0.6.0\n\t */\n\n\n// public static properties:\n\t/**\n\t * Specifies the timing api (setTimeout or requestAnimationFrame) and mode to use. See\n\t * {{#crossLink \"Ticker/TIMEOUT:property\"}}{{/crossLink}}, {{#crossLink \"Ticker/RAF:property\"}}{{/crossLink}}, and\n\t * {{#crossLink \"Ticker/RAF_SYNCHED:property\"}}{{/crossLink}} for mode details.\n\t * @property timingMode\n\t * @static\n\t * @type {String}\n\t * @default Ticker.TIMEOUT\n\t **/\n\tTicker.timingMode = null;\n\n\t/**\n\t * Specifies a maximum value for the delta property in the tick event object. This is useful when building time\n\t * based animations and systems to prevent issues caused by large time gaps caused by background tabs, system sleep,\n\t * alert dialogs, or other blocking routines. Double the expected frame duration is often an effective value\n\t * (ex. maxDelta=50 when running at 40fps).\n\t * \n\t * This does not impact any other values (ex. time, runTime, etc), so you may experience issues if you enable maxDelta\n\t * when using both delta and other values.\n\t * \n\t * If 0, there is no maximum.\n\t * @property maxDelta\n\t * @static\n\t * @type {number}\n\t * @default 0\n\t */\n\tTicker.maxDelta = 0;\n\t\n\t/**\n\t * When the ticker is paused, all listeners will still receive a tick event, but the <code>paused</code> property\n\t * of the event will be `true`. Also, while paused the `runTime` will not increase. See {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}},\n\t * {{#crossLink \"Ticker/getTime\"}}{{/crossLink}}, and {{#crossLink \"Ticker/getEventTime\"}}{{/crossLink}} for more\n\t * info.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      createjs.Ticker.paused = true;\n\t *      function handleTick(event) {\n\t *          console.log(event.paused,\n\t *          \tcreatejs.Ticker.getTime(false),\n\t *          \tcreatejs.Ticker.getTime(true));\n\t *      }\n\t *\n\t * @property paused\n\t * @static\n\t * @type {Boolean}\n\t * @default false\n\t **/\n\tTicker.paused = false;\n\n\n// mix-ins:\n\t// EventDispatcher methods:\n\tTicker.removeEventListener = null;\n\tTicker.removeAllEventListeners = null;\n\tTicker.dispatchEvent = null;\n\tTicker.hasEventListener = null;\n\tTicker._listeners = null;\n\tcreatejs.EventDispatcher.initialize(Ticker); // inject EventDispatcher methods.\n\tTicker._addEventListener = Ticker.addEventListener;\n\tTicker.addEventListener = function() {\n\t\t!Ticker._inited&&Ticker.init();\n\t\treturn Ticker._addEventListener.apply(Ticker, arguments);\n\t};\n\n\n// private static properties:\n\t/**\n\t * @property _inited\n\t * @static\n\t * @type {Boolean}\n\t * @private\n\t **/\n\tTicker._inited = false;\n\n\t/**\n\t * @property _startTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._startTime = 0;\n\n\t/**\n\t * @property _pausedTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._pausedTime=0;\n\n\t/**\n\t * The number of ticks that have passed\n\t * @property _ticks\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._ticks = 0;\n\n\t/**\n\t * The number of ticks that have passed while Ticker has been paused\n\t * @property _pausedTicks\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._pausedTicks = 0;\n\n\t/**\n\t * @property _interval\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._interval = 50;\n\n\t/**\n\t * @property _lastTime\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._lastTime = 0;\n\n\t/**\n\t * @property _times\n\t * @static\n\t * @type {Array}\n\t * @private\n\t **/\n\tTicker._times = null;\n\n\t/**\n\t * @property _tickTimes\n\t * @static\n\t * @type {Array}\n\t * @private\n\t **/\n\tTicker._tickTimes = null;\n\n\t/**\n\t * Stores the timeout or requestAnimationFrame id.\n\t * @property _timerId\n\t * @static\n\t * @type {Number}\n\t * @private\n\t **/\n\tTicker._timerId = null;\n\t\n\t/**\n\t * True if currently using requestAnimationFrame, false if using setTimeout. This may be different than timingMode\n\t * if that property changed and a tick hasn't fired.\n\t * @property _raf\n\t * @static\n\t * @type {Boolean}\n\t * @private\n\t **/\n\tTicker._raf = true;\n\t\n\n// static getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method _setInterval\n\t * @private\n\t * @static\n\t * @param {Number} interval\n\t **/\n\tTicker._setInterval = function(interval) {\n\t\tTicker._interval = interval;\n\t\tif (!Ticker._inited) { return; }\n\t\tTicker._setupTick();\n\t};\n\t// Ticker.setInterval is @deprecated. Remove for 1.1+\n\tTicker.setInterval = createjs.deprecate(Ticker._setInterval, \"Ticker.setInterval\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/interval:property\"}}{{/crossLink}} property instead.\n\t * @method _getInterval\n\t * @private\n\t * @static\n\t * @return {Number}\n\t **/\n\tTicker._getInterval = function() {\n\t\treturn Ticker._interval;\n\t};\n\t// Ticker.getInterval is @deprecated. Remove for 1.1+\n\tTicker.getInterval = createjs.deprecate(Ticker._getInterval, \"Ticker.getInterval\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method _setFPS\n\t * @private\n\t * @static\n\t * @param {Number} value\n\t **/\n\tTicker._setFPS = function(value) {\n\t\tTicker._setInterval(1000/value);\n\t};\n\t// Ticker.setFPS is @deprecated. Remove for 1.1+\n\tTicker.setFPS = createjs.deprecate(Ticker._setFPS, \"Ticker.setFPS\");\n\n\t/**\n\t * Use the {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} property instead.\n\t * @method _getFPS\n\t * @static\n\t * @private\n\t * @return {Number}\n\t **/\n\tTicker._getFPS = function() {\n\t\treturn 1000/Ticker._interval;\n\t};\n\t// Ticker.getFPS is @deprecated. Remove for 1.1+\n\tTicker.getFPS = createjs.deprecate(Ticker._getFPS, \"Ticker.getFPS\");\n\n\t/**\n\t * Indicates the target time (in milliseconds) between ticks. Default is 50 (20 FPS).\n\t * Note that actual time between ticks may be more than specified depending on CPU load.\n\t * This property is ignored if the ticker is using the `RAF` timing mode.\n\t * @property interval\n\t * @static\n\t * @type {Number}\n\t **/\n\t \n\t/**\n\t * Indicates the target frame rate in frames per second (FPS). Effectively just a shortcut to `interval`, where\n\t * `framerate == 1000/interval`.\n\t * @property framerate\n\t * @static\n\t * @type {Number}\n\t **/\n\ttry {\n\t\tObject.defineProperties(Ticker, {\n\t\t\tinterval: { get: Ticker._getInterval, set: Ticker._setInterval },\n\t\t\tframerate: { get: Ticker._getFPS, set: Ticker._setFPS }\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\n// public static methods:\n\t/**\n\t * Starts the tick. This is called automatically when the first listener is added.\n\t * @method init\n\t * @static\n\t **/\n\tTicker.init = function() {\n\t\tif (Ticker._inited) { return; }\n\t\tTicker._inited = true;\n\t\tTicker._times = [];\n\t\tTicker._tickTimes = [];\n\t\tTicker._startTime = Ticker._getTime();\n\t\tTicker._times.push(Ticker._lastTime = 0);\n\t\tTicker.interval = Ticker._interval;\n\t};\n\t\n\t/**\n\t * Stops the Ticker and removes all listeners. Use init() to restart the Ticker.\n\t * @method reset\n\t * @static\n\t **/\n\tTicker.reset = function() {\n\t\tif (Ticker._raf) {\n\t\t\tvar f = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.mozCancelAnimationFrame || window.oCancelAnimationFrame || window.msCancelAnimationFrame;\n\t\t\tf&&f(Ticker._timerId);\n\t\t} else {\n\t\t\tclearTimeout(Ticker._timerId);\n\t\t}\n\t\tTicker.removeAllEventListeners(\"tick\");\n\t\tTicker._timerId = Ticker._times = Ticker._tickTimes = null;\n\t\tTicker._startTime = Ticker._lastTime = Ticker._ticks = Ticker._pausedTime = 0;\n\t\tTicker._inited = false;\n\t};\n\n\t/**\n\t * Returns the average time spent within a tick. This can vary significantly from the value provided by getMeasuredFPS\n\t * because it only measures the time spent within the tick execution stack. \n\t * \n\t * Example 1: With a target FPS of 20, getMeasuredFPS() returns 20fps, which indicates an average of 50ms between \n\t * the end of one tick and the end of the next. However, getMeasuredTickTime() returns 15ms. This indicates that \n\t * there may be up to 35ms of \"idle\" time between the end of one tick and the start of the next.\n\t *\n\t * Example 2: With a target FPS of 30, {{#crossLink \"Ticker/framerate:property\"}}{{/crossLink}} returns 10fps, which\n\t * indicates an average of 100ms between the end of one tick and the end of the next. However, {{#crossLink \"Ticker/getMeasuredTickTime\"}}{{/crossLink}}\n\t * returns 20ms. This would indicate that something other than the tick is using ~80ms (another script, DOM\n\t * rendering, etc).\n\t * @method getMeasuredTickTime\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the average time spent in a tick.\n\t * Defaults to the number of ticks per second. To get only the last tick's time, pass in 1.\n\t * @return {Number} The average time spent in a tick in milliseconds.\n\t **/\n\tTicker.getMeasuredTickTime = function(ticks) {\n\t\tvar ttl=0, times=Ticker._tickTimes;\n\t\tif (!times || times.length < 1) { return -1; }\n\n\t\t// by default, calculate average for the past ~1 second:\n\t\tticks = Math.min(times.length, ticks||(Ticker._getFPS()|0));\n\t\tfor (var i=0; i<ticks; i++) { ttl += times[i]; }\n\t\treturn ttl/ticks;\n\t};\n\n\t/**\n\t * Returns the actual frames / ticks per second.\n\t * @method getMeasuredFPS\n\t * @static\n\t * @param {Number} [ticks] The number of previous ticks over which to measure the actual frames / ticks per second.\n\t * Defaults to the number of ticks per second.\n\t * @return {Number} The actual frames / ticks per second. Depending on performance, this may differ\n\t * from the target frames per second.\n\t **/\n\tTicker.getMeasuredFPS = function(ticks) {\n\t\tvar times = Ticker._times;\n\t\tif (!times || times.length < 2) { return -1; }\n\n\t\t// by default, calculate fps for the past ~1 second:\n\t\tticks = Math.min(times.length-1, ticks||(Ticker._getFPS()|0));\n\t\treturn 1000/((times[0]-times[ticks])/ticks);\n\t};\n\n\t/**\n\t * Returns the number of milliseconds that have elapsed since Ticker was initialized via {{#crossLink \"Ticker/init\"}}.\n\t * Returns -1 if Ticker has not been initialized. For example, you could use\n\t * this in a time synchronized animation to determine the exact amount of time that has elapsed.\n\t * @method getTime\n\t * @static\n\t * @param {Boolean} [runTime=false] If true only time elapsed while Ticker was not paused will be returned.\n\t * If false, the value returned will be total time elapsed since the first tick event listener was added.\n\t * @return {Number} Number of milliseconds that have elapsed since Ticker was initialized or -1.\n\t **/\n\tTicker.getTime = function(runTime) {\n\t\treturn Ticker._startTime ? Ticker._getTime() - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\n\t/**\n\t * Similar to the {{#crossLink \"Ticker/getTime\"}}{{/crossLink}} method, but returns the time on the most recent {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event object.\n\t * @method getEventTime\n\t * @static\n\t * @param runTime {Boolean} [runTime=false] If true, the runTime property will be returned instead of time.\n\t * @returns {number} The time or runTime property from the most recent tick event or -1.\n\t */\n\tTicker.getEventTime = function(runTime) {\n\t\treturn Ticker._startTime ? (Ticker._lastTime || Ticker._startTime) - (runTime ? Ticker._pausedTime : 0) : -1;\n\t};\n\t\n\t/**\n\t * Returns the number of ticks that have been broadcast by Ticker.\n\t * @method getTicks\n\t * @static\n\t * @param {Boolean} pauseable Indicates whether to include ticks that would have been broadcast\n\t * while Ticker was paused. If true only tick events broadcast while Ticker is not paused will be returned.\n\t * If false, tick events that would have been broadcast while Ticker was paused will be included in the return\n\t * value. The default value is false.\n\t * @return {Number} of ticks that have been broadcast.\n\t **/\n\tTicker.getTicks = function(pauseable) {\n\t\treturn  Ticker._ticks - (pauseable ? Ticker._pausedTicks : 0);\n\t};\n\n\n// private static methods:\n\t/**\n\t * @method _handleSynch\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleSynch = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\n\t\t// run if enough time has elapsed, with a little bit of flexibility to be early:\n\t\tif (Ticker._getTime() - Ticker._lastTime >= (Ticker._interval-1)*0.97) {\n\t\t\tTicker._tick();\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleRAF\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleRAF = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _handleTimeout\n\t * @static\n\t * @private\n\t **/\n\tTicker._handleTimeout = function() {\n\t\tTicker._timerId = null;\n\t\tTicker._setupTick();\n\t\tTicker._tick();\n\t};\n\n\t/**\n\t * @method _setupTick\n\t * @static\n\t * @private\n\t **/\n\tTicker._setupTick = function() {\n\t\tif (Ticker._timerId != null) { return; } // avoid duplicates\n\n\t\tvar mode = Ticker.timingMode;\n\t\tif (mode == Ticker.RAF_SYNCHED || mode == Ticker.RAF) {\n\t\t\tvar f = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame;\n\t\t\tif (f) {\n\t\t\t\tTicker._timerId = f(mode == Ticker.RAF ? Ticker._handleRAF : Ticker._handleSynch);\n\t\t\t\tTicker._raf = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tTicker._raf = false;\n\t\tTicker._timerId = setTimeout(Ticker._handleTimeout, Ticker._interval);\n\t};\n\n\t/**\n\t * @method _tick\n\t * @static\n\t * @private\n\t **/\n\tTicker._tick = function() {\n\t\tvar paused = Ticker.paused;\n\t\tvar time = Ticker._getTime();\n\t\tvar elapsedTime = time-Ticker._lastTime;\n\t\tTicker._lastTime = time;\n\t\tTicker._ticks++;\n\t\t\n\t\tif (paused) {\n\t\t\tTicker._pausedTicks++;\n\t\t\tTicker._pausedTime += elapsedTime;\n\t\t}\n\t\t\n\t\tif (Ticker.hasEventListener(\"tick\")) {\n\t\t\tvar event = new createjs.Event(\"tick\");\n\t\t\tvar maxDelta = Ticker.maxDelta;\n\t\t\tevent.delta = (maxDelta && elapsedTime > maxDelta) ? maxDelta : elapsedTime;\n\t\t\tevent.paused = paused;\n\t\t\tevent.time = time;\n\t\t\tevent.runTime = time-Ticker._pausedTime;\n\t\t\tTicker.dispatchEvent(event);\n\t\t}\n\t\t\n\t\tTicker._tickTimes.unshift(Ticker._getTime()-time);\n\t\twhile (Ticker._tickTimes.length > 100) { Ticker._tickTimes.pop(); }\n\n\t\tTicker._times.unshift(time);\n\t\twhile (Ticker._times.length > 100) { Ticker._times.pop(); }\n\t};\n\n\t/**\n\t * @method _getTime\n\t * @static\n\t * @private\n\t **/\n\tvar w=window, now=w.performance.now || w.performance.mozNow || w.performance.msNow || w.performance.oNow || w.performance.webkitNow;\n\tTicker._getTime = function() {\n\t\treturn ((now&&now.call(w.performance))||(new Date().getTime())) - Ticker._startTime;\n\t};\n\n\n\tcreatejs.Ticker = Ticker;\n}());\n\n//##############################################################################\n// VideoBuffer.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * When an HTML video seeks, including when looping, there is an indeterminate period before a new frame is available.\n\t * This can result in the video blinking or flashing when it is drawn to a canvas. The VideoBuffer class resolves\n\t * this issue by drawing each frame to an off-screen canvas and preserving the prior frame during a seek.\n\t * \n\t * \tvar myBuffer = new createjs.VideoBuffer(myVideo);\n\t * \tvar myBitmap = new Bitmap(myBuffer);\n\t * \n\t * @class VideoBuffer\n\t * @param {HTMLVideoElement} video The HTML video element to buffer.\n\t * @constructor\n\t **/\n\tfunction VideoBuffer(video) {\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * Used by Bitmap to determine when the video buffer is ready to be drawn. Not intended for general use.\n\t\t * @property readyState\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.readyState = video.readyState;\n\t\t\n\t\t/**\n\t\t * @property _video\n\t\t * @protected\n\t\t * @type {HTMLVideoElement}\n\t\t * @default 0\n\t\t **/\n\t\tthis._video = video;\n\t\t\n\t\t/**\n\t\t * @property _canvas\n\t\t * @protected\n\t\t * @type {HTMLCanvasElement}\n\t\t * @default 0\n\t\t **/\n\t\tthis._canvas = null;\n\t\t\n\t\t/**\n\t\t * @property _lastTime\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t **/\n\t\tthis._lastTime = -1;\n\t\t\n\t\tif (this.readyState < 2) { video.addEventListener(\"canplaythrough\", this._videoReady.bind(this)); } //once:true isn't supported everywhere, but its a non-critical optimization here.\n\t}\n\tvar p = VideoBuffer.prototype;\n\t\n\t\n// public methods:\n\t/**\n\t * Gets an HTML canvas element showing the current video frame, or the previous frame if in a seek / loop.\n\t * Primarily for use by {{#crossLink \"Bitmap\"}}{{/crossLink}}.\n\t * @method getImage\n\t **/\n\tp.getImage = function() {\n\t\tif (this.readyState < 2) { return; }\n\t\tvar canvas=this._canvas, video = this._video;\n\t\tif (!canvas) {\n\t\t\tcanvas = this._canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\tcanvas.width = video.videoWidth;\n\t\t\tcanvas.height = video.videoHeight;\n\t\t}\n\t\tif (video.readyState >= 2 && video.currentTime !== this._lastTime) {\n\t\t\tvar ctx = canvas.getContext(\"2d\");\n\t\t\tctx.clearRect(0,0,canvas.width,canvas.height);\n\t\t\tctx.drawImage(video,0,0,canvas.width,canvas.height);\n\t\t\tthis._lastTime = video.currentTime;\n\t\t}\n\t\treturn canvas;\n\t};\n\t\n// private methods:\n\t/**\n\t * @method _videoReady\n\t * @protected\n\t **/\n\tp._videoReady = function() {\n\t\tthis.readyState = 2;\n\t};\n\n\n\tcreatejs.VideoBuffer = VideoBuffer;\n}());\n\n//##############################################################################\n// MouseEvent.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Passed as the parameter to all mouse/pointer/touch related events. For a listing of mouse events and their properties,\n\t * see the {{#crossLink \"DisplayObject\"}}{{/crossLink}} and {{#crossLink \"Stage\"}}{{/crossLink}} event listings.\n\t * @class MouseEvent\n\t * @param {String} type The event type.\n\t * @param {Boolean} bubbles Indicates whether the event will bubble through the display list.\n\t * @param {Boolean} cancelable Indicates whether the default behaviour of this event can be cancelled.\n\t * @param {Number} stageX The normalized x position relative to the stage.\n\t * @param {Number} stageY The normalized y position relative to the stage.\n\t * @param {MouseEvent} nativeEvent The native DOM event related to this mouse event.\n\t * @param {Number} pointerID The unique id for the pointer.\n\t * @param {Boolean} primary Indicates whether this is the primary pointer in a multitouch environment.\n\t * @param {Number} rawX The raw x position relative to the stage.\n\t * @param {Number} rawY The raw y position relative to the stage.\n\t * @param {DisplayObject} relatedTarget The secondary target for the event.\n\t * @extends Event\n\t * @constructor\n\t **/\n\tfunction MouseEvent(type, bubbles, cancelable, stageX, stageY, nativeEvent, pointerID, primary, rawX, rawY, relatedTarget) {\n\t\tthis.Event_constructor(type, bubbles, cancelable);\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The normalized x position on the stage. This will always be within the range 0 to stage width.\n\t\t * @property stageX\n\t\t * @type Number\n\t\t*/\n\t\tthis.stageX = stageX;\n\t\n\t\t/**\n\t\t * The normalized y position on the stage. This will always be within the range 0 to stage height.\n\t\t * @property stageY\n\t\t * @type Number\n\t\t **/\n\t\tthis.stageY = stageY;\n\t\n\t\t/**\n\t\t * The raw x position relative to the stage. Normally this will be the same as the stageX value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawX\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawX = (rawX==null)?stageX:rawX;\n\t\n\t\t/**\n\t\t * The raw y position relative to the stage. Normally this will be the same as the stageY value, unless\n\t\t * stage.mouseMoveOutside is true and the pointer is outside of the stage bounds.\n\t\t * @property rawY\n\t\t * @type Number\n\t\t*/\n\t\tthis.rawY = (rawY==null)?stageY:rawY;\n\t\n\t\t/**\n\t\t * The native MouseEvent generated by the browser. The properties and API for this\n\t\t * event may differ between browsers. This property will be null if the\n\t\t * EaselJS property was not directly generated from a native MouseEvent.\n\t\t * @property nativeEvent\n\t\t * @type HtmlMouseEvent\n\t\t * @default null\n\t\t **/\n\t\tthis.nativeEvent = nativeEvent;\n\t\n\t\t/**\n\t\t * The unique id for the pointer (touch point or cursor). This will be either -1 for the mouse, or the system\n\t\t * supplied id value.\n\t\t * @property pointerID\n\t\t * @type {Number}\n\t\t */\n\t\tthis.pointerID = pointerID;\n\t\n\t\t/**\n\t\t * Indicates whether this is the primary pointer in a multitouch environment. This will always be true for the mouse.\n\t\t * For touch pointers, the first pointer in the current stack will be considered the primary pointer.\n\t\t * @property primary\n\t\t * @type {Boolean}\n\t\t */\n\t\tthis.primary = !!primary;\n\t\t\n\t\t/**\n\t\t * The secondary target for the event, if applicable. This is used for mouseout/rollout\n\t\t * events to indicate the object that the mouse entered from, mouseover/rollover for the object the mouse exited,\n\t\t * and stagemousedown/stagemouseup events for the object that was the under the cursor, if any.\n\t\t * \n\t\t * Only valid interaction targets will be returned (ie. objects with mouse listeners or a cursor set).\n\t\t * @property relatedTarget\n\t\t * @type {DisplayObject}\n\t\t */\n\t\tthis.relatedTarget = relatedTarget;\n\t}\n\tvar p = createjs.extend(MouseEvent, createjs.Event);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\t\n\t\n// getter / setters:\n\t/**\n\t * Returns the x position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localX\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localX = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).x;\n\t};\n\t\n\t/**\n\t * Returns the y position of the mouse in the local coordinate system of the current target (ie. the dispatcher).\n\t * @property localY\n\t * @type {Number}\n\t * @readonly\n\t */\n\tp._get_localY = function() {\n\t\treturn this.currentTarget.globalToLocal(this.rawX, this.rawY).y;\n\t};\n\t\n\t/**\n\t * Indicates whether the event was generated by a touch input (versus a mouse input).\n\t * @property isTouch\n\t * @type {Boolean}\n\t * @readonly\n\t */\n\tp._get_isTouch = function() {\n\t\treturn this.pointerID !== -1;\n\t};\n\t\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlocalX: { get: p._get_localX },\n\t\t\tlocalY: { get: p._get_localY },\n\t\t\tisTouch: { get: p._get_isTouch }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a clone of the MouseEvent instance.\n\t * @method clone\n\t * @return {MouseEvent} a clone of the MouseEvent instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new MouseEvent(this.type, this.bubbles, this.cancelable, this.stageX, this.stageY, this.nativeEvent, this.pointerID, this.primary, this.rawX, this.rawY);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\";\n\t};\n\n\n\tcreatejs.MouseEvent = createjs.promote(MouseEvent, \"Event\");\n}());\n\n//##############################################################################\n// Matrix2D.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents an affine transformation matrix, and provides tools for constructing and concatenating matrices.\n\t *\n\t * This matrix can be visualized as:\n\t *\n\t * \t[ a  c  tx\n\t * \t  b  d  ty\n\t * \t  0  0  1  ]\n\t *\n\t * Note the locations of b and c.\n\t *\n\t * @class Matrix2D\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @constructor\n\t **/\n\tfunction Matrix2D(a, b, c, d, tx, ty) {\n\t\tthis.setValues(a,b,c,d,tx,ty);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Position (0, 0) in a 3x3 affine transformation matrix.\n\t\t * @property a\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (0, 1) in a 3x3 affine transformation matrix.\n\t\t * @property b\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 0) in a 3x3 affine transformation matrix.\n\t\t * @property c\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (1, 1) in a 3x3 affine transformation matrix.\n\t\t * @property d\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 0) in a 3x3 affine transformation matrix.\n\t\t * @property tx\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Position (2, 1) in a 3x3 affine transformation matrix.\n\t\t * @property ty\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Matrix2D.prototype;\n\n// constants:\n\t/**\n\t * Multiplier for converting degrees to radians. Used internally by Matrix2D.\n\t * @property DEG_TO_RAD\n\t * @static\n\t * @final\n\t * @type Number\n\t * @readonly\n\t **/\n\tMatrix2D.DEG_TO_RAD = Math.PI/180;\n\n\n// static public properties:\n\t/**\n\t * An identity matrix, representing a null transformation.\n\t * @property identity\n\t * @static\n\t * @type Matrix2D\n\t * @readonly\n\t **/\n\tMatrix2D.identity = null; // set at bottom of class definition.\n\t\n\n// public methods:\n\t/**\n\t * Sets the specified values on this instance. \n\t * @method setValues\n\t * @param {Number} [a=1] Specifies the a property for the new matrix.\n\t * @param {Number} [b=0] Specifies the b property for the new matrix.\n\t * @param {Number} [c=0] Specifies the c property for the new matrix.\n\t * @param {Number} [d=1] Specifies the d property for the new matrix.\n\t * @param {Number} [tx=0] Specifies the tx property for the new matrix.\n\t * @param {Number} [ty=0] Specifies the ty property for the new matrix.\n\t * @return {Matrix2D} This instance. Useful for chaining method calls.\n\t*/\n\tp.setValues = function(a, b, c, d, tx, ty) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.a = (a == null) ? 1 : a;\n\t\tthis.b = b || 0;\n\t\tthis.c = c || 0;\n\t\tthis.d = (d == null) ? 1 : d;\n\t\tthis.tx = tx || 0;\n\t\tthis.ty = ty || 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix properties to this matrix. All parameters are required.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method append\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.append = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tif (a != 1 || b != 0 || c != 0 || d != 1) {\n\t\t\tthis.a  = a1*a+c1*b;\n\t\t\tthis.b  = b1*a+d1*b;\n\t\t\tthis.c  = a1*c+c1*d;\n\t\t\tthis.d  = b1*c+d1*d;\n\t\t}\n\t\tthis.tx = a1*tx+c1*ty+this.tx;\n\t\tthis.ty = b1*tx+d1*ty+this.ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Prepends the specified matrix properties to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * All parameters are required.\n\t * @method prepend\n\t * @param {Number} a\n\t * @param {Number} b\n\t * @param {Number} c\n\t * @param {Number} d\n\t * @param {Number} tx\n\t * @param {Number} ty\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prepend = function(a, b, c, d, tx, ty) {\n\t\tvar a1 = this.a;\n\t\tvar c1 = this.c;\n\t\tvar tx1 = this.tx;\n\n\t\tthis.a  = a*a1+c*this.b;\n\t\tthis.b  = b*a1+d*this.b;\n\t\tthis.c  = a*c1+c*this.d;\n\t\tthis.d  = b*c1+d*this.d;\n\t\tthis.tx = a*tx1+c*this.ty+tx;\n\t\tthis.ty = b*tx1+d*this.ty+ty;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Appends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(this matrix) * (specified matrix)`.\n\t * @method appendMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendMatrix = function(matrix) {\n\t\treturn this.append(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Prepends the specified matrix to this matrix.\n\t * This is the equivalent of multiplying `(specified matrix) * (this matrix)`.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = o.getMatrix();\n\t * \twhile (o = o.parent) {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\to.prependMatrix(o.getMatrix());\n\t * \t}\n\t * @method prependMatrix\n\t * @param {Matrix2D} matrix\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependMatrix = function(matrix) {\n\t\treturn this.prepend(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and appends them to this matrix.\n\t * For example, you can use this to generate a matrix representing the transformations of a display object:\n\t * \n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tmtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation);\n\t * @method appendTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.appendTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single append operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t} else {\n\t\t\tthis.append(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\t\n\t\tif (regX || regY) {\n\t\t\t// append the registration offset:\n\t\t\tthis.tx -= regX*this.a+regY*this.c; \n\t\t\tthis.ty -= regX*this.b+regY*this.d;\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Generates matrix properties from the specified display object transform properties, and prepends them to this matrix.\n\t * For example, you could calculate the combined transformation for a child object using:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar mtx = new createjs.Matrix2D();\n\t * \tdo  {\n\t * \t\t// prepend each parent's transformation in turn:\n\t * \t\tmtx.prependTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\n\t * \t} while (o = o.parent);\n\t * \t\n\t * \tNote that the above example would not account for {{#crossLink \"DisplayObject/transformMatrix:property\"}}{{/crossLink}}\n\t * \tvalues. See {{#crossLink \"Matrix2D/prependMatrix\"}}{{/crossLink}} for an example that does.\n\t * @method prependTransform\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} scaleX\n\t * @param {Number} scaleY\n\t * @param {Number} rotation\n\t * @param {Number} skewX\n\t * @param {Number} skewY\n\t * @param {Number} regX Optional.\n\t * @param {Number} regY Optional.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.prependTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\n\t\tif (rotation%360) {\n\t\t\tvar r = rotation*Matrix2D.DEG_TO_RAD;\n\t\t\tvar cos = Math.cos(r);\n\t\t\tvar sin = Math.sin(r);\n\t\t} else {\n\t\t\tcos = 1;\n\t\t\tsin = 0;\n\t\t}\n\n\t\tif (regX || regY) {\n\t\t\t// prepend the registration offset:\n\t\t\tthis.tx -= regX; this.ty -= regY;\n\t\t}\n\t\tif (skewX || skewY) {\n\t\t\t// TODO: can this be combined into a single prepend operation?\n\t\t\tskewX *= Matrix2D.DEG_TO_RAD;\n\t\t\tskewY *= Matrix2D.DEG_TO_RAD;\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, 0, 0);\n\t\t\tthis.prepend(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), x, y);\n\t\t} else {\n\t\t\tthis.prepend(cos*scaleX, sin*scaleX, -sin*scaleY, cos*scaleY, x, y);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a clockwise rotation transformation to the matrix.\n\t * @method rotate\n\t * @param {Number} angle The angle to rotate by, in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.rotate = function(angle) {\n\t\tangle = angle*Matrix2D.DEG_TO_RAD;\n\t\tvar cos = Math.cos(angle);\n\t\tvar sin = Math.sin(angle);\n\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\n\t\tthis.a = a1*cos+this.c*sin;\n\t\tthis.b = b1*cos+this.d*sin;\n\t\tthis.c = -a1*sin+this.c*cos;\n\t\tthis.d = -b1*sin+this.d*cos;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a skew transformation to the matrix.\n\t * @method skew\n\t * @param {Number} skewX The amount to skew horizontally in degrees. To use a value in radians, multiply it by `180/Math.PI`.\n\t * @param {Number} skewY The amount to skew vertically in degrees.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.skew = function(skewX, skewY) {\n\t\tskewX = skewX*Matrix2D.DEG_TO_RAD;\n\t\tskewY = skewY*Matrix2D.DEG_TO_RAD;\n\t\tthis.append(Math.cos(skewY), Math.sin(skewY), -Math.sin(skewX), Math.cos(skewX), 0, 0);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Applies a scale transformation to the matrix.\n\t * @method scale\n\t * @param {Number} x The amount to scale horizontally. E.G. a value of 2 will double the size in the X direction, and 0.5 will halve it.\n\t * @param {Number} y The amount to scale vertically.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.scale = function(x, y) {\n\t\tthis.a *= x;\n\t\tthis.b *= x;\n\t\tthis.c *= y;\n\t\tthis.d *= y;\n\t\t//this.tx *= x;\n\t\t//this.ty *= y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Translates the matrix on the x and y axes.\n\t * @method translate\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.translate = function(x, y) {\n\t\tthis.tx += this.a*x + this.c*y;\n\t\tthis.ty += this.b*x + this.d*y;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Sets the properties of the matrix to those of an identity matrix (one that applies a null transformation).\n\t * @method identity\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.identity = function() {\n\t\tthis.a = this.d = 1;\n\t\tthis.b = this.c = this.tx = this.ty = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Inverts the matrix, causing it to perform the opposite transformation.\n\t * @method invert\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t **/\n\tp.invert = function() {\n\t\tvar a1 = this.a;\n\t\tvar b1 = this.b;\n\t\tvar c1 = this.c;\n\t\tvar d1 = this.d;\n\t\tvar tx1 = this.tx;\n\t\tvar n = a1*d1-b1*c1;\n\n\t\tthis.a = d1/n;\n\t\tthis.b = -b1/n;\n\t\tthis.c = -c1/n;\n\t\tthis.d = a1/n;\n\t\tthis.tx = (c1*this.ty-d1*tx1)/n;\n\t\tthis.ty = -(a1*this.ty-b1*tx1)/n;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns true if the matrix is an identity matrix.\n\t * @method isIdentity\n\t * @return {Boolean}\n\t **/\n\tp.isIdentity = function() {\n\t\treturn this.tx === 0 && this.ty === 0 && this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1;\n\t};\n\t\n\t/**\n\t * Returns true if this matrix is equal to the specified matrix (all property values are equal).\n\t * @method equals\n\t * @param {Matrix2D} matrix The matrix to compare.\n\t * @return {Boolean}\n\t **/\n\tp.equals = function(matrix) {\n\t\treturn this.tx === matrix.tx && this.ty === matrix.ty && this.a === matrix.a && this.b === matrix.b && this.c === matrix.c && this.d === matrix.d;\n\t};\n\n\t/**\n\t * Transforms a point according to this matrix.\n\t * @method transformPoint\n\t * @param {Number} x The x component of the point to transform.\n\t * @param {Number} y The y component of the point to transform.\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a generic object with x/y properties will be returned.\n\t * @return {Point} This matrix. Useful for chaining method calls.\n\t **/\n\tp.transformPoint = function(x, y, pt) {\n\t\tpt = pt||{};\n\t\tpt.x = x*this.a+y*this.c+this.tx;\n\t\tpt.y = x*this.b+y*this.d+this.ty;\n\t\treturn pt;\n\t};\n\n\t/**\n\t * Decomposes the matrix into transform properties (x, y, scaleX, scaleY, and rotation). Note that these values\n\t * may not match the transform properties you used to generate the matrix, though they will produce the same visual\n\t * results.\n\t * @method decompose\n\t * @param {Object} target The object to apply the transform properties to. If null, then a new object will be returned.\n\t * @return {Object} The target, or a new generic object with the transform properties applied.\n\t*/\n\tp.decompose = function(target) {\n\t\t// TODO: it would be nice to be able to solve for whether the matrix can be decomposed into only scale/rotation even when scale is negative\n\t\tif (target == null) { target = {}; }\n\t\ttarget.x = this.tx;\n\t\ttarget.y = this.ty;\n\t\ttarget.scaleX = Math.sqrt(this.a * this.a + this.b * this.b);\n\t\ttarget.scaleY = Math.sqrt(this.c * this.c + this.d * this.d);\n\n\t\tvar skewX = Math.atan2(-this.c, this.d);\n\t\tvar skewY = Math.atan2(this.b, this.a);\n\n\t\tvar delta = Math.abs(1-skewX/skewY);\n\t\tif (delta < 0.00001) { // effectively identical, can use rotation:\n\t\t\ttarget.rotation = skewY/Matrix2D.DEG_TO_RAD;\n\t\t\tif (this.a < 0 && this.d >= 0) {\n\t\t\t\ttarget.rotation += (target.rotation <= 0) ? 180 : -180;\n\t\t\t}\n\t\t\ttarget.skewX = target.skewY = 0;\n\t\t} else {\n\t\t\ttarget.skewX = skewX/Matrix2D.DEG_TO_RAD;\n\t\t\ttarget.skewY = skewY/Matrix2D.DEG_TO_RAD;\n\t\t}\n\t\treturn target;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified matrix to this matrix.\n\t * @method copy\n\t * @param {Matrix2D} matrix The matrix to copy properties from.\n\t * @return {Matrix2D} This matrix. Useful for chaining method calls.\n\t*/\n\tp.copy = function(matrix) {\n\t\treturn this.setValues(matrix.a, matrix.b, matrix.c, matrix.d, matrix.tx, matrix.ty);\n\t};\n\n\t/**\n\t * Returns a clone of the Matrix2D instance.\n\t * @method clone\n\t * @return {Matrix2D} a clone of the Matrix2D instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Matrix2D(this.a, this.b, this.c, this.d, this.tx, this.ty);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\";\n\t};\n\n\t// this has to be populated after the class is defined:\n\tMatrix2D.identity = new Matrix2D();\n\n\n\tcreatejs.Matrix2D = Matrix2D;\n}());\n\n//##############################################################################\n// DisplayProps.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Used for calculating and encapsulating display related properties.\n\t * @class DisplayProps\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to a new identity matrix.\n\t * @constructor\n\t **/\n\tfunction DisplayProps(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.setValues(visible, alpha, shadow, compositeOperation, matrix);\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * Property representing the alpha that will be applied to a display object.\n\t\t * @property alpha\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the shadow that will be applied to a display object.\n\t\t * @property shadow\n\t\t * @type Shadow\n\t\t **/\n\t\n\t\t/**\n\t\t * Property representing the compositeOperation that will be applied to a display object.\n\t\t * You can find a list of valid composite operations at:\n\t\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing\">https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Compositing</a>\n\t\t * @property compositeOperation\n\t\t * @type String\n\t\t **/\n\t\t\n\t\t/**\n\t\t * Property representing the value for visible that will be applied to a display object.\n\t\t * @property visible\n\t\t * @type Boolean\n\t\t **/\n\t\t\n\t\t/**\n\t\t * The transformation matrix that will be applied to a display object.\n\t\t * @property matrix\n\t\t * @type Matrix2D\n\t\t **/\n\t}\n\tvar p = DisplayProps.prototype;\n\n// initialization:\n\t/**\n\t * Reinitializes the instance with the specified values.\n\t * @method setValues\n\t * @param {Number} [visible=true] Visible value.\n\t * @param {Number} [alpha=1] Alpha value.\n\t * @param {Number} [shadow=null] A Shadow instance or null.\n\t * @param {Number} [compositeOperation=null] A compositeOperation value or null.\n\t * @param {Number} [matrix] A transformation matrix. Defaults to an identity matrix.\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function (visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.visible = visible == null ? true : !!visible;\n\t\tthis.alpha = alpha == null ? 1 : alpha;\n\t\tthis.shadow = shadow;\n\t\tthis.compositeOperation = compositeOperation;\n\t\tthis.matrix = matrix || (this.matrix&&this.matrix.identity()) || new createjs.Matrix2D();\n\t\treturn this;\n\t};\n\n// public methods:\n\t/**\n\t * Appends the specified display properties. This is generally used to apply a child's properties its parent's.\n\t * @method append\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.append = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = shadow || this.shadow;\n\t\tthis.compositeOperation = compositeOperation || this.compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.appendMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Prepends the specified display properties. This is generally used to apply a parent's properties to a child's.\n\t * For example, to get the combined display properties that would be applied to a child, you could use:\n\t * \n\t * \tvar o = myDisplayObject;\n\t * \tvar props = new createjs.DisplayProps();\n\t * \tdo {\n\t * \t\t// prepend each parent's props in turn:\n\t * \t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation, o.getMatrix());\n\t * \t} while (o = o.parent);\n\t * \t\n\t * @method prepend\n\t * @param {Boolean} visible desired visible value\n\t * @param {Number} alpha desired alpha value\n\t * @param {Shadow} shadow desired shadow value\n\t * @param {String} compositeOperation desired composite operation value\n\t * @param {Matrix2D} [matrix] a Matrix2D instance\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.prepend = function(visible, alpha, shadow, compositeOperation, matrix) {\n\t\tthis.alpha *= alpha;\n\t\tthis.shadow = this.shadow || shadow;\n\t\tthis.compositeOperation = this.compositeOperation || compositeOperation;\n\t\tthis.visible = this.visible && visible;\n\t\tmatrix&&this.matrix.prependMatrix(matrix);\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Resets this instance and its matrix to default values.\n\t * @method identity\n\t * @return {DisplayProps} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.identity = function() {\n\t\tthis.visible = true;\n\t\tthis.alpha = 1;\n\t\tthis.shadow = this.compositeOperation = null;\n\t\tthis.matrix.identity();\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the DisplayProps instance. Clones the associated matrix.\n\t * @method clone\n\t * @return {DisplayProps} a clone of the DisplayProps instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new DisplayProps(this.alpha, this.shadow, this.compositeOperation, this.visible, this.matrix.clone());\n\t};\n\n// private methods:\n\n\tcreatejs.DisplayProps = DisplayProps;\n})();\n\n//##############################################################################\n// Point.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a point on a 2 dimensional x / y coordinate system.\n\t *\n\t * <h4>Example</h4>\n\t * \n\t *      var point = new createjs.Point(0, 100);\n\t * \n\t * @class Point\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @constructor\n\t **/\n\tfunction Point(x, y) {\n\t \tthis.setValues(x, y);\n\t \t\n\t \t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Point.prototype;\n\t\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @return {Point} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y) {\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified point to this point.\n\t * @method copy\n\t * @param {Point} point The point to copy properties from.\n\t * @return {Point} This point. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(point) {\n\t\tthis.x = point.x;\n\t\tthis.y = point.y;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Point instance.\n\t * @method clone\n\t * @return {Point} a clone of the Point instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Point(this.x, this.y);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Point (x=\"+this.x+\" y=\"+this.y+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Point = Point;\n}());\n\n//##############################################################################\n// Rectangle.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Represents a rectangle as defined by the points (x, y) and (x+width, y+height).\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var rect = new createjs.Rectangle(0, 0, 100, 100);\n\t *\n\t * @class Rectangle\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @constructor\n\t **/\n\tfunction Rectangle(x, y, width, height) {\n\t\tthis.setValues(x, y, width, height);\n\t\t\n\t\t\n\t// public properties:\n\t\t// assigned in the setValues method.\n\t\t/**\n\t\t * X position.\n\t\t * @property x\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Y position.\n\t\t * @property y\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Width.\n\t\t * @property width\n\t\t * @type Number\n\t\t **/\n\t\n\t\t/**\n\t\t * Height.\n\t\t * @property height\n\t\t * @type Number\n\t\t **/\n\t}\n\tvar p = Rectangle.prototype;\n\n// public methods:\n\t/** \n\t * Sets the specified values on this instance.\n\t * @method setValues\n\t * @param {Number} [x=0] X position.\n\t * @param {Number} [y=0] Y position.\n\t * @param {Number} [width=0] The width of the Rectangle.\n\t * @param {Number} [height=0] The height of the Rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.setValues = function(x, y, width, height) {\n\t\t// don't forget to update docs in the constructor if these change:\n\t\tthis.x = x||0;\n\t\tthis.y = y||0;\n\t\tthis.width = width||0;\n\t\tthis.height = height||0;\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Extends the rectangle's bounds to include the described point or rectangle.\n\t * @method extend\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.extend = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\tif (x+width > this.x+this.width) { this.width = x+width-this.x; }\n\t\tif (y+height > this.y+this.height) { this.height = y+height-this.y; }\n\t\tif (x < this.x) { this.width += this.x-x; this.x = x; }\n\t\tif (y < this.y) { this.height += this.y-y; this.y = y; }\n\t\treturn this;\n\t};\n\t\n\t/** \n\t * Adds the specified padding to the rectangle's bounds.\n\t * @method pad\n\t * @param {Number} top\n\t * @param {Number} left\n\t * @param {Number} bottom\n\t * @param {Number} right\n\t * @return {Rectangle} This instance. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.pad = function(top, left, bottom, right) {\n\t\tthis.x -= left;\n\t\tthis.y -= top;\n\t\tthis.width += left+right;\n\t\tthis.height += top+bottom;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Copies all properties from the specified rectangle to this rectangle.\n\t * @method copy\n\t * @param {Rectangle} rectangle The rectangle to copy properties from.\n\t * @return {Rectangle} This rectangle. Useful for chaining method calls.\n\t * @chainable\n\t*/\n\tp.copy = function(rectangle) {\n\t\treturn this.setValues(rectangle.x, rectangle.y, rectangle.width, rectangle.height);\n\t};\n\t\n\t/** \n\t * Returns true if this rectangle fully encloses the described point or rectangle.\n\t * @method contains\n\t * @param {Number} x X position of the point or rectangle.\n\t * @param {Number} y Y position of the point or rectangle.\n\t * @param {Number} [width=0] The width of the rectangle.\n\t * @param {Number} [height=0] The height of the rectangle.\n\t * @return {Boolean} True if the described point or rectangle is contained within this rectangle.\n\t*/\n\tp.contains = function(x, y, width, height) {\n\t\twidth = width||0;\n\t\theight = height||0;\n\t\treturn (x >= this.x && x+width <= this.x+this.width && y >= this.y && y+height <= this.y+this.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which contains this rectangle and the specified rectangle.\n\t * @method union\n\t * @param {Rectangle} rect The rectangle to calculate a union with.\n\t * @return {Rectangle} A new rectangle describing the union.\n\t*/\n\tp.union = function(rect) {\n\t\treturn this.clone().extend(rect.x, rect.y, rect.width, rect.height);\n\t};\n\t\n\t/** \n\t * Returns a new rectangle which describes the intersection (overlap) of this rectangle and the specified rectangle,\n\t * or null if they do not intersect.\n\t * @method intersection\n\t * @param {Rectangle} rect The rectangle to calculate an intersection with.\n\t * @return {Rectangle} A new rectangle describing the intersection or null.\n\t*/\n\tp.intersection = function(rect) {\n\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1+rect.width, y2 = y1+rect.height;\n\t\tif (this.x > x1) { x1 = this.x; }\n\t\tif (this.y > y1) { y1 = this.y; }\n\t\tif (this.x + this.width < x2) { x2 = this.x + this.width; }\n\t\tif (this.y + this.height < y2) { y2 = this.y + this.height; }\n\t\treturn (x2 <= x1 || y2 <= y1) ? null : new Rectangle(x1, y1, x2-x1, y2-y1);\n\t};\n\t\n\t/** \n\t * Returns true if the specified rectangle intersects (has any overlap) with this rectangle.\n\t * @method intersects\n\t * @param {Rectangle} rect The rectangle to compare.\n\t * @return {Boolean} True if the rectangles intersect.\n\t*/\n\tp.intersects = function(rect) {\n\t\treturn (rect.x <= this.x+this.width && this.x <= rect.x+rect.width && rect.y <= this.y+this.height && this.y <= rect.y + rect.height);\n\t};\n\t\n\t/** \n\t * Returns true if the width or height are equal or less than 0.\n\t * @method isEmpty\n\t * @return {Boolean} True if the rectangle is empty.\n\t*/\n\tp.isEmpty = function() {\n\t\treturn this.width <= 0 || this.height <= 0;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Rectangle instance.\n\t * @method clone\n\t * @return {Rectangle} a clone of the Rectangle instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Rectangle(this.x, this.y, this.width, this.height);\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\";\n\t};\n\t\n\t\n\tcreatejs.Rectangle = Rectangle;\n}());\n\n//##############################################################################\n// ButtonHelper.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The ButtonHelper is a helper class to create interactive buttons from {{#crossLink \"MovieClip\"}}{{/crossLink}} or\n\t * {{#crossLink \"Sprite\"}}{{/crossLink}} instances. This class will intercept mouse events from an object, and\n\t * automatically call {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}},\n\t * to the respective animation labels, add a pointer cursor, and allows the user to define a hit state frame.\n\t *\n\t * The ButtonHelper instance does not need to be added to the stage, but a reference should be maintained to prevent\n\t * garbage collection.\n\t * \n\t * Note that over states will not work unless you call {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var helper = new createjs.ButtonHelper(myInstance, \"out\", \"over\", \"down\", false, myInstance, \"hit\");\n\t *      myInstance.addEventListener(\"click\", handleClick);\n\t *      function handleClick(event) {\n\t *          // Click Happened.\n\t *      }\n\t *\n\t * @class ButtonHelper\n\t * @param {Sprite|MovieClip} target The instance to manage.\n\t * @param {String} [outLabel=\"out\"] The label or animation to go to when the user rolls out of the button.\n\t * @param {String} [overLabel=\"over\"] The label or animation to go to when the user rolls over the button.\n\t * @param {String} [downLabel=\"down\"] The label or animation to go to when the user presses the button.\n\t * @param {Boolean} [play=false] If the helper should call \"gotoAndPlay\" or \"gotoAndStop\" on the button when changing\n\t * states.\n\t * @param {DisplayObject} [hitArea] An optional item to use as the hit state for the button. If this is not defined,\n\t * then the button's visible states will be used instead. Note that the same instance as the \"target\" argument can be\n\t * used for the hitState.\n\t * @param {String} [hitLabel] The label or animation on the hitArea instance that defines the hitArea bounds. If this is\n\t * null, then the default state of the hitArea will be used. *\n\t * @constructor\n\t */\n\tfunction ButtonHelper(target, outLabel, overLabel, downLabel, play, hitArea, hitLabel) {\n\t\tif (!target.addEventListener) { return; }\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * The target for this button helper.\n\t\t * @property target\n\t\t * @type MovieClip | Sprite\n\t\t * @readonly\n\t\t **/\n\t\tthis.target = target;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses out of the target. Defaults to \"over\".\n\t\t * @property overLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.overLabel = overLabel == null ? \"over\" : overLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user mouses over the target. Defaults to \"out\".\n\t\t * @property outLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.outLabel = outLabel == null ? \"out\" : outLabel;\n\t\n\t\t/**\n\t\t * The label name or frame number to display when the user presses on the target. Defaults to \"down\".\n\t\t * @property downLabel\n\t\t * @type String | Number\n\t\t **/\n\t\tthis.downLabel = downLabel == null ? \"down\" : downLabel;\n\t\n\t\t/**\n\t\t * If true, then ButtonHelper will call gotoAndPlay, if false, it will use gotoAndStop. Default is false.\n\t\t * @property play\n\t\t * @default false\n\t\t * @type Boolean\n\t\t **/\n\t\tthis.play = play;\n\t\t\n\t\t\n\t//  private properties\n\t\t/**\n\t\t * @property _isPressed\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isPressed = false;\n\t\n\t\t/**\n\t\t * @property _isOver\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._isOver = false;\n\t\n\t\t/**\n\t\t * @property _enabled\n\t\t * @type Boolean\n\t\t * @protected\n\t\t **/\n\t\tthis._enabled = false;\n\t\t\n\t// setup:\n\t\ttarget.mouseChildren = false; // prevents issues when children are removed from the display list when state changes.\n\t\tthis.enabled = true;\n\t\tthis.handleEvent({});\n\t\tif (hitArea) {\n\t\t\tif (hitLabel) {\n\t\t\t\thitArea.actionsEnabled = false;\n\t\t\t\thitArea.gotoAndStop&&hitArea.gotoAndStop(hitLabel);\n\t\t\t}\n\t\t\ttarget.hitArea = hitArea;\n\t\t}\n\t}\n\tvar p = ButtonHelper.prototype;\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method setEnabled\n\t * @param {Boolean} value The enabled property to set the instance to.\n\t * @[rptected\n\t * @protected\n\t **/\n\tp._setEnabled = function(value) {\n\t\tif (value == this._enabled) { return; }\n\t\tvar o = this.target;\n\t\tthis._enabled = value;\n\t\tif (value) {\n\t\t\to.cursor = \"pointer\";\n\t\t\to.addEventListener(\"rollover\", this);\n\t\t\to.addEventListener(\"rollout\", this);\n\t\t\to.addEventListener(\"mousedown\", this);\n\t\t\to.addEventListener(\"pressup\", this);\n\t\t\tif (o._reset) { o.__reset = o._reset; o._reset = this._reset;}\n\t\t} else {\n\t\t\to.cursor = null;\n\t\t\to.removeEventListener(\"rollover\", this);\n\t\t\to.removeEventListener(\"rollout\", this);\n\t\t\to.removeEventListener(\"mousedown\", this);\n\t\t\to.removeEventListener(\"pressup\", this);\n\t\t\tif (o.__reset) { o._reset = o.__reset; delete(o.__reset); }\n\t\t}\n\t};\n\t// ButtonHelper.setEnabled is @deprecated. Remove for 1.1+\n\tp.setEnabled = createjs.deprecate(p._setEnabled, \"ButtonHelper.setEnabled\");\n\n\t/**\n\t * Use the {{#crossLink \"ButtonHelper/enabled:property\"}}{{/crossLink}} property instead.\n\t * @method getEnabled\n\t * @protected\n\t * @return {Boolean}\n\t **/\n\tp._getEnabled = function() {\n\t\treturn this._enabled;\n\t};\n\t// ButtonHelper.getEnabled is @deprecated. Remove for 1.1+\n\tp.getEnabled = createjs.deprecate(p._getEnabled, \"ButtonHelper.getEnabled\");\n\n\t/**\n\t * Enables or disables the button functionality on the target.\n\t * @property enabled\n\t * @type {Boolean}\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tenabled: { get: p._getEnabled, set: p._setEnabled }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ButtonHelper]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method handleEvent\n\t * @param {Object} evt The mouse event to handle.\n\t * @protected\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tvar label, t = this.target, type = evt.type;\n\t\tif (type == \"mousedown\") {\n\t\t\tthis._isPressed = true;\n\t\t\tlabel = this.downLabel;\n\t\t} else if (type == \"pressup\") {\n\t\t\tthis._isPressed = false;\n\t\t\tlabel = this._isOver ? this.overLabel : this.outLabel;\n\t\t} else if (type == \"rollover\") {\n\t\t\tthis._isOver = true;\n\t\t\tlabel = this._isPressed ? this.downLabel : this.overLabel;\n\t\t} else { // rollout and default\n\t\t\tthis._isOver = false;\n\t\t\tlabel = this._isPressed ? this.overLabel : this.outLabel;\n\t\t}\n\t\tif (this.play) {\n\t\t\tt.gotoAndPlay&&t.gotoAndPlay(label);\n\t\t} else {\n\t\t\tt.gotoAndStop&&t.gotoAndStop(label);\n\t\t}\n\t};\n\t\n\t/**\n\t * Injected into target. Preserves the paused state through a reset.\n\t * @method _reset\n\t * @protected\n\t **/\n\tp._reset = function() {\n\t\t// TODO: explore better ways to handle this issue. This is hacky & disrupts object signatures.\n\t\tvar p = this.paused;\n\t\tthis.__reset();\n\t\tthis.paused = p;\n\t};\n\n\n\tcreatejs.ButtonHelper = ButtonHelper;\n}());\n\n//##############################################################################\n// Shadow.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * This class encapsulates the properties required to define a shadow to apply to a {{#crossLink \"DisplayObject\"}}{{/crossLink}}\n\t * via its <code>shadow</code> property.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myImage.shadow = new createjs.Shadow(\"#000000\", 5, 5, 10);\n\t *\n\t * @class Shadow\n\t * @constructor\n\t * @param {String} color The color of the shadow. This can be any valid CSS color value.\n\t * @param {Number} offsetX The x offset of the shadow in pixels.\n\t * @param {Number} offsetY The y offset of the shadow in pixels.\n\t * @param {Number} blur The size of the blurring effect.\n\t **/\n\tfunction Shadow(color, offsetX, offsetY, blur) {\n\t\t\n\t\t\n\t// public properties:\n\t\t/** \n\t\t * The color of the shadow. This can be any valid CSS color value.\n\t\t * @property color\n\t\t * @type String\n\t\t * @default null\n\t\t */\n\t\tthis.color = color||\"black\";\n\t\n\t\t/** The x offset of the shadow.\n\t\t * @property offsetX\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetX = offsetX||0;\n\t\n\t\t/** The y offset of the shadow.\n\t\t * @property offsetY\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.offsetY = offsetY||0;\n\t\n\t\t/** The blur of the shadow.\n\t\t * @property blur\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.blur = blur||0;\n\t}\n\tvar p = Shadow.prototype;\n\n// static public properties:\n\t/**\n\t * An identity shadow object (all properties are set to 0).\n\t * @property identity\n\t * @type Shadow\n\t * @static\n\t * @final\n\t * @readonly\n\t **/\n\tShadow.identity = new Shadow(\"transparent\", 0, 0, 0);\n\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shadow]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Shadow instance.\n\t * @method clone\n\t * @return {Shadow} A clone of the current Shadow instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Shadow(this.color, this.offsetX, this.offsetY, this.blur);\n\t};\n\t\n\n\tcreatejs.Shadow = Shadow;\n}());\n\n//##############################################################################\n// SpriteSheet.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Encapsulates the properties and methods associated with a sprite sheet. A sprite sheet is a series of images (usually\n\t * animation frames) combined into a larger image (or images). For example, an animation consisting of eight 100x100\n\t * images could be combined into a single 400x200 sprite sheet (4 frames across by 2 high).\n\t *\n\t * The data passed to the SpriteSheet constructor defines:\n\t * <ol>\n\t * \t<li> The source image or images to use.</li>\n\t * \t<li> The positions of individual image frames.</li>\n\t * \t<li> Sequences of frames that form named animations. Optional.</li>\n\t * \t<li> The target playback framerate. Optional.</li>\n\t * </ol>\n\t * <h3>SpriteSheet Format</h3>\n\t * SpriteSheets are an object with two required properties (`images` and `frames`), and two optional properties\n\t * (`framerate` and `animations`). This makes them easy to define in javascript code, or in JSON.\n\t *\n\t * <h4>images</h4>\n\t * An array of source images. Images can be either an HTMlimage\n\t * instance, or a uri to an image. The former is recommended to control preloading.\n\t *\n\t * \timages: [image1, \"path/to/image2.png\"],\n\t *\n\t * <h4>frames</h4>\n\t * Defines the individual frames. There are two supported formats for frame data:\n\t * When all of the frames are the same size (in a grid), use an object with `width`, `height`, `regX`, `regY`,\n\t * and `count` properties.\n\t *\n\t * <ul>\n\t *  <li>`width` & `height` are required and specify the dimensions of the frames</li>\n\t *  <li>`regX` & `regY` indicate the registration point or \"origin\" of the frames</li>\n\t *  <li>`spacing` indicate the spacing between frames</li>\n\t *  <li>`margin` specify the margin around the image(s)</li>\n\t *  <li>`count` allows you to specify the total number of frames in the spritesheet; if omitted, this will\n\t *  be calculated based on the dimensions of the source images and the frames. Frames will be assigned\n\t *  indexes based on their position in the source images (left to right, top to bottom).</li>\n\t * </ul>\n\t *\n\t *  \tframes: {width:64, height:64, count:20, regX: 32, regY:64, spacing:0, margin:0}\n\t *\n\t * If the frames are of different sizes, use an array of frame definitions. Each definition is itself an array\n\t * with 4 required and 3 optional entries, in the order:\n\t *\n\t * <ul>\n\t *  <li>The first four, `x`, `y`, `width`, and `height` are required and define the frame rectangle.</li>\n\t *  <li>The fifth, `imageIndex`, specifies the index of the source image (defaults to 0)</li>\n\t *  <li>The last two, `regX` and `regY` specify the registration point of the frame</li>\n\t * </ul>\n\t *\n\t * \tframes: [\n\t * \t\t// x, y, width, height, imageIndex*, regX*, regY*\n\t * \t\t[64, 0, 96, 64],\n\t * \t\t[0, 0, 64, 64, 1, 32, 32]\n\t * \t\t// etc.\n\t * \t]\n\t *\n\t * <h4>animations</h4>\n\t * Optional. An object defining sequences of frames to play as named animations. Each property corresponds to an\n\t * animation of the same name. Each animation must specify the frames to play, and may\n\t * also include a relative playback `speed` (ex. 2 would playback at double speed, 0.5 at half), and\n\t * the name of the `next` animation to sequence to after it completes.\n\t *\n\t * There are three formats supported for defining the frames in an animation, which can be mixed and matched as appropriate:\n\t * <ol>\n\t * \t<li>for a single frame animation, you can simply specify the frame index\n\t *\n\t * \t\tanimations: {\n\t * \t\t\tsit: 7\n\t * \t\t}\n\t *\n\t * </li>\n\t * <li>\n\t *      for an animation of consecutive frames, you can use an array with two required, and two optional entries\n\t * \t\tin the order: `start`, `end`, `next`, and `speed`. This will play the frames from start to end inclusive.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\t// start, end, next*, speed*\n\t * \t\t\trun: [0, 8],\n\t * \t\t\tjump: [9, 12, \"run\", 2]\n\t * \t\t}\n\t *\n\t *  </li>\n\t *  <li>\n\t *     for non-consecutive frames, you can use an object with a `frames` property defining an array of frame\n\t *     indexes to play in order. The object can also specify `next` and `speed` properties.\n\t *\n\t * \t\tanimations: {\n\t * \t\t\twalk: {\n\t * \t\t\t\tframes: [1,2,3,3,2,1]\n\t * \t\t\t},\n\t * \t\t\tshoot: {\n\t * \t\t\t\tframes: [1,4,5,6],\n\t * \t\t\t\tnext: \"walk\",\n\t * \t\t\t\tspeed: 0.5\n\t * \t\t\t}\n\t * \t\t}\n\t *\n\t *  </li>\n\t * </ol>\n\t * <strong>Note:</strong> the `speed` property was added in EaselJS 0.7.0. Earlier versions had a `frequency`\n\t * property instead, which was the inverse of `speed`. For example, a value of \"4\" would be 1/4 normal speed in\n\t * earlier versions, but is 4x normal speed in EaselJS 0.7.0+.\n\t *\n\t * <h4>framerate</h4>\n\t * Optional. Indicates the default framerate to play this spritesheet at in frames per second. See\n\t * {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} for more information.\n\t *\n\t * \t\tframerate: 20\n\t *\n\t * Note that the Sprite framerate will only work if the stage update method is provided with the {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}}\n\t * event generated by the {{#crossLink \"Ticker\"}}{{/crossLink}}.\n\t *\n\t * \t\tcreatejs.Ticker.on(\"tick\", handleTick);\n\t * \t\tfunction handleTick(event) {\n\t *\t\t\tstage.update(event);\n\t *\t\t}\n\t *\n\t * <h3>Example</h3>\n\t * To define a simple sprite sheet, with a single image \"sprites.jpg\" arranged in a regular 50x50 grid with three\n\t * animations: \"stand\" showing the first frame, \"run\" looping frame 1-5 inclusive, and \"jump\" playing frame 6-8 and\n\t * sequencing back to run.\n\t *\n\t * \t\tvar data = {\n\t * \t\t\timages: [\"sprites.jpg\"],\n\t * \t\t\tframes: {width:50, height:50},\n\t * \t\t\tanimations: {\n\t * \t\t\t\tstand:0,\n\t * \t\t\t\trun:[1,5],\n\t * \t\t\t\tjump:[6,8,\"run\"]\n\t * \t\t\t}\n\t * \t\t};\n\t * \t\tvar spriteSheet = new createjs.SpriteSheet(data);\n\t * \t\tvar animation = new createjs.Sprite(spriteSheet, \"run\");\n\t *\n\t * <h3>Generating SpriteSheet Images</h3>\n\t * Spritesheets can be created manually by combining images in PhotoShop, and specifying the frame size or\n\t * coordinates manually, however there are a number of tools that facilitate this.\n\t * <ul>\n\t *     <li>Exporting SpriteSheets or HTML5 content from Adobe Flash/Animate supports the EaselJS SpriteSheet format.</li>\n\t *     <li>The popular <a href=\"https://www.codeandweb.com/texturepacker/easeljs\" target=\"_blank\">Texture Packer</a> has\n\t *     EaselJS support.\n\t *     <li>SWF animations in Adobe Flash/Animate can be exported to SpriteSheets using <a href=\"http://createjs.com/zoe\" target=\"_blank\">Zo&euml;</a></li>\n\t * </ul>\n\t *\n\t * <h3>Cross Origin Issues</h3>\n\t * <strong>Warning:</strong> Images loaded cross-origin will throw cross-origin security errors when interacted with\n\t * using:\n\t * <ul>\n\t *     <li>a mouse</li>\n\t *     <li>methods such as {{#crossLink \"Container/getObjectUnderPoint\"}}{{/crossLink}}</li>\n\t *     <li>Filters (see {{#crossLink \"Filter\"}}{{/crossLink}})</li>\n\t *     <li>caching (see {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}})</li>\n\t * </ul>\n\t * You can get around this by setting `crossOrigin` property on your images before passing them to EaselJS, or\n\t * setting the `crossOrigin` property on PreloadJS' LoadQueue or LoadItems.\n\t *\n\t * \t\tvar image = new Image();\n\t * \t\timg.crossOrigin=\"Anonymous\";\n\t * \t\timg.src = \"http://server-with-CORS-support.com/path/to/image.jpg\";\n\t *\n\t * If you pass string paths to SpriteSheets, they will not work cross-origin. The server that stores the image must\n\t * support cross-origin requests, or this will not work. For more information, check out\n\t * <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Access_control_CORS\" target=\"_blank\">CORS overview on MDN</a>.\n\t *\n\t * @class SpriteSheet\n\t * @constructor\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @extends EventDispatcher\n\t **/\n\tfunction SpriteSheet(data) {\n\t\tthis.EventDispatcher_constructor();\n\n\n\t\t// public properties:\n\t\t/**\n\t\t * Indicates whether all images are finished loading.\n\t\t * @property complete\n\t\t * @type Boolean\n\t\t * @readonly\n\t\t **/\n\t\tthis.complete = true;\n\n\t\t/**\n\t\t * Specifies the framerate to use by default for Sprite instances using the SpriteSheet. See the Sprite class\n\t\t * {{#crossLink \"Sprite/framerate:property\"}}{{/crossLink}} for more information.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t **/\n\t\tthis.framerate = 0;\n\n\n\t\t// private properties:\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = null;\n\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = null;\n\n\t\t/**\n\t\t * @property _images\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._images = null;\n\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Object\n\t\t **/\n\t\tthis._data = null;\n\n\t\t/**\n\t\t * @property _loadCount\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._loadCount = 0;\n\n\t\t// only used for simple frame defs:\n\t\t/**\n\t\t * @property _frameHeight\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameHeight = 0;\n\n\t\t/**\n\t\t * @property _frameWidth\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._frameWidth = 0;\n\n\t\t/**\n\t\t * @property _numFrames\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._numFrames = 0;\n\n\t\t/**\n\t\t * @property _regX\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regX = 0;\n\n\t\t/**\n\t\t * @property _regY\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._regY = 0;\n\n\t\t/**\n\t\t * @property _spacing\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._spacing = 0;\n\n\t\t/**\n\t\t * @property _margin\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._margin = 0;\n\n\t\t// setup:\n\t\tthis._parseData(data);\n\t}\n\tvar p = createjs.extend(SpriteSheet, createjs.EventDispatcher);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// events:\n\t/**\n\t * Dispatched when all images are loaded.  Note that this only fires if the images\n\t * were not fully loaded when the sprite sheet was initialized. You should check the complete property\n\t * to prior to adding a listener. Ex.\n\t *\n\t * \tvar sheet = new createjs.SpriteSheet(data);\n\t * \tif (!sheet.complete) {\n\t * \t\t// not preloaded, listen for the complete event:\n\t * \t\tsheet.addEventListener(\"complete\", handler);\n\t * \t}\n\t *\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when getFrame is called with a valid frame index. This is primarily intended for use by {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}}\n\t * when doing on-demand rendering.\n\t * @event getframe\n\t * @param {Number} index The frame index.\n\t * @param {Object} frame The frame object that getFrame will return.\n\t */\n\n\t/**\n\t * Dispatched when an image encounters an error. A SpriteSheet will dispatch an error event for each image that\n\t * encounters an error, and will still dispatch a {{#crossLink \"SpriteSheet/complete:event\"}}{{/crossLink}}\n\t * event once all images are finished processing, even if an error is encountered.\n\t * @event error\n\t * @param {String} src The source of the image that failed to load.\n\t * @since 0.8.2\n\t */\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"SpriteSheet/animations:property\"}}{{/crossLink}} property instead.\n\t * @method _getAnimations\n\t * @protected\n\t * @return {Array}\n\t **/\n\tp._getAnimations = function() {\n\t\treturn this._animations.slice();\n\t};\n\t// SpriteSheet.getAnimations is @deprecated. Remove for 1.1+\n\tp.getAnimations = createjs.deprecate(p._getAnimations, \"SpriteSheet.getAnimations\");\n\n\t/**\n\t * Returns an array of all available animation names available on this sprite sheet as strings.\n\t * @property animations\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tanimations: { get: p._getAnimations }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns the total number of frames in the specified animation, or in the whole sprite\n\t * sheet if the animation param is omitted. Returns 0 if the spritesheet relies on calculated frame counts, and\n\t * the images have not been fully loaded.\n\t * @method getNumFrames\n\t * @param {String} animation The name of the animation to get a frame count for.\n\t * @return {Number} The number of frames in the animation, or in the entire sprite sheet if the animation param is omitted.\n\t */\n\tp.getNumFrames = function(animation) {\n\t\tif (animation == null) {\n\t\t\treturn this._frames ? this._frames.length : this._numFrames || 0;\n\t\t} else {\n\t\t\tvar data = this._data[animation];\n\t\t\tif (data == null) { return 0; }\n\t\t\telse { return data.frames.length; }\n\t\t}\n\t};\n\n\t/**\n\t * Returns an object defining the specified animation. The returned object contains:<UL>\n\t * \t<li>frames: an array of the frame ids in the animation</li>\n\t * \t<li>speed: the playback speed for this animation</li>\n\t * \t<li>name: the name of the animation</li>\n\t * \t<li>next: the default animation to play next. If the animation loops, the name and next property will be the\n\t * \tsame.</li>\n\t * </UL>\n\t * @method getAnimation\n\t * @param {String} name The name of the animation to get.\n\t * @return {Object} a generic object with frames, speed, name, and next properties.\n\t **/\n\tp.getAnimation = function(name) {\n\t\treturn this._data[name];\n\t};\n\n\t/**\n\t * Returns an object specifying the image and source rect of the specified frame. The returned object has:<UL>\n\t * \t<li>an image property holding a reference to the image object in which the frame is found</li>\n\t * \t<li>a rect property containing a Rectangle instance which defines the boundaries for the frame within that\n\t * \timage.</li>\n\t * \t<li> A regX and regY property corresponding to the regX/Y values for the frame.\n\t * </UL>\n\t * @method getFrame\n\t * @param {Number} frameIndex The index of the frame.\n\t * @return {Object} a generic object with image and rect properties. Returns null if the frame does not exist.\n\t **/\n\tp.getFrame = function(frameIndex) {\n\t\tvar frame;\n\t\tif (this._frames && (frame=this._frames[frameIndex])) { return frame; }\n\t\treturn null;\n\t};\n\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the specified frame relative\n\t * to the origin. For example, a 90 x 70 frame with a regX of 50 and a regY of 40 would return:\n\t *\n\t * \t[x=-50, y=-40, width=90, height=70]\n\t *\n\t * @method getFrameBounds\n\t * @param {Number} frameIndex The index of the frame.\n\t * @param {Rectangle} [rectangle] A Rectangle instance to copy the values into. By default a new instance is created.\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully loaded.\n\t **/\n\tp.getFrameBounds = function(frameIndex, rectangle) {\n\t\tvar frame = this.getFrame(frameIndex);\n\t\treturn frame ? (rectangle||new createjs.Rectangle()).setValues(-frame.regX, -frame.regY, frame.rect.width, frame.rect.height) : null;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheet]\";\n\t};\n\n\t/**\n\t * SpriteSheet cannot be cloned. A SpriteSheet can be shared by multiple Sprite instances without cloning it.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheet cannot be cloned.\")\n\t};\n\n// private methods:\n\t/**\n\t * @method _parseData\n\t * @param {Object} data An object describing the SpriteSheet data.\n\t * @protected\n\t **/\n\tp._parseData = function(data) {\n\t\tvar i,l,o,a;\n\t\tif (data == null) { return; }\n\n\t\tthis.framerate = data.framerate||0;\n\n\t\t// parse images:\n\t\tif (data.images && (l=data.images.length) > 0) {\n\t\t\ta = this._images = [];\n\t\t\tfor (i=0; i<l; i++) {\n\t\t\t\tvar img = data.images[i];\n\t\t\t\tif (typeof img == \"string\") {\n\t\t\t\t\tvar src = img;\n\t\t\t\t\timg = document.createElement(\"img\");\n\t\t\t\t\timg.src = src;\n\t\t\t\t}\n\t\t\t\ta.push(img);\n\t\t\t\tif (!img.getContext && !img.naturalWidth) {\n\t\t\t\t\tthis._loadCount++;\n\t\t\t\t\tthis.complete = false;\n\t\t\t\t\t(function(o, src) { img.onload = function() { o._handleImageLoad(src); } })(this, src);\n\t\t\t\t\t(function(o, src) { img.onerror = function() { o._handleImageError(src); } })(this, src);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// parse frames:\n\t\tif (data.frames == null) { // nothing\n\t\t} else if (Array.isArray(data.frames)) {\n\t\t\tthis._frames = [];\n\t\t\ta = data.frames;\n\t\t\tfor (i=0,l=a.length;i<l;i++) {\n\t\t\t\tvar arr = a[i];\n\t\t\t\tthis._frames.push({image:this._images[arr[4]?arr[4]:0], rect:new createjs.Rectangle(arr[0],arr[1],arr[2],arr[3]), regX:arr[5]||0, regY:arr[6]||0 });\n\t\t\t}\n\t\t} else {\n\t\t\to = data.frames;\n\t\t\tthis._frameWidth = o.width;\n\t\t\tthis._frameHeight = o.height;\n\t\t\tthis._regX = o.regX||0;\n\t\t\tthis._regY = o.regY||0;\n\t\t\tthis._spacing = o.spacing||0;\n\t\t\tthis._margin = o.margin||0;\n\t\t\tthis._numFrames = o.count;\n\t\t\tif (this._loadCount == 0) { this._calculateFrames(); }\n\t\t}\n\n\t\t// parse animations:\n\t\tthis._animations = [];\n\t\tif ((o=data.animations) != null) {\n\t\t\tthis._data = {};\n\t\t\tvar name;\n\t\t\tfor (name in o) {\n\t\t\t\tvar anim = {name:name};\n\t\t\t\tvar obj = o[name];\n\t\t\t\tif (typeof obj == \"number\") { // single frame\n\t\t\t\t\ta = anim.frames = [obj];\n\t\t\t\t} else if (Array.isArray(obj)) { // simple\n\t\t\t\t\tif (obj.length == 1) { anim.frames = [obj[0]]; }\n\t\t\t\t\telse {\n\t\t\t\t\t\tanim.speed = obj[3];\n\t\t\t\t\t\tanim.next = obj[2];\n\t\t\t\t\t\ta = anim.frames = [];\n\t\t\t\t\t\tfor (i=obj[0];i<=obj[1];i++) {\n\t\t\t\t\t\t\ta.push(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else { // complex\n\t\t\t\t\tanim.speed = obj.speed;\n\t\t\t\t\tanim.next = obj.next;\n\t\t\t\t\tvar frames = obj.frames;\n\t\t\t\t\ta = anim.frames = (typeof frames == \"number\") ? [frames] : frames.slice(0);\n\t\t\t\t}\n\t\t\t\tif (anim.next === true || anim.next === undefined) { anim.next = name; } // loop\n\t\t\t\tif (anim.next === false || (a.length < 2 && anim.next == name)) { anim.next = null; } // stop\n\t\t\t\tif (!anim.speed) { anim.speed = 1; }\n\t\t\t\tthis._animations.push(name);\n\t\t\t\tthis._data[name] = anim;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageLoad\n\t * @protected\n\t **/\n\tp._handleImageLoad = function(src) {\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis._calculateFrames();\n\t\t\tthis.complete = true;\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleImageError\n\t * @protected\n\t */\n\tp._handleImageError = function (src) {\n\t\tvar errorEvent = new createjs.Event(\"error\");\n\t\terrorEvent.src = src;\n\t\tthis.dispatchEvent(errorEvent);\n\n\t\t// Complete is still dispatched.\n\t\tif (--this._loadCount == 0) {\n\t\t\tthis.dispatchEvent(\"complete\");\n\t\t}\n\t};\n\n\t/**\n\t * @method _calculateFrames\n\t * @protected\n\t **/\n\tp._calculateFrames = function() {\n\t\tif (this._frames || this._frameWidth == 0) { return; }\n\n\t\tthis._frames = [];\n\n\t\tvar maxFrames = this._numFrames || 100000; // if we go over this, something is wrong.\n\t\tvar frameCount = 0, frameWidth = this._frameWidth, frameHeight = this._frameHeight;\n\t\tvar spacing = this._spacing, margin = this._margin;\n\t\t\n\t\timgLoop:\n\t\tfor (var i=0, imgs=this._images; i<imgs.length; i++) {\n\t\t\tvar img = imgs[i], imgW = (img.width||img.naturalWidth), imgH = (img.height||img.naturalHeight);\n\n\t\t\tvar y = margin;\n\t\t\twhile (y <= imgH-margin-frameHeight) {\n\t\t\t\tvar x = margin;\n\t\t\t\twhile (x <= imgW-margin-frameWidth) {\n\t\t\t\t\tif (frameCount >= maxFrames) { break imgLoop; }\n\t\t\t\t\tframeCount++;\n\t\t\t\t\tthis._frames.push({\n\t\t\t\t\t\t\timage: img,\n\t\t\t\t\t\t\trect: new createjs.Rectangle(x, y, frameWidth, frameHeight),\n\t\t\t\t\t\t\tregX: this._regX,\n\t\t\t\t\t\t\tregY: this._regY\n\t\t\t\t\t\t});\n\t\t\t\t\tx += frameWidth+spacing;\n\t\t\t\t}\n\t\t\t\ty += frameHeight+spacing;\n\t\t\t}\n\t\t}\n\t\tthis._numFrames = frameCount;\n\t};\n\n\n\tcreatejs.SpriteSheet = createjs.promote(SpriteSheet, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// Graphics.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The Graphics class exposes an easy to use API for generating vector drawing instructions and drawing them to a\n\t * specified context. Note that you can use Graphics without any dependency on the EaselJS framework by calling {{#crossLink \"Graphics/draw\"}}{{/crossLink}}\n\t * directly, or it can be used with the {{#crossLink \"Shape\"}}{{/crossLink}} object to draw vector graphics within the\n\t * context of an EaselJS display list.\n\t *\n\t * There are two approaches to working with Graphics object: calling methods on a Graphics instance (the \"Graphics API\"), or\n\t * instantiating Graphics command objects and adding them to the graphics queue via {{#crossLink \"Graphics/append\"}}{{/crossLink}}.\n\t * The former abstracts the latter, simplifying beginning and ending paths, fills, and strokes.\n\t *\n\t *      var g = new createjs.Graphics();\n\t *      g.setStrokeStyle(1);\n\t *      g.beginStroke(\"#000000\");\n\t *      g.beginFill(\"red\");\n\t *      g.drawCircle(0,0,30);\n\t *\n\t * All drawing methods in Graphics return the Graphics instance, so they can be chained together. For example,\n\t * the following line of code would generate the instructions to draw a rectangle with a red stroke and blue fill:\n\t *\n\t *      myGraphics.beginStroke(\"red\").beginFill(\"blue\").drawRect(20, 20, 100, 50);\n\t *\n\t * Each graphics API call generates a command object (see below). The last command to be created can be accessed via\n\t * {{#crossLink \"Graphics/command:property\"}}{{/crossLink}}:\n\t *\n\t *      var fillCommand = myGraphics.beginFill(\"red\").command;\n\t *      // ... later, update the fill style/color:\n\t *      fillCommand.style = \"blue\";\n\t *      // or change it to a bitmap fill:\n\t *      fillCommand.bitmap(myImage);\n\t *\n\t * For more direct control of rendering, you can instantiate and append command objects to the graphics queue directly. In this case, you\n\t * need to manage path creation manually, and ensure that fill/stroke is applied to a defined path:\n\t *\n\t *      // start a new path. Graphics.beginCmd is a reusable BeginPath instance:\n\t *      myGraphics.append(createjs.Graphics.beginCmd);\n\t *      // we need to define the path before applying the fill:\n\t *      var circle = new createjs.Graphics.Circle(0,0,30);\n\t *      myGraphics.append(circle);\n\t *      // fill the path we just defined:\n\t *      var fill = new createjs.Graphics.Fill(\"red\");\n\t *      myGraphics.append(fill);\n\t *\n\t * These approaches can be used together, for example to insert a custom command:\n\t *\n\t *      myGraphics.beginFill(\"red\");\n\t *      var customCommand = new CustomSpiralCommand(etc);\n\t *      myGraphics.append(customCommand);\n\t *      myGraphics.beginFill(\"blue\");\n\t *      myGraphics.drawCircle(0, 0, 30);\n\t *\n\t * See {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more info on creating custom commands.\n\t *\n\t * <h4>Tiny API</h4>\n\t * The Graphics class also includes a \"tiny API\", which is one or two-letter methods that are shortcuts for all of the\n\t * Graphics methods. These methods are great for creating compact instructions, and is used by the Toolkit for CreateJS\n\t * to generate readable code. All tiny methods are marked as protected, so you can view them by enabling protected\n\t * descriptions in the docs.\n\t *\n\t * <table>\n\t *     <tr><td><b>Tiny</b></td><td><b>Method</b></td><td><b>Tiny</b></td><td><b>Method</b></td></tr>\n\t *     <tr><td>mt</td><td>{{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} </td>\n\t *     <td>lt</td> <td>{{#crossLink \"Graphics/lineTo\"}}{{/crossLink}}</td></tr>\n\t *     <tr><td>a/at</td><td>{{#crossLink \"Graphics/arc\"}}{{/crossLink}} / {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} </td>\n\t *     <td>bt</td><td>{{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>qt</td><td>{{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} (also curveTo)</td>\n\t *     <td>r</td><td>{{#crossLink \"Graphics/rect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>cp</td><td>{{#crossLink \"Graphics/closePath\"}}{{/crossLink}} </td>\n\t *     <td>c</td><td>{{#crossLink \"Graphics/clear\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>f</td><td>{{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} </td>\n\t *     <td>lf</td><td>{{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rf</td><td>{{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} </td>\n\t *     <td>bf</td><td>{{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>ef</td><td>{{#crossLink \"Graphics/endFill\"}}{{/crossLink}} </td>\n\t *     <td>ss / sd</td><td>{{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} / {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>s</td><td>{{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} </td>\n\t *     <td>ls</td><td>{{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rs</td><td>{{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} </td>\n\t *     <td>bs</td><td>{{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>es</td><td>{{#crossLink \"Graphics/endStroke\"}}{{/crossLink}} </td>\n\t *     <td>dr</td><td>{{#crossLink \"Graphics/drawRect\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>rr</td><td>{{#crossLink \"Graphics/drawRoundRect\"}}{{/crossLink}} </td>\n\t *     <td>rc</td><td>{{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dc</td><td>{{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} </td>\n\t *     <td>de</td><td>{{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} </td></tr>\n\t *     <tr><td>dp</td><td>{{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} </td>\n\t *     <td>p</td><td>{{#crossLink \"Graphics/decodePath\"}}{{/crossLink}} </td></tr>\n\t * </table>\n\t *\n\t * Here is the above example, using the tiny API instead.\n\t *\n\t *      myGraphics.s(\"red\").f(\"blue\").r(20, 20, 100, 50);\n\t *\n\t * @class Graphics\n\t * @constructor\n\t **/\n\tfunction Graphics() {\n\n\n\t// public properties\n\t\t/**\n\t\t * Holds a reference to the last command that was created or appended. For example, you could retain a reference\n\t\t * to a Fill command in order to dynamically update the color later by using:\n\t\t *\n\t\t * \t\tvar myFill = myGraphics.beginFill(\"red\").command;\n\t\t * \t\t// update color later:\n\t\t * \t\tmyFill.style = \"yellow\";\n\t\t *\n\t\t * @property command\n\t\t * @type Object\n\t\t **/\n\t\tthis.command = null;\n\n\n\t// private properties\n\t\t/**\n\t\t * @property _stroke\n\t\t * @protected\n\t\t * @type {Stroke}\n\t\t **/\n\t\tthis._stroke = null;\n\n\t\t/**\n\t\t * @property _strokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._strokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeStyle\n\t\t * @protected\n\t\t * @type {StrokeStyle}\n\t\t **/\n\t\tthis._oldStrokeStyle = null;\n\t\t\n\t\t/**\n\t\t * @property _strokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._strokeDash = null;\n\t\t\n\t\t/**\n\t\t * @property _oldStrokeDash\n\t\t * @protected\n\t\t * @type {StrokeDash}\n\t\t **/\n\t\tthis._oldStrokeDash = null;\n\n\t\t/**\n\t\t * @property _strokeIgnoreScale\n\t\t * @protected\n\t\t * @type Boolean\n\t\t **/\n\t\tthis._strokeIgnoreScale = false;\n\n\t\t/**\n\t\t * @property _fill\n\t\t * @protected\n\t\t * @type {Fill}\n\t\t **/\n\t\tthis._fill = null;\n\n\t\t/**\n\t\t * @property _instructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._instructions = [];\n\n\t\t/**\n\t\t * Indicates the last instruction index that was committed.\n\t\t * @property _commitIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t **/\n\t\tthis._commitIndex = 0;\n\n\t\t/**\n\t\t * Uncommitted instructions.\n\t\t * @property _activeInstructions\n\t\t * @protected\n\t\t * @type {Array}\n\t\t **/\n\t\tthis._activeInstructions = [];\n\n\t\t/**\n\t\t * This indicates that there have been changes to the activeInstruction list since the last updateInstructions call.\n\t\t * @property _dirty\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._dirty = false;\n\n\t\t/**\n\t\t * Index to draw from if a store operation has happened.\n\t\t * @property _storeIndex\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._storeIndex = 0;\n\n\t// setup:\n\t\tthis.clear();\n\t}\n\tvar p = Graphics.prototype;\n\tvar G = Graphics; // shortcut\n\n// static public methods:\n\t/**\n\t * Returns a CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\". For example,\n\t *\n\t *      createjs.Graphics.getRGB(50, 100, 150, 0.5);\n\t *      // Returns \"rgba(50,100,150,0.5)\"\n\t *\n\t * It also supports passing a single hex color value as the first param, and an optional alpha value as the second\n\t * param. For example,\n\t *\n\t *      createjs.Graphics.getRGB(0xFF00FF, 0.2);\n\t *      // Returns \"rgba(255,0,255,0.2)\"\n\t *\n\t * @method getRGB\n\t * @static\n\t * @param {Number} r The red component for the color, between 0 and 0xFF (255).\n\t * @param {Number} g The green component for the color, between 0 and 0xFF (255).\n\t * @param {Number} b The blue component for the color, between 0 and 0xFF (255).\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified RGB numeric color values in the format\n\t * \"rgba(255,255,255,1.0)\", or if alpha is null then in the format \"rgb(255,255,255)\".\n\t **/\n\tGraphics.getRGB = function(r, g, b, alpha) {\n\t\tif (r != null && b == null) {\n\t\t\talpha = g;\n\t\t\tb = r&0xFF;\n\t\t\tg = r>>8&0xFF;\n\t\t\tr = r>>16&0xFF;\n\t\t}\n\t\tif (alpha == null) {\n\t\t\treturn \"rgb(\"+r+\",\"+g+\",\"+b+\")\";\n\t\t} else {\n\t\t\treturn \"rgba(\"+r+\",\"+g+\",\"+b+\",\"+alpha+\")\";\n\t\t}\n\t};\n\n\t/**\n\t * Returns a CSS compatible color string based on the specified HSL numeric color values in the format \"hsla(360,100,100,1.0)\",\n\t * or if alpha is null then in the format \"hsl(360,100,100)\".\n\t *\n\t *      createjs.Graphics.getHSL(150, 100, 70);\n\t *      // Returns \"hsl(150,100,70)\"\n\t *\n\t * @method getHSL\n\t * @static\n\t * @param {Number} hue The hue component for the color, between 0 and 360.\n\t * @param {Number} saturation The saturation component for the color, between 0 and 100.\n\t * @param {Number} lightness The lightness component for the color, between 0 and 100.\n\t * @param {Number} [alpha] The alpha component for the color where 0 is fully transparent and 1 is fully opaque.\n\t * @return {String} A CSS compatible color string based on the specified HSL numeric color values in the format\n\t * \"hsla(360,100,100,1.0)\", or if alpha is null then in the format \"hsl(360,100,100)\".\n\t **/\n\tGraphics.getHSL = function(hue, saturation, lightness, alpha) {\n\t\tif (alpha == null) {\n\t\t\treturn \"hsl(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%)\";\n\t\t} else {\n\t\t\treturn \"hsla(\"+(hue%360)+\",\"+saturation+\"%,\"+lightness+\"%,\"+alpha+\")\";\n\t\t}\n\t};\n\n\n// static properties:\n\t/**\n\t * A reusable instance of {{#crossLink \"Graphics/BeginPath\"}}{{/crossLink}} to avoid\n\t * unnecessary instantiation.\n\t * @property beginCmd\n\t * @type {Graphics.BeginPath}\n\t * @static\n\t **/\n\t // defined at the bottom of this file.\n\n\t/**\n\t * Map of Base64 characters to values. Used by {{#crossLink \"Graphics/decodePath\"}}{{/crossLink}}.\n\t * @property BASE_64\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Object}\n\t **/\n\tGraphics.BASE_64 = {\"A\":0,\"B\":1,\"C\":2,\"D\":3,\"E\":4,\"F\":5,\"G\":6,\"H\":7,\"I\":8,\"J\":9,\"K\":10,\"L\":11,\"M\":12,\"N\":13,\"O\":14,\"P\":15,\"Q\":16,\"R\":17,\"S\":18,\"T\":19,\"U\":20,\"V\":21,\"W\":22,\"X\":23,\"Y\":24,\"Z\":25,\"a\":26,\"b\":27,\"c\":28,\"d\":29,\"e\":30,\"f\":31,\"g\":32,\"h\":33,\"i\":34,\"j\":35,\"k\":36,\"l\":37,\"m\":38,\"n\":39,\"o\":40,\"p\":41,\"q\":42,\"r\":43,\"s\":44,\"t\":45,\"u\":46,\"v\":47,\"w\":48,\"x\":49,\"y\":50,\"z\":51,\"0\":52,\"1\":53,\"2\":54,\"3\":55,\"4\":56,\"5\":57,\"6\":58,\"7\":59,\"8\":60,\"9\":61,\"+\":62,\"/\":63};\n\n\t/**\n\t * Maps numeric values for the caps parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"butt\", 1 to \"round\", and 2 to \"square\".\n\t * For example, to set the line caps to \"square\":\n\t *\n\t *      myGraphics.ss(16, 2);\n\t *\n\t * @property STROKE_CAPS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_CAPS_MAP = [\"butt\", \"round\", \"square\"];\n\n\t/**\n\t * Maps numeric values for the joints parameter of {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} to\n\t * corresponding string values. This is primarily for use with the tiny API. The mappings are as follows: 0 to\n\t * \"miter\", 1 to \"round\", and 2 to \"bevel\".\n\t * For example, to set the line joints to \"bevel\":\n\t *\n\t *      myGraphics.ss(16, 0, 2);\n\t *\n\t * @property STROKE_JOINTS_MAP\n\t * @static\n\t * @final\n\t * @readonly\n\t * @type {Array}\n\t **/\n\tGraphics.STROKE_JOINTS_MAP = [\"miter\", \"round\", \"bevel\"];\n\n\t/**\n\t * @property _ctx\n\t * @static\n\t * @protected\n\t * @type {CanvasRenderingContext2D}\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) {\n\t\tGraphics._ctx = canvas.getContext(\"2d\");\n\t\tcanvas.width = canvas.height = 1;\n\t}\n\n\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"Graphics/instructions:property\"}}{{/crossLink}} property instead.\n\t * @method _getInstructions\n\t * @protected\n\t * @return {Array} The instructions array, useful for chaining\n\t **/\n\tp._getInstructions = function() {\n\t\tthis._updateInstructions();\n\t\treturn this._instructions;\n\t};\n\t// Graphics.getInstructions is @deprecated. Remove for 1.1+\n\tp.getInstructions = createjs.deprecate(p._getInstructions, \"Graphics.getInstructions\");\n\n\t/**\n\t * Returns the graphics instructions array. Each entry is a graphics command object (ex. Graphics.Fill, Graphics.Rect)\n\t * Modifying the returned array directly is not recommended, and is likely to result in unexpected behaviour.\n\t *\n\t * This property is mainly intended for introspection of the instructions (ex. for graphics export).\n\t * @property instructions\n\t * @type {Array}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tinstructions: { get: p._getInstructions }\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Returns true if this Graphics instance has no drawing commands.\n\t * @method isEmpty\n\t * @return {Boolean} Returns true if this Graphics instance has no drawing commands.\n\t **/\n\tp.isEmpty = function() {\n\t\treturn !(this._instructions.length || this._activeInstructions.length);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Object} data Optional data that is passed to graphics command exec methods. When called from a Shape instance, the shape passes itself as the data parameter. This can be used by custom graphic commands to insert contextual data.\n\t **/\n\tp.draw = function(ctx, data) {\n\t\tthis._updateInstructions();\n\t\tvar instr = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instr.length; i<l; i++) {\n\t\t\tinstr[i].exec(ctx, data);\n\t\t}\n\t};\n\n\t/**\n\t * Draws only the path described for this Graphics instance, skipping any non-path instructions, including fill and\n\t * stroke descriptions. Used for <code>DisplayObject.mask</code> to draw the clipping path, for example.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method drawAsPath\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t **/\n\tp.drawAsPath = function(ctx) {\n\t\tthis._updateInstructions();\n\t\tvar instr, instrs = this._instructions;\n\t\tfor (var i=this._storeIndex, l=instrs.length; i<l; i++) {\n\t\t\t// the first command is always a beginPath command.\n\t\t\tif ((instr = instrs[i]).path !== false) { instr.exec(ctx); }\n\t\t}\n\t};\n\n\n// public methods that map directly to context 2D calls:\n\t/**\n\t * Moves the drawing point to the specified position. A tiny API method \"mt\" also exists.\n\t * @method moveTo\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t **/\n\tp.moveTo = function(x, y) {\n\t\treturn this.append(new G.MoveTo(x,y), true);\n\t};\n\n\t/**\n\t * Draws a line from the current drawing point to the specified position, which become the new current drawing\n\t * point. Note that you *must* call {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} before the first `lineTo()`.\n\t * A tiny API method \"lt\" also exists.\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#complex-shapes-(paths)\">\n\t * whatwg spec</a>.\n\t * @method lineTo\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.lineTo = function(x, y) {\n\t\treturn this.append(new G.LineTo(x,y));\n\t};\n\n\t/**\n\t * Draws an arc with the specified control points and radius.  For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arcto\">\n\t * whatwg spec</a>. A tiny API method \"at\" also exists.\n\t * @method arcTo\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arcTo = function(x1, y1, x2, y2, radius) {\n\t\treturn this.append(new G.ArcTo(x1, y1, x2, y2, radius));\n\t};\n\n\t/**\n\t * Draws an arc defined by the radius, startAngle and endAngle arguments, centered at the position (x, y). For\n\t * example, to draw a full circle with a radius of 20 centered at (100, 100):\n\t *\n\t *      arc(100, 100, 20, 0, Math.PI*2);\n\t *\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-arc\">whatwg spec</a>.\n\t * A tiny API method \"a\" also exists.\n\t * @method arc\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\treturn this.append(new G.Arc(x, y, radius, startAngle, endAngle, anticlockwise));\n\t};\n\n\t/**\n\t * Draws a quadratic curve from the current drawing point to (x, y) using the control point (cpx, cpy). For detailed\n\t * information, read the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-quadraticcurveto\">\n\t * whatwg spec</a>. A tiny API method \"qt\" also exists.\n\t * @method quadraticCurveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.quadraticCurveTo = function(cpx, cpy, x, y) {\n\t\treturn this.append(new G.QuadraticCurveTo(cpx, cpy, x, y));\n\t};\n\n\t/**\n\t * Draws a bezier curve from the current drawing point to (x, y) using the control points (cp1x, cp1y) and (cp2x,\n\t * cp2y). For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-beziercurveto\">\n\t * whatwg spec</a>. A tiny API method \"bt\" also exists.\n\t * @method bezierCurveTo\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.bezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\treturn this.append(new G.BezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y));\n\t};\n\n\t/**\n\t * Draws a rectangle at (x, y) with the specified width and height using the current fill and/or stroke.\n\t * For detailed information, read the\n\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-rect\">\n\t * whatwg spec</a>. A tiny API method \"r\" also exists.\n\t * @method rect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.rect = function(x, y, w, h) {\n\t\treturn this.append(new G.Rect(x, y, w, h));\n\t};\n\n\t/**\n\t * Closes the current path, effectively drawing a line from the current drawing point to the first drawing point specified\n\t * since the fill or stroke was last set. A tiny API method \"cp\" also exists.\n\t * @method closePath\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.closePath = function() {\n\t\treturn this._activeInstructions.length ? this.append(new G.ClosePath()) : this;\n\t};\n\n\n// public methods that roughly map to Adobe Flash/Animate graphics APIs:\n\t/**\n\t * Clears all drawing instructions, effectively resetting this Graphics instance. Any line and fill styles will need\n\t * to be redefined to draw shapes following a clear call. A tiny API method \"c\" also exists.\n\t * @method clear\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.clear = function() {\n\t\tthis._instructions.length = this._activeInstructions.length = this._commitIndex = 0;\n\t\tthis._strokeStyle = this._oldStrokeStyle = this._stroke = this._fill = this._strokeDash = this._oldStrokeDash = null;\n\t\tthis._dirty = this._strokeIgnoreScale = false;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a fill with the specified color. This ends the current sub-path. A tiny API method \"f\" also exists.\n\t * @method beginFill\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginFill = function(color) {\n\t\treturn this._setFill(color ? new G.Fill(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient fill defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.beginLinearGradientFill([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"lf\" also exists.\n\t * @method beginLinearGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientFill = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setFill(new G.Fill().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient fill. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a circle to display it:\n\t *\n\t *      myGraphics.beginRadialGradientFill([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50).drawCircle(100, 100, 50);\n\t *\n\t * A tiny API method \"rf\" also exists.\n\t * @method beginRadialGradientFill\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientFill = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setFill(new G.Fill().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. A tiny API method \"bf\" also\n\t * exists.\n\t * @method beginBitmapFill\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapFill = function(image, repetition, matrix) {\n\t\treturn this._setFill(new G.Fill(null,matrix).bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no fill. Functionally identical to <code>beginFill(null)</code>.\n\t * A tiny API method \"ef\" also exists.\n\t * @method endFill\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endFill = function() {\n\t\treturn this.beginFill();\n\t};\n\n\t/**\n\t * Sets the stroke style. Like all drawing methods, this can be chained, so you can define\n\t * the stroke style and color in a single line of code like so:\n\t *\n\t * \tmyGraphics.setStrokeStyle(8,\"round\").beginStroke(\"#F00\");\n\t *\n\t * A tiny API method \"ss\" also exists.\n\t * @method setStrokeStyle\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeStyle = function(thickness, caps, joints, miterLimit, ignoreScale) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeStyle = this.command = new G.StrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\n\n\t\t// ignoreScale lives on Stroke, not StrokeStyle, so we do a little trickery:\n\t\tif (this._stroke) { this._stroke.ignoreScale = ignoreScale; }\n\t\tthis._strokeIgnoreScale = ignoreScale;\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Sets or clears the stroke dash pattern.\n\t *\n\t * \tmyGraphics.setStrokeDash([20, 10], 0);\n\t *\n\t * A tiny API method `sd` also exists.\n\t * @method setStrokeDash\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, `[20,10]` would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear the existing stroke dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.setStrokeDash = function(segments, offset) {\n\t\tthis._updateInstructions(true);\n\t\tthis._strokeDash = this.command = new G.StrokeDash(segments, offset);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Begins a stroke with the specified color. This ends the current sub-path. A tiny API method \"s\" also exists.\n\t * @method beginStroke\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginStroke = function(color) {\n\t\treturn this._setStroke(color ? new G.Stroke(color) : null);\n\t};\n\n\t/**\n\t * Begins a linear gradient stroke defined by the line (x0, y0) to (x1, y1). This ends the current sub-path. For\n\t * example, the following code defines a black to white vertical gradient ranging from 20px to 120px, and draws a\n\t * square to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10).\n\t *          beginLinearGradientStroke([\"#000\",\"#FFF\"], [0, 1], 0, 20, 0, 120).drawRect(20, 20, 120, 120);\n\t *\n\t * A tiny API method \"ls\" also exists.\n\t * @method beginLinearGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginLinearGradientStroke = function(colors, ratios, x0, y0, x1, y1) {\n\t\treturn this._setStroke(new G.Stroke().linearGradient(colors, ratios, x0, y0, x1, y1));\n\t};\n\n\t/**\n\t * Begins a radial gradient stroke. This ends the current sub-path. For example, the following code defines a red to\n\t * blue radial gradient centered at (100, 100), with a radius of 50, and draws a rectangle to display it:\n\t *\n\t *      myGraphics.setStrokeStyle(10)\n\t *          .beginRadialGradientStroke([\"#F00\",\"#00F\"], [0, 1], 100, 100, 0, 100, 100, 50)\n\t *          .drawRect(50, 90, 150, 110);\n\t *\n\t * A tiny API method \"rs\" also exists.\n\t * @method beginRadialGradientStroke\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginRadialGradientStroke = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\treturn this._setStroke(new G.Stroke().radialGradient(colors, ratios, x0, y0, r0, x1, y1, r1));\n\t};\n\n\t/**\n\t * Begins a pattern fill using the specified image. This ends the current sub-path. Note that unlike bitmap fills,\n\t * strokes do not currently support a matrix parameter due to limitations in the canvas API. A tiny API method \"bs\"\n\t * also exists.\n\t * @method beginBitmapStroke\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern. Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.beginBitmapStroke = function(image, repetition) {\n\t\t// NOTE: matrix is not supported for stroke because transforms on strokes also affect the drawn stroke width.\n\t\treturn this._setStroke(new G.Stroke().bitmap(image, repetition));\n\t};\n\n\t/**\n\t * Ends the current sub-path, and begins a new one with no stroke. Functionally identical to <code>beginStroke(null)</code>.\n\t * A tiny API method \"es\" also exists.\n\t * @method endStroke\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.endStroke = function() {\n\t\treturn this.beginStroke();\n\t};\n\n\t/**\n\t * Maps the familiar ActionScript <code>curveTo()</code> method to the functionally similar {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}}\n\t * method.\n\t * @method curveTo\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.curveTo = p.quadraticCurveTo;\n\n\t/**\n\t *\n\t * Maps the familiar ActionScript <code>drawRect()</code> method to the functionally similar {{#crossLink \"Graphics/rect\"}}{{/crossLink}}\n\t * method.\n\t * @method drawRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRect = p.rect;\n\n\t/**\n\t * Draws a rounded rectangle with all corners with the specified radius.\n\t * @method drawRoundRect\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRect = function(x, y, w, h, radius) {\n\t\treturn this.drawRoundRectComplex(x, y, w, h, radius, radius, radius, radius);\n\t};\n\n\t/**\n\t * Draws a rounded rectangle with different corner radii. Supports positive and negative corner radii. A tiny API\n\t * method \"rc\" also exists.\n\t * @method drawRoundRectComplex\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawRoundRectComplex = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\treturn this.append(new G.RoundRect(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL));\n\t};\n\n\t/**\n\t * Draws a circle with the specified radius at (x, y).\n\t *\n\t *      var g = new createjs.Graphics();\n\t *\t    g.setStrokeStyle(1);\n\t *\t    g.beginStroke(createjs.Graphics.getRGB(0,0,0));\n\t *\t    g.beginFill(createjs.Graphics.getRGB(255,0,0));\n\t *\t    g.drawCircle(0,0,3);\n\t *\n\t *\t    var s = new createjs.Shape(g);\n\t *\t\ts.x = 100;\n\t *\t\ts.y = 100;\n\t *\n\t *\t    stage.addChild(s);\n\t *\t    stage.update();\n\t *\n\t * A tiny API method \"dc\" also exists.\n\t * @method drawCircle\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawCircle = function(x, y, radius) {\n\t\treturn this.append(new G.Circle(x, y, radius));\n\t};\n\n\t/**\n\t * Draws an ellipse (oval) with a specified width (w) and height (h). Similar to {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}},\n\t * except the width and height can be different. A tiny API method \"de\" also exists.\n\t * @method drawEllipse\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawEllipse = function(x, y, w, h) {\n\t\treturn this.append(new G.Ellipse(x, y, w, h));\n\t};\n\n\t/**\n\t * Draws a star if pointSize is greater than 0, or a regular polygon if pointSize is 0 with the specified number of\n\t * points. For example, the following code will draw a familiar 5 pointed star shape centered at 100, 100 and with a\n\t * radius of 50:\n\t *\n\t *      myGraphics.beginFill(\"#FF0\").drawPolyStar(100, 100, 50, 5, 0.6, -90);\n\t *      // Note: -90 makes the first point vertical\n\t *\n\t * A tiny API method \"dp\" also exists.\n\t *\n\t * @method drawPolyStar\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.drawPolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\treturn this.append(new G.PolyStar(x, y, radius, sides, pointSize, angle));\n\t};\n\n\t/**\n\t * Appends a graphics command object to the graphics queue. Command objects expose an \"exec\" method\n\t * that accepts two parameters: the Context2D to operate on, and an arbitrary data object passed into\n\t * {{#crossLink \"Graphics/draw\"}}{{/crossLink}}. The latter will usually be the Shape instance that called draw.\n\t *\n\t * This method is used internally by Graphics methods, such as drawCircle, but can also be used directly to insert\n\t * built-in or custom graphics commands. For example:\n\t *\n\t * \t\t// attach data to our shape, so we can access it during the draw:\n\t * \t\tmyShape.color = \"red\";\n\t *\n\t * \t\t// append a Circle command object:\n\t * \t\tmyShape.graphics.append(new createjs.Graphics.Circle(50, 50, 30));\n\t *\n\t * \t\t// append a custom command object with an exec method that sets the fill style\n\t * \t\t// based on the shape's data, and then fills the circle.\n\t * \t\tmyShape.graphics.append({exec:function(ctx, shape) {\n\t * \t\t\tctx.fillStyle = shape.color;\n\t * \t\t\tctx.fill();\n\t * \t\t}});\n\t *\n\t * @method append\n\t * @param {Object} command A graphics command object exposing an \"exec\" method.\n\t * @param {boolean} clean The clean param is primarily for internal use. A value of true indicates that a command does not generate a path that should be stroked or filled.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.append = function(command, clean) {\n\t\tthis._activeInstructions.push(command);\n\t\tthis.command = command;\n\t\tif (!clean) { this._dirty = true; }\n\t\treturn this;\n\t};\n\n\t/**\n\t * Decodes a compact encoded path string into a series of draw instructions.\n\t * This format is not intended to be human readable, and is meant for use by authoring tools.\n\t * The format uses a base64 character set, with each character representing 6 bits, to define a series of draw\n\t * commands.\n\t *\n\t * Each command is comprised of a single \"header\" character followed by a variable number of alternating x and y\n\t * position values. Reading the header bits from left to right (most to least significant): bits 1 to 3 specify the\n\t * type of operation (0-moveTo, 1-lineTo, 2-quadraticCurveTo, 3-bezierCurveTo, 4-closePath, 5-7 unused). Bit 4\n\t * indicates whether position values use 12 bits (2 characters) or 18 bits (3 characters), with a one indicating the\n\t * latter. Bits 5 and 6 are currently unused.\n\t *\n\t * Following the header is a series of 0 (closePath), 2 (moveTo, lineTo), 4 (quadraticCurveTo), or 6 (bezierCurveTo)\n\t * parameters. These parameters are alternating x/y positions represented by 2 or 3 characters (as indicated by the\n\t * 4th bit in the command char). These characters consist of a 1 bit sign (1 is negative, 0 is positive), followed\n\t * by an 11 (2 char) or 17 (3 char) bit integer value. All position values are in tenths of a pixel. Except in the\n\t * case of move operations which are absolute, this value is a delta from the previous x or y position (as\n\t * appropriate).\n\t *\n\t * For example, the string \"A3cAAMAu4AAA\" represents a line starting at -150,0 and ending at 150,0.\n\t * <br />A - bits 000000. First 3 bits (000) indicate a moveTo operation. 4th bit (0) indicates 2 chars per\n\t * parameter.\n\t * <br />n0 - 110111011100. Absolute x position of -150.0px. First bit indicates a negative value, remaining bits\n\t * indicate 1500 tenths of a pixel.\n\t * <br />AA - 000000000000. Absolute y position of 0.\n\t * <br />I - 001100. First 3 bits (001) indicate a lineTo operation. 4th bit (1) indicates 3 chars per parameter.\n\t * <br />Au4 - 000000101110111000. An x delta of 300.0px, which is added to the previous x value of -150.0px to\n\t * provide an absolute position of +150.0px.\n\t * <br />AAA - 000000000000000000. A y delta value of 0.\n\t *\n\t * A tiny API method \"p\" also exists.\n\t * @method decodePath\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.decodePath = function(str) {\n\t\tvar instructions = [this.moveTo, this.lineTo, this.quadraticCurveTo, this.bezierCurveTo, this.closePath];\n\t\tvar paramCount = [2, 2, 4, 6, 0];\n\t\tvar i=0, l=str.length;\n\t\tvar params = [];\n\t\tvar x=0, y=0;\n\t\tvar base64 = Graphics.BASE_64;\n\n\t\twhile (i<l) {\n\t\t\tvar c = str.charAt(i);\n\t\t\tvar n = base64[c];\n\t\t\tvar fi = n>>3; // highest order bits 1-3 code for operation.\n\t\t\tvar f = instructions[fi];\n\t\t\t// check that we have a valid instruction & that the unused bits are empty:\n\t\t\tif (!f || (n&3)) { throw(\"bad path data (@\"+i+\"): \"+c); }\n\t\t\tvar pl = paramCount[fi];\n\t\t\tif (!fi) { x=y=0; } // move operations reset the position.\n\t\t\tparams.length = 0;\n\t\t\ti++;\n\t\t\tvar charCount = (n>>2&1)+2;  // 4th header bit indicates number size for this operation.\n\t\t\tfor (var p=0; p<pl; p++) {\n\t\t\t\tvar num = base64[str.charAt(i)];\n\t\t\t\tvar sign = (num>>5) ? -1 : 1;\n\t\t\t\tnum = ((num&31)<<6)|(base64[str.charAt(i+1)]);\n\t\t\t\tif (charCount == 3) { num = (num<<6)|(base64[str.charAt(i+2)]); }\n\t\t\t\tnum = sign*num/10;\n\t\t\t\tif (p%2) { x = (num += x); }\n\t\t\t\telse { y = (num += y); }\n\t\t\t\tparams[p] = num;\n\t\t\t\ti += charCount;\n\t\t\t}\n\t\t\tf.apply(this,params);\n\t\t}\n\t\treturn this;\n\t};\n\n\t/**\n\t * Stores all graphics commands so they won't be executed in future draws. Calling store() a second time adds to\n\t * the existing store. This also affects `drawAsPath()`.\n\t *\n\t * This is useful in cases where you are creating vector graphics in an iterative manner (ex. generative art), so\n\t * that only new graphics need to be drawn (which can provide huge performance benefits), but you wish to retain all\n\t * of the vector instructions for later use (ex. scaling, modifying, or exporting).\n\t *\n\t * Note that calling store() will force the active path (if any) to be ended in a manner similar to changing\n\t * the fill or stroke.\n\t *\n\t * For example, consider a application where the user draws lines with the mouse. As each line segment (or collection of\n\t * segments) are added to a Shape, it can be rasterized using {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}},\n\t * and then stored, so that it can be redrawn at a different scale when the application is resized, or exported to SVG.\n\t *\n\t * \t// set up cache:\n\t * \tmyShape.cache(0,0,500,500,scale);\n\t *\n\t * \t// when the user drags, draw a new line:\n\t * \tmyShape.graphics.moveTo(oldX,oldY).lineTo(newX,newY);\n\t * \t// then draw it into the existing cache:\n\t * \tmyShape.updateCache(\"source-over\");\n\t * \t// store the new line, so it isn't redrawn next time:\n\t * \tmyShape.store();\n\t *\n\t * \t// then, when the window resizes, we can re-render at a different scale:\n\t * \t// first, unstore all our lines:\n\t * \tmyShape.unstore();\n\t * \t// then cache using the new scale:\n\t * \tmyShape.cache(0,0,500,500,newScale);\n\t * \t// finally, store the existing commands again:\n\t * \tmyShape.store();\n\t *\n\t * @method store\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.store = function() {\n\t\tthis._updateInstructions(true);\n\t\tthis._storeIndex = this._instructions.length;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Unstores any graphics commands that were previously stored using {{#crossLink \"Graphics/store\"}}{{/crossLink}}\n\t * so that they will be executed in subsequent draw calls.\n\t *\n\t * @method unstore\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.unstore = function() {\n\t\tthis._storeIndex = 0;\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this Graphics instance. Note that the individual command objects are not cloned.\n\t * @method clone\n\t * @return {Graphics} A clone of the current Graphics instance.\n\t **/\n\tp.clone = function() {\n\t\tvar o = new Graphics();\n\t\to.command = this.command;\n\t\to._stroke = this._stroke;\n\t\to._strokeStyle = this._strokeStyle;\n\t\to._strokeDash = this._strokeDash;\n\t\to._strokeIgnoreScale = this._strokeIgnoreScale;\n\t\to._fill = this._fill;\n\t\to._instructions = this._instructions.slice();\n\t\to._commitIndex = this._commitIndex;\n\t\to._activeInstructions = this._activeInstructions.slice();\n\t\to._dirty = this._dirty;\n\t\to._storeIndex = this._storeIndex;\n\t\treturn o;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Graphics]\";\n\t};\n\n\n// tiny API:\n\t/**\n\t * Shortcut to moveTo.\n\t * @method mt\n\t * @param {Number} x The x coordinate the drawing point should move to.\n\t * @param {Number} y The y coordinate the drawing point should move to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls).\n\t * @chainable\n\t * @protected\n\t **/\n\tp.mt = p.moveTo;\n\n\t/**\n\t * Shortcut to lineTo.\n\t * @method lt\n\t * @param {Number} x The x coordinate the drawing point should draw to.\n\t * @param {Number} y The y coordinate the drawing point should draw to.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lt = p.lineTo;\n\n\t/**\n\t * Shortcut to arcTo.\n\t * @method at\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.at = p.arcTo;\n\n\t/**\n\t * Shortcut to bezierCurveTo.\n\t * @method bt\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bt = p.bezierCurveTo;\n\n\t/**\n\t * Shortcut to quadraticCurveTo / curveTo.\n\t * @method qt\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t * @chainable\n\t **/\n\tp.qt = p.quadraticCurveTo;\n\n\t/**\n\t * Shortcut to arc.\n\t * @method a\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle Measured in radians.\n\t * @param {Number} endAngle Measured in radians.\n\t * @param {Boolean} anticlockwise\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @protected\n\t * @chainable\n\t **/\n\tp.a = p.arc;\n\n\t/**\n\t * Shortcut to rect.\n\t * @method r\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.r = p.rect;\n\n\t/**\n\t * Shortcut to closePath.\n\t * @method cp\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.cp = p.closePath;\n\n\t/**\n\t * Shortcut to clear.\n\t * @method c\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.c = p.clear;\n\n\t/**\n\t * Shortcut to beginFill.\n\t * @method f\n\t * @param {String} color A CSS compatible color value (ex. \"red\", \"#FF0000\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no fill.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.f = p.beginFill;\n\n\t/**\n\t * Shortcut to beginLinearGradientFill.\n\t * @method lf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define a gradient\n\t * drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1, 0.9] would draw\n\t * the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.lf = p.beginLinearGradientFill;\n\n\t/**\n\t * Shortcut to beginRadialGradientFill.\n\t * @method rf\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rf = p.beginRadialGradientFill;\n\n\t/**\n\t * Shortcut to beginBitmapFill.\n\t * @method bf\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} repetition Optional. Indicates whether to repeat the image in the fill area. One of \"repeat\",\n\t * \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\". Note that Firefox does not support \"repeat-x\" or\n\t * \"repeat-y\" (latest tests were in FF 20.0), and will default to \"repeat\".\n\t * @param {Matrix2D} matrix Optional. Specifies a transformation matrix for the bitmap fill. This transformation\n\t * will be applied relative to the parent transform.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bf = p.beginBitmapFill;\n\n\t/**\n\t * Shortcut to endFill.\n\t * @method ef\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ef = p.endFill;\n\n\t/**\n\t * Shortcut to setStrokeStyle.\n\t * @method ss\n\t * @param {Number} thickness The width of the stroke.\n\t * @param {String | Number} [caps=0] Indicates the type of caps to use at the end of lines. One of butt,\n\t * round, or square. Defaults to \"butt\". Also accepts the values 0 (butt), 1 (round), and 2 (square) for use with\n\t * the tiny API.\n\t * @param {String | Number} [joints=0] Specifies the type of joints that should be used where two lines meet.\n\t * One of bevel, round, or miter. Defaults to \"miter\". Also accepts the values 0 (miter), 1 (round), and 2 (bevel)\n\t * for use with the tiny API.\n\t * @param {Number} [miterLimit=10] If joints is set to \"miter\", then you can specify a miter limit ratio which\n\t * controls at what point a mitered joint will be clipped.\n\t * @param {Boolean} [ignoreScale=false] If true, the stroke will be drawn at the specified thickness regardless\n\t * of active transformations.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ss = p.setStrokeStyle;\n\t\n\t/**\n\t * Shortcut to setStrokeDash.\n\t * @method sd\n\t * @param {Array} [segments] An array specifying the dash pattern, alternating between line and gap.\n\t * For example, [20,10] would create a pattern of 20 pixel lines with 10 pixel gaps between them.\n\t * Passing null or an empty array will clear any existing dash.\n\t * @param {Number} [offset=0] The offset of the dash pattern. For example, you could increment this value to create a \"marching ants\" effect.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.sd = p.setStrokeDash;\n\n\t/**\n\t * Shortcut to beginStroke.\n\t * @method s\n\t * @param {String} color A CSS compatible color value (ex. \"#FF0000\", \"red\", or \"rgba(255,0,0,0.5)\"). Setting to\n\t * null will result in no stroke.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.s = p.beginStroke;\n\n\t/**\n\t * Shortcut to beginLinearGradientStroke.\n\t * @method ls\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%.\n\t * @param {Number} x0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} y0 The position of the first point defining the line that defines the gradient direction and size.\n\t * @param {Number} x1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @param {Number} y1 The position of the second point defining the line that defines the gradient direction and size.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.ls = p.beginLinearGradientStroke;\n\n\t/**\n\t * Shortcut to beginRadialGradientStroke.\n\t * @method rs\n\t * @param {Array} colors An array of CSS compatible color values. For example, [\"#F00\",\"#00F\"] would define\n\t * a gradient drawing from red to blue.\n\t * @param {Array} ratios An array of gradient positions which correspond to the colors. For example, [0.1,\n\t * 0.9] would draw the first color to 10% then interpolating to the second color at 90%, then draw the second color\n\t * to 100%.\n\t * @param {Number} x0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} y0 Center position of the inner circle that defines the gradient.\n\t * @param {Number} r0 Radius of the inner circle that defines the gradient.\n\t * @param {Number} x1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} y1 Center position of the outer circle that defines the gradient.\n\t * @param {Number} r1 Radius of the outer circle that defines the gradient.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rs = p.beginRadialGradientStroke;\n\n\t/**\n\t * Shortcut to beginBitmapStroke.\n\t * @method bs\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image The Image, Canvas, or Video object to use\n\t * as the pattern.\n\t * @param {String} [repetition=repeat] Optional. Indicates whether to repeat the image in the fill area. One of\n\t * \"repeat\", \"repeat-x\", \"repeat-y\", or \"no-repeat\". Defaults to \"repeat\".\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.bs = p.beginBitmapStroke;\n\n\t/**\n\t * Shortcut to endStroke.\n\t * @method es\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.es = p.endStroke;\n\n\t/**\n\t * Shortcut to drawRect.\n\t * @method dr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w Width of the rectangle\n\t * @param {Number} h Height of the rectangle\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dr = p.drawRect;\n\n\t/**\n\t * Shortcut to drawRoundRect.\n\t * @method rr\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radius Corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rr = p.drawRoundRect;\n\n\t/**\n\t * Shortcut to drawRoundRectComplex.\n\t * @method rc\n\t * @param {Number} x The horizontal coordinate to draw the round rect.\n\t * @param {Number} y The vertical coordinate to draw the round rect.\n\t * @param {Number} w The width of the round rect.\n\t * @param {Number} h The height of the round rect.\n\t * @param {Number} radiusTL Top left corner radius.\n\t * @param {Number} radiusTR Top right corner radius.\n\t * @param {Number} radiusBR Bottom right corner radius.\n\t * @param {Number} radiusBL Bottom left corner radius.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.rc = p.drawRoundRectComplex;\n\n\t/**\n\t * Shortcut to drawCircle.\n\t * @method dc\n\t * @param {Number} x x coordinate center point of circle.\n\t * @param {Number} y y coordinate center point of circle.\n\t * @param {Number} radius Radius of circle.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dc = p.drawCircle;\n\n\t/**\n\t * Shortcut to drawEllipse.\n\t * @method de\n\t * @param {Number} x The left coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from center.\n\t * @param {Number} y The top coordinate point of the ellipse. Note that this is different from {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}}\n\t * which draws from the center.\n\t * @param {Number} w The height (horizontal diameter) of the ellipse. The horizontal radius will be half of this\n\t * number.\n\t * @param {Number} h The width (vertical diameter) of the ellipse. The vertical radius will be half of this number.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.de = p.drawEllipse;\n\n\t/**\n\t * Shortcut to drawPolyStar.\n\t * @method dp\n\t * @param {Number} x Position of the center of the shape.\n\t * @param {Number} y Position of the center of the shape.\n\t * @param {Number} radius The outer radius of the shape.\n\t * @param {Number} sides The number of points on the star or sides on the polygon.\n\t * @param {Number} pointSize The depth or \"pointy-ness\" of the star points. A pointSize of 0 will draw a regular\n\t * polygon (no points), a pointSize of 1 will draw nothing because the points are infinitely pointy.\n\t * @param {Number} angle The angle of the first point / corner. For example a value of 0 will draw the first point\n\t * directly to the right of the center.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.dp = p.drawPolyStar;\n\n\t/**\n\t * Shortcut to decodePath.\n\t * @method p\n\t * @param {String} str The path string to decode.\n\t * @return {Graphics} The Graphics instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t * @protected\n\t **/\n\tp.p = p.decodePath;\n\n\n// private methods:\n\t/**\n\t * @method _updateInstructions\n\t * @param commit\n\t * @protected\n\t **/\n\tp._updateInstructions = function(commit) {\n\t\tvar instr = this._instructions, active = this._activeInstructions, commitIndex = this._commitIndex;\n\n\t\tif (this._dirty && active.length) {\n\t\t\tinstr.length = commitIndex; // remove old, uncommitted commands\n\t\t\tinstr.push(Graphics.beginCmd);\n\n\t\t\tvar l = active.length, ll = instr.length;\n\t\t\tinstr.length = ll+l;\n\t\t\tfor (var i=0; i<l; i++) { instr[i+ll] = active[i]; }\n\n\t\t\tif (this._fill) { instr.push(this._fill); }\n\t\t\tif (this._stroke) {\n\t\t\t\t// doesn't need to be re-applied if it hasn't changed.\n\t\t\t\tif (this._strokeDash !== this._oldStrokeDash) {\n\t\t\t\t\tinstr.push(this._strokeDash);\n\t\t\t\t}\n\t\t\t\tif (this._strokeStyle !== this._oldStrokeStyle) {\n\t\t\t\t\tinstr.push(this._strokeStyle);\n\t\t\t\t}\n\t\t\t\tif (commit) {\n\t\t\t\t\tthis._oldStrokeStyle = this._strokeStyle;\n\t\t\t\t\tthis._oldStrokeDash = this._strokeDash;\n\t\t\t\t}\n\t\t\t\tinstr.push(this._stroke);\n\t\t\t}\n\n\t\t\tthis._dirty = false;\n\t\t}\n\n\t\tif (commit) {\n\t\t\tactive.length = 0;\n\t\t\tthis._commitIndex = instr.length;\n\t\t}\n\t};\n\n\t/**\n\t * @method _setFill\n\t * @param fill\n\t * @protected\n\t **/\n\tp._setFill = function(fill) {\n\t\tthis._updateInstructions(true);\n\t\tthis.command = this._fill = fill;\n\t\treturn this;\n\t};\n\n\t/**\n\t * @method _setStroke\n\t * @param stroke\n\t * @protected\n\t **/\n\tp._setStroke = function(stroke) {\n\t\tthis._updateInstructions(true);\n\t\tif (this.command = this._stroke = stroke) {\n\t\t\tstroke.ignoreScale = this._strokeIgnoreScale;\n\t\t}\n\t\treturn this;\n\t};\n\n// Command Objects:\n\t/**\n\t * @namespace Graphics\n\t */\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/lineTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class LineTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.LineTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.lineTo(this.x,this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/moveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class MoveTo\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx\n\t */\n\t(G.MoveTo = function(x, y) {\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.moveTo(this.x, this.y); };\n\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arcTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ArcTo\n\t * @constructor\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} x2\n\t * @param {Number} y2\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x1\n\t * @type Number\n\t */\n\t/**\n\t * @property y1\n\t * @type Number\n\t */\n\t/**\n\t * @property x2\n\t * @type Number\n\t */\n\t/**\n\t * @property y2\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ArcTo = function(x1, y1, x2, y2, radius) {\n\t\tthis.x1 = x1; this.y1 = y1;\n\t\tthis.x2 = x2; this.y2 = y2;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arcTo(this.x1, this.y1, this.x2, this.y2, this.radius); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/arc\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Arc\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} startAngle\n\t * @param {Number} endAngle\n\t * @param {Number} anticlockwise\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property startAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property endAngle\n\t * @type Number\n\t */\n\t/**\n\t * @property anticlockwise\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Arc = function(x, y, radius, startAngle, endAngle, anticlockwise) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.startAngle = startAngle; this.endAngle = endAngle;\n\t\tthis.anticlockwise = !!anticlockwise;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, this.startAngle, this.endAngle, this.anticlockwise); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/quadraticCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class QuadraticCurveTo\n\t * @constructor\n\t * @param {Number} cpx\n\t * @param {Number} cpy\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cpx\n\t * @type Number\n\t */\n\t/**\n\t * @property cpy\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.QuadraticCurveTo = function(cpx, cpy, x, y) {\n\t\tthis.cpx = cpx; this.cpy = cpy;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.quadraticCurveTo(this.cpx, this.cpy, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/bezierCurveTo\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BezierCurveTo\n\t * @constructor\n\t * @param {Number} cp1x\n\t * @param {Number} cp1y\n\t * @param {Number} cp2x\n\t * @param {Number} cp2y\n\t * @param {Number} x\n\t * @param {Number} y\n\t **/\n\t/**\n\t * @property cp1x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp1y\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2x\n\t * @type Number\n\t */\n\t/**\n\t * @property cp2y\n\t * @type Number\n\t */\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BezierCurveTo = function(cp1x, cp1y, cp2x, cp2y, x, y) {\n\t\tthis.cp1x = cp1x; this.cp1y = cp1y;\n\t\tthis.cp2x = cp2x; this.cp2y = cp2y;\n\t\tthis.x = x; this.y = y;\n\t}).prototype.exec = function(ctx) { ctx.bezierCurveTo(this.cp1x, this.cp1y, this.cp2x, this.cp2y, this.x, this.y); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/rect\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Rect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Rect = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) { ctx.rect(this.x, this.y, this.w, this.h); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/closePath\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class ClosePath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.ClosePath = function() {\n\t}).prototype.exec = function(ctx) { ctx.closePath(); };\n\n\t/**\n\t * Graphics command object to begin a new path. See {{#crossLink \"Graphics\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class BeginPath\n\t * @constructor\n\t **/\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.BeginPath = function() {\n\t}).prototype.exec = function(ctx) { ctx.beginPath(); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginFill\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Fill\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Matrix2D} matrix\n\t **/\n\t/**\n\t * A valid Context2D fillStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property matrix\n\t * @type Matrix2D\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Fill = function(style, matrix) {\n\t\tthis.style = style;\n\t\tthis.matrix = matrix;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.fillStyle = this.style;\n\t\tvar mtx = this.matrix;\n\t\tif (mtx) { ctx.save(); ctx.transform(mtx.a, mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty); }\n\t\tctx.fill();\n\t\tif (mtx) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientFill\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t *\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.linearGradient = function(colors, ratios, x0, y0, x1, y1) {\n\t\tvar o = this.style =  Graphics._ctx.createLinearGradient(x0, y0, x1, y1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, x1:x1, y1:y1, type:\"linear\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientFill\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.radialGradient = function(colors, ratios, x0, y0, r0, x1, y1, r1) {\n\t\tvar o = this.style =  Graphics._ctx.createRadialGradient(x0, y0, r0, x1, y1, r1);\n\t\tfor (var i=0, l=colors.length; i<l; i++) { o.addColorStop(ratios[i], colors[i]); }\n\t\to.props = {colors:colors, ratios:ratios, x0:x0, y0:y0, r0:r0, x1:x1, y1:y1, r1:r1, type:\"radial\"};\n\t\treturn this;\n\t};\n\t/**\n\t * Creates a bitmap fill style and assigns it to the {{#crossLink \"Fill/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapFill\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement} image  Must be loaded prior to creating a bitmap fill, or the fill will be empty.\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Fill object for chaining or assignment.\n\t */\n\tp.bitmap = function(image, repetition) {\n\t\tif (image.naturalWidth || image.getContext || image.readyState >= 2) {\n\t\t\tvar o = this.style = Graphics._ctx.createPattern(image, repetition || \"\");\n\t\t\to.props = {image: image, repetition: repetition, type: \"bitmap\"};\n\t\t}\n\t\treturn this;\n\t};\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/beginStroke\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Stroke\n\t * @constructor\n\t * @param {Object} style A valid Context2D fillStyle.\n\t * @param {Boolean} ignoreScale\n\t **/\n\t/**\n\t * A valid Context2D strokeStyle.\n\t * @property style\n\t * @type Object\n\t */\n\t/**\n\t * @property ignoreScale\n\t * @type Boolean\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.Stroke = function(style, ignoreScale) {\n\t\tthis.style = style;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tif (!this.style) { return; }\n\t\tctx.strokeStyle = this.style;\n\t\tif (this.ignoreScale) { ctx.save(); ctx.setTransform(1,0,0,1,0,0); }\n\t\tctx.stroke();\n\t\tif (this.ignoreScale) { ctx.restore(); }\n\t};\n\t/**\n\t * Creates a linear gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginLinearGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method linearGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.linearGradient = G.Fill.prototype.linearGradient;\n\t/**\n\t * Creates a radial gradient style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginRadialGradientStroke\"}}{{/crossLink}} for more information.\n\t * @method radialGradient\n\t * @param {Array} colors\n\t * @param {Array} ratios\n\t * @param {Number} x0\n\t * @param {Number} y0\n\t * @param {Number} r0\n\t * @param {Number} x1\n\t * @param {Number} y1\n\t * @param {Number} r1\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.radialGradient = G.Fill.prototype.radialGradient;\n\t/**\n\t * Creates a bitmap fill style and assigns it to {{#crossLink \"Stroke/style:property\"}}{{/crossLink}}.\n\t * See {{#crossLink \"Graphics/beginBitmapStroke\"}}{{/crossLink}} for more information.\n\t * @method bitmap\n\t * @param {HTMLImageElement} image\n\t * @param {String} [repetition] One of: repeat, repeat-x, repeat-y, or no-repeat.\n\t * @return {Fill} Returns this Stroke object for chaining or assignment.\n\t */\n\tp.bitmap = G.Fill.prototype.bitmap;\n\tp.path = false;\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeStyle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeStyle\n\t * @constructor\n\t * @param {Number} width\n\t * @param {String} [caps=butt]\n\t * @param {String} [joints=miter]\n\t * @param {Number} [miterLimit=10]\n\t * @param {Boolean} [ignoreScale=false]\n\t **/\n\t/**\n\t * @property width\n\t * @type Number\n\t */\n\t/**\n\t * One of: butt, round, square\n\t * @property caps\n\t * @type String\n\t */\n\t/**\n\t * One of: round, bevel, miter\n\t * @property joints\n\t * @type String\n\t */\n\t/**\n\t * @property miterLimit\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\tp = (G.StrokeStyle = function(width, caps, joints, miterLimit, ignoreScale) {\n\t\tthis.width = width;\n\t\tthis.caps = caps;\n\t\tthis.joints = joints;\n\t\tthis.miterLimit = miterLimit;\n\t\tthis.ignoreScale = ignoreScale;\n\t}).prototype;\n\tp.exec = function(ctx) {\n\t\tctx.lineWidth = (this.width == null ? \"1\" : this.width);\n\t\tctx.lineCap = (this.caps == null ? \"butt\" : (isNaN(this.caps) ? this.caps : Graphics.STROKE_CAPS_MAP[this.caps]));\n\t\tctx.lineJoin = (this.joints == null ? \"miter\" : (isNaN(this.joints) ? this.joints : Graphics.STROKE_JOINTS_MAP[this.joints]));\n\t\tctx.miterLimit = (this.miterLimit == null ? \"10\" : this.miterLimit);\n\t\tctx.ignoreScale = (this.ignoreScale == null ? false : this.ignoreScale);\n\t};\n\tp.path = false;\n\t\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/setStrokeDash\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class StrokeDash\n\t * @constructor\n\t * @param {Array} [segments]\n\t * @param {Number} [offset=0]\n\t **/\n\t/**\n\t * @property segments\n\t * @type Array\n\t */\n\t/**\n\t * @property offset\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.StrokeDash = function(segments, offset) {\n\t\tthis.segments = segments;\n\t\tthis.offset = offset||0;\n\t}).prototype.exec = function(ctx) {\n\t\tif (ctx.setLineDash) { // feature detection.\n\t\t\tctx.setLineDash(this.segments|| G.StrokeDash.EMPTY_SEGMENTS); // instead of [] to reduce churn.\n\t\t\tctx.lineDashOffset = this.offset||0;\n\t\t}\n\t};\n\t/**\n\t * The default value for segments (ie. no dash).\n\t * @property EMPTY_SEGMENTS\n\t * @static\n\t * @final\n\t * @readonly\n\t * @protected\n\t * @type {Array}\n\t **/\n\tG.StrokeDash.EMPTY_SEGMENTS = [];\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawRoundRectComplex\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class RoundRect\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t * @param {Number} radiusTL\n\t * @param {Number} radiusTR\n\t * @param {Number} radiusBR\n\t * @param {Number} radiusBL\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTL\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusTR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBR\n\t * @type Number\n\t */\n\t/**\n\t * @property radiusBL\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.RoundRect = function(x, y, w, h, radiusTL, radiusTR, radiusBR, radiusBL) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t\tthis.radiusTL = radiusTL; this.radiusTR = radiusTR;\n\t\tthis.radiusBR = radiusBR; this.radiusBL = radiusBL;\n\t}).prototype.exec = function(ctx) {\n\t\tvar max = (w<h?w:h)/2;\n\t\tvar mTL=0, mTR=0, mBR=0, mBL=0;\n\t\tvar x = this.x, y = this.y, w = this.w, h = this.h;\n\t\tvar rTL = this.radiusTL, rTR = this.radiusTR, rBR = this.radiusBR, rBL = this.radiusBL;\n\n\t\tif (rTL < 0) { rTL *= (mTL=-1); }\n\t\tif (rTL > max) { rTL = max; }\n\t\tif (rTR < 0) { rTR *= (mTR=-1); }\n\t\tif (rTR > max) { rTR = max; }\n\t\tif (rBR < 0) { rBR *= (mBR=-1); }\n\t\tif (rBR > max) { rBR = max; }\n\t\tif (rBL < 0) { rBL *= (mBL=-1); }\n\t\tif (rBL > max) { rBL = max; }\n\n\t\tctx.moveTo(x+w-rTR, y);\n\t\tctx.arcTo(x+w+rTR*mTR, y-rTR*mTR, x+w, y+rTR, rTR);\n\t\tctx.lineTo(x+w, y+h-rBR);\n\t\tctx.arcTo(x+w+rBR*mBR, y+h+rBR*mBR, x+w-rBR, y+h, rBR);\n\t\tctx.lineTo(x+rBL, y+h);\n\t\tctx.arcTo(x-rBL*mBL, y+h+rBL*mBL, x, y+h-rBL, rBL);\n\t\tctx.lineTo(x, y+rTL);\n\t\tctx.arcTo(x-rTL*mTL, y-rTL*mTL, x+rTL, y, rTL);\n\t\tctx.closePath();\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawCircle\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Circle\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Circle = function(x, y, radius) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t}).prototype.exec = function(ctx) { ctx.arc(this.x, this.y, this.radius, 0, Math.PI*2); };\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawEllipse\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class Ellipse\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} w\n\t * @param {Number} h\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property w\n\t * @type Number\n\t */\n\t/**\n\t * @property h\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.Ellipse = function(x, y, w, h) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.w = w; this.h = h;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar w = this.w, h = this.h;\n\n\t\tvar k = 0.5522848;\n\t\tvar ox = (w / 2) * k;\n\t\tvar oy = (h / 2) * k;\n\t\tvar xe = x + w;\n\t\tvar ye = y + h;\n\t\tvar xm = x + w / 2;\n\t\tvar ym = y + h / 2;\n\n\t\tctx.moveTo(x, ym);\n\t\tctx.bezierCurveTo(x, ym-oy, xm-ox, y, xm, y);\n\t\tctx.bezierCurveTo(xm+ox, y, xe, ym-oy, xe, ym);\n\t\tctx.bezierCurveTo(xe, ym+oy, xm+ox, ye, xm, ye);\n\t\tctx.bezierCurveTo(xm-ox, ye, x, ym+oy, x, ym);\n\t};\n\n\t/**\n\t * Graphics command object. See {{#crossLink \"Graphics/drawPolyStar\"}}{{/crossLink}} and {{#crossLink \"Graphics/append\"}}{{/crossLink}} for more information.\n\t * @class PolyStar\n\t * @constructor\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @param {Number} radius\n\t * @param {Number} sides\n\t * @param {Number} pointSize\n\t * @param {Number} angle\n\t **/\n\t/**\n\t * @property x\n\t * @type Number\n\t */\n\t/**\n\t * @property y\n\t * @type Number\n\t */\n\t/**\n\t * @property radius\n\t * @type Number\n\t */\n\t/**\n\t * @property sides\n\t * @type Number\n\t */\n\t/**\n\t * @property pointSize\n\t * @type Number\n\t */\n\t/**\n\t * @property angle\n\t * @type Number\n\t */\n\t/**\n\t * Execute the Graphics command in the provided Canvas context.\n\t * @method exec\n\t * @param {CanvasRenderingContext2D} ctx The canvas rendering context\n\t */\n\t(G.PolyStar = function(x, y, radius, sides, pointSize, angle) {\n\t\tthis.x = x; this.y = y;\n\t\tthis.radius = radius;\n\t\tthis.sides = sides;\n\t\tthis.pointSize = pointSize;\n\t\tthis.angle = angle;\n\t}).prototype.exec = function(ctx) {\n\t\tvar x = this.x, y = this.y;\n\t\tvar radius = this.radius;\n\t\tvar angle = (this.angle||0)/180*Math.PI;\n\t\tvar sides = this.sides;\n\t\tvar ps = 1-(this.pointSize||0);\n\t\tvar a = Math.PI/sides;\n\n\t\tctx.moveTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\tfor (var i=0; i<sides; i++) {\n\t\t\tangle += a;\n\t\t\tif (ps != 1) {\n\t\t\t\tctx.lineTo(x+Math.cos(angle)*radius*ps, y+Math.sin(angle)*radius*ps);\n\t\t\t}\n\t\t\tangle += a;\n\t\t\tctx.lineTo(x+Math.cos(angle)*radius, y+Math.sin(angle)*radius);\n\t\t}\n\t\tctx.closePath();\n\t};\n\n\t// docced above.\n\tGraphics.beginCmd = new G.BeginPath(); // so we don't have to instantiate multiple instances.\n\n\n\tcreatejs.Graphics = Graphics;\n}());\n\n//##############################################################################\n// DisplayObject.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\r\n\r\n// constructor:\r\n\t/**\r\n\t * DisplayObject is an abstract class that should not be constructed directly. Instead construct subclasses such as\r\n\t * {{#crossLink \"Container\"}}{{/crossLink}}, {{#crossLink \"Bitmap\"}}{{/crossLink}}, and {{#crossLink \"Shape\"}}{{/crossLink}}.\r\n\t * DisplayObject is the base class for all display classes in the EaselJS library. It defines the core properties and\r\n\t * methods that are shared between all display objects, such as transformation properties (x, y, scaleX, scaleY, etc),\r\n\t * caching, and mouse handlers.\r\n\t * @class DisplayObject\r\n\t * @extends EventDispatcher\r\n\t * @constructor\r\n\t **/\r\n\tfunction DisplayObject() {\r\n\t\tthis.EventDispatcher_constructor();\r\n\r\n\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The alpha (transparency) for this display object. 0 is fully transparent, 1 is fully opaque.\r\n\t\t * @property alpha\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.alpha = 1;\r\n\r\n\t\t/**\r\n\t\t * If a cache is active, this returns the canvas that holds the image of this display object. See {{#crossLink \"DisplayObject/cache:method\"}}{{/crossLink}}\r\n\t\t * for more information. Use this to display the result of a cache. This will be a HTMLCanvasElement unless special cache rules have been deliberately enabled for this cache.\r\n\t\t * @property cacheCanvas\r\n\t\t * @type {HTMLCanvasElement | Object}\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.cacheCanvas = null;\r\n\r\n\t\t/**\r\n\t\t * If a cache has been made, this returns the class that is managing the cacheCanvas and its properties. See {{#crossLink \"BitmapCache\"}}{{/crossLink}}\r\n\t\t * for more information. Use this to control, inspect, and change the cache. In special circumstances this may be a modified or subclassed BitmapCache.\r\n\t\t * @property bitmapCache\r\n\t\t * @type {BitmapCache}\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.bitmapCache = null;\r\n\r\n\t\t/**\r\n\t\t * Unique ID for this display object. Makes display objects easier for some uses.\r\n\t\t * @property id\r\n\t\t * @type {Number}\r\n\t\t * @default -1\r\n\t\t **/\r\n\t\tthis.id = createjs.UID.get();\r\n\r\n\t\t/**\r\n\t\t * Indicates whether to include this object when running mouse interactions. Setting this to `false` for children\r\n\t\t * of a {{#crossLink \"Container\"}}{{/crossLink}} will cause events on the Container to not fire when that child is\r\n\t\t * clicked. Setting this property to `false` does not prevent the {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}\r\n\t\t * method from returning the child.\r\n\t\t *\r\n\t\t * <strong>Note:</strong> In EaselJS 0.7.0, the mouseEnabled property will not work properly with nested Containers. Please\r\n\t\t * check out the latest NEXT version in <a href=\"https://github.com/CreateJS/EaselJS/tree/master/lib\">GitHub</a> for an updated version with this issue resolved. The fix will be\r\n\t\t * provided in the next release of EaselJS.\r\n\t\t * @property mouseEnabled\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.mouseEnabled = true;\r\n\r\n\t\t/**\r\n\t\t * If false, the tick will not run on this display object (or its children). This can provide some performance benefits.\r\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\r\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, and DOMElement display properties).\r\n\t\t * @property tickEnabled\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.tickEnabled = true;\r\n\r\n\t\t/**\r\n\t\t * An optional name for this display object. Included in {{#crossLink \"DisplayObject/toString\"}}{{/crossLink}} . Useful for\r\n\t\t * debugging.\r\n\t\t * @property name\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.name = null;\r\n\r\n\t\t/**\r\n\t\t * A reference to the {{#crossLink \"Container\"}}{{/crossLink}} or {{#crossLink \"Stage\"}}{{/crossLink}} object that\r\n\t\t * contains this display object, or null if it has not been added\r\n\t\t * to one.\r\n\t\t * @property parent\r\n\t\t * @final\r\n\t\t * @type {Container}\r\n\t\t * @default null\r\n\t\t * @readonly\r\n\t\t **/\r\n\t\tthis.parent = null;\r\n\r\n\t\t/**\r\n\t\t * The left offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate\r\n\t\t * around its center, you would set regX and {{#crossLink \"DisplayObject/regY:property\"}}{{/crossLink}} to 50.\r\n\t\t * Cached object's registration points should be set based on pre-cache conditions, not cached size.\r\n\t\t * @property regX\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.regX = 0;\r\n\r\n\t\t/**\r\n\t\t * The y offset for this display object's registration point. For example, to make a 100x100px Bitmap rotate around\r\n\t\t * its center, you would set {{#crossLink \"DisplayObject/regX:property\"}}{{/crossLink}} and regY to 50.\r\n\t\t * Cached object's registration points should be set based on pre-cache conditions, not cached size.\r\n\t\t * @property regY\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.regY = 0;\r\n\r\n\t\t/**\r\n\t\t * The rotation in degrees for this display object.\r\n\t\t * @property rotation\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.rotation = 0;\r\n\r\n\t\t/**\r\n\t\t * The factor to stretch this display object horizontally. For example, setting scaleX to 2 will stretch the display\r\n\t\t * object to twice its nominal width. To horizontally flip an object, set the scale to a negative number.\r\n\t\t * @property scaleX\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.scaleX = 1;\r\n\r\n\t\t/**\r\n\t\t * The factor to stretch this display object vertically. For example, setting scaleY to 0.5 will stretch the display\r\n\t\t * object to half its nominal height. To vertically flip an object, set the scale to a negative number.\r\n\t\t * @property scaleY\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t **/\r\n\t\tthis.scaleY = 1;\r\n\r\n\t\t/**\r\n\t\t * The factor to skew this display object horizontally.\r\n\t\t * @property skewX\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.skewX = 0;\r\n\r\n\t\t/**\r\n\t\t * The factor to skew this display object vertically.\r\n\t\t * @property skewY\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.skewY = 0;\r\n\r\n\t\t/**\r\n\t\t * A shadow object that defines the shadow to render on this display object. Set to `null` to remove a shadow. If\r\n\t\t * null, this property is inherited from the parent container.\r\n\t\t * @property shadow\r\n\t\t * @type {Shadow}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.shadow = null;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this display object should be rendered to the canvas and included when running the Stage\r\n\t\t * {{#crossLink \"Stage/getObjectsUnderPoint\"}}{{/crossLink}} method.\r\n\t\t * @property visible\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.visible = true;\r\n\r\n\t\t/**\r\n\t\t * The x (horizontal) position of the display object, relative to its parent.\r\n\t\t * @property x\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.x = 0;\r\n\r\n\t\t/** The y (vertical) position of the display object, relative to its parent.\r\n\t\t * @property y\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t **/\r\n\t\tthis.y = 0;\r\n\r\n\t\t/**\r\n\t\t * If set, defines the transformation for this display object, overriding all other transformation properties\r\n\t\t * (x, y, rotation, scale, skew).\r\n\t\t * @property transformMatrix\r\n\t\t * @type {Matrix2D}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.transformMatrix = null;\r\n\r\n\t\t/**\r\n\t\t * The composite operation indicates how the pixels of this display object will be composited with the elements\r\n\t\t * behind it. If `null`, this property is inherited from the parent container. For more information, read the\r\n\t\t * <a href=\"https://html.spec.whatwg.org/multipage/scripting.html#dom-context-2d-globalcompositeoperation\">\r\n\t\t * whatwg spec on compositing</a>. For a list of supported compositeOperation value, visit\r\n\t\t * <a href=\"https://drafts.fxtf.org/compositing/\">the W3C draft on Compositing and Blending</a>.\r\n\t\t * @property compositeOperation\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.compositeOperation = null;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the display object should be drawn to a whole pixel when\r\n\t\t * {{#crossLink \"Stage/snapToPixelEnabled\"}}{{/crossLink}} is true. To enable/disable snapping on whole\r\n\t\t * categories of display objects, set this value on the prototype (Ex. Text.prototype.snapToPixel = true).\r\n\t\t * @property snapToPixel\r\n\t\t * @type {Boolean}\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.snapToPixel = true;\r\n\r\n\t\t/**\r\n\t\t * An array of Filter objects to apply to this display object. Filters are only applied / updated when {{#crossLink \"cache\"}}{{/crossLink}}\r\n\t\t * or {{#crossLink \"updateCache\"}}{{/crossLink}} is called on the display object, and only apply to the area that is\r\n\t\t * cached.\r\n\t\t * @property filters\r\n\t\t * @type {Array}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.filters = null;\r\n\r\n\t\t/**\r\n\t\t * A Shape instance that defines a vector mask (clipping path) for this display object.  The shape's transformation\r\n\t\t * will be applied relative to the display object's parent coordinates (as if it were a child of the parent).\r\n\t\t * @property mask\r\n\t\t * @type {Shape}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.mask = null;\r\n\r\n\t\t/**\r\n\t\t * A display object that will be tested when checking mouse interactions or testing {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}.\r\n\t\t * The hit area will have its transformation applied relative to this display object's coordinate space (as though\r\n\t\t * the hit test object were a child of this display object and relative to its regX/Y). The hitArea will be tested\r\n\t\t * using only its own `alpha` value regardless of the alpha value on the target display object, or the target's\r\n\t\t * ancestors (parents).\r\n\t\t * \r\n\t\t * If set on a {{#crossLink \"Container\"}}{{/crossLink}}, children of the Container will not receive mouse events.\r\n\t\t * This is similar to setting {{#crossLink \"mouseChildren\"}}{{/crossLink}} to false.\r\n\t\t *\r\n\t\t * Note that hitArea is NOT currently used by the `hitTest()` method, nor is it supported for {{#crossLink \"Stage\"}}{{/crossLink}}.\r\n\t\t * @property hitArea\r\n\t\t * @type {DisplayObject}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.hitArea = null;\r\n\r\n\t\t/**\r\n\t\t * A CSS cursor (ex. \"pointer\", \"help\", \"text\", etc) that will be displayed when the user hovers over this display\r\n\t\t * object. You must enable mouseover events using the {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}} method to\r\n\t\t * use this property. Setting a non-null cursor on a Container will override the cursor set on its descendants.\r\n\t\t * @property cursor\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t */\r\n\t\tthis.cursor = null;\r\n\r\n\r\n\t// private properties:\r\n\t\t/**\r\n\t\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\r\n\t\t * @property _cacheScale\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 1\r\n\t\t * @deprecated\r\n\t\t **/\r\n\r\n\t\t/**\r\n\t\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\r\n\t\t * @property _cacheDataURLID\r\n\t\t * @protected\r\n\t\t * @type {Number}\r\n\t\t * @default 0\r\n\t\t * @deprecated\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\r\n\t\t * @property _cacheDataURL\r\n\t\t * @protected\r\n\t\t * @type {String}\r\n\t\t * @default null\r\n\t\t * @deprecated\r\n\t\t */\r\n\r\n\t\t/**\r\n\t\t * @property _props\r\n\t\t * @protected\r\n\t\t * @type {DisplayObject}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._props = new createjs.DisplayProps();\r\n\r\n\t\t/**\r\n\t\t * @property _rectangle\r\n\t\t * @protected\r\n\t\t * @type {Rectangle}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._rectangle = new createjs.Rectangle();\r\n\r\n\t\t/**\r\n\t\t * @property _bounds\r\n\t\t * @protected\r\n\t\t * @type {Rectangle}\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis._bounds = null;\r\n\r\n\t\t/**\r\n\t\t * Where StageGL should look for required display properties, matters only for leaf display objects. Containers\r\n\t\t * or cached objects won't use this property, it's for native display of terminal elements.\r\n\t\t * @property _webGLRenderStyle\r\n\t\t * @protected\r\n\t\t * @type {number}\r\n\t\t * @default 0\r\n\t\t */\r\n\t\tthis._webGLRenderStyle = DisplayObject._StageGL_NONE;\r\n\t}\r\n\tvar p = createjs.extend(DisplayObject, createjs.EventDispatcher);\r\n\r\n// static properties:\r\n\t/**\r\n\t * Listing of mouse event names. Used in _hasMouseEventListener.\r\n\t * @property _MOUSE_EVENTS\r\n\t * @protected\r\n\t * @static\r\n\t * @type {Array}\r\n\t **/\r\n\tDisplayObject._MOUSE_EVENTS = [\"click\",\"dblclick\",\"mousedown\",\"mouseout\",\"mouseover\",\"pressmove\",\"pressup\",\"rollout\",\"rollover\"];\r\n\r\n\t/**\r\n\t * Suppresses errors generated when using features like hitTest, mouse events, and {{#crossLink \"getObjectsUnderPoint\"}}{{/crossLink}}\r\n\t * with cross domain content.\r\n\t * @property suppressCrossDomainErrors\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tDisplayObject.suppressCrossDomainErrors = false;\r\n\r\n\t/**\r\n\t * @property _snapToPixelEnabled\r\n\t * @protected\r\n\t * @static\r\n\t * @type {Boolean}\r\n\t * @default false\r\n\t **/\r\n\tDisplayObject._snapToPixelEnabled = false; // stage.snapToPixelEnabled is temporarily copied here during a draw to provide global access.\r\n\r\n\t/**\r\n\t * Enum like property for determining StageGL render lookup, i.e. where to expect properties.\r\n\t * @property _StageGL_NONE\r\n\t * @protected\r\n\t * @static\r\n\t * @type {number}\r\n\t */\r\n\tDisplayObject._StageGL_NONE = 0;\r\n\r\n\t/**\r\n\t * Enum like property for determining StageGL render lookup, i.e. where to expect properties.\r\n\t * @property _StageGL_SPRITE\r\n\t * @protected\r\n\t * @static\r\n\t * @type {number}\r\n\t */\r\n\tDisplayObject._StageGL_SPRITE = 1;\r\n\r\n\t/**\r\n\t * Enum like property for determining StageGL render lookup, i.e. where to expect properties.\r\n\t * @property _StageGL_BITMAP\r\n\t * @protected\r\n\t * @static\r\n\t * @type {number}\r\n\t */\r\n\tDisplayObject._StageGL_BITMAP = 2;\r\n\r\n\t/**\r\n\t * @property _hitTestCanvas\r\n\t * @type {HTMLCanvasElement | Object}\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\t/**\r\n\t * @property _hitTestContext\r\n\t * @type {CanvasRenderingContext2D}\r\n\t * @static\r\n\t * @protected\r\n\t **/\r\n\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"); // prevent errors on load in browsers without canvas.\r\n\tif (canvas.getContext) {\r\n\t\tDisplayObject._hitTestCanvas = canvas;\r\n\t\tDisplayObject._hitTestContext = canvas.getContext(\"2d\");\r\n\t\tcanvas.width = canvas.height = 1;\r\n\t}\r\n\r\n// events:\r\n\t/**\r\n\t * Dispatched when the user presses their left mouse button over the display object. See the \r\n\t * {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event mousedown\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user presses their left mouse button and then releases it while over the display object.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event click\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user double clicks their left mouse button over this display object.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event dblclick\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user's mouse enters this display object. This event must be enabled using \r\n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event mouseover\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the user's mouse leaves this display object. This event must be enabled using \r\n\t * {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}. See also {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event mouseout\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\t/**\r\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}, with the following\r\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\r\n\t * aggregate of their content.\r\n\t * \r\n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\r\n\t * shapeA and then directly on to shapeB. With a listener for {{#crossLink \"mouseover:event\"}}{{/crossLink}} on\r\n\t * myContainer, two events would be received, each targeting a child element:<OL>\r\n\t * <LI>when the mouse enters shapeA (target=shapeA)</LI>\r\n\t * <LI>when the mouse enters shapeB (target=shapeB)</LI>\r\n\t * </OL>\r\n\t * However, with a listener for \"rollover\" instead, only a single event is received when the mouse first enters\r\n\t * the aggregate myContainer content (target=myContainer).\r\n\t * \r\n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event rollover\r\n\t * @since 0.7.0\r\n\t */\r\n\r\n\t/**\r\n\t * This event is similar to {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}, with the following\r\n\t * differences: it does not bubble, and it considers {{#crossLink \"Container\"}}{{/crossLink}} instances as an\r\n\t * aggregate of their content.\r\n\t * \r\n\t * For example, myContainer contains two overlapping children: shapeA and shapeB. The user moves their mouse over\r\n\t * shapeA, then directly on to shapeB, then off both. With a listener for {{#crossLink \"mouseout:event\"}}{{/crossLink}}\r\n\t * on myContainer, two events would be received, each targeting a child element:<OL>\r\n\t * <LI>when the mouse leaves shapeA (target=shapeA)</LI>\r\n\t * <LI>when the mouse leaves shapeB (target=shapeB)</LI>\r\n\t * </OL>\r\n\t * However, with a listener for \"rollout\" instead, only a single event is received when the mouse leaves\r\n\t * the aggregate myContainer content (target=myContainer).\r\n\t * \r\n\t * This event must be enabled using {{#crossLink \"Stage/enableMouseOver\"}}{{/crossLink}}.\r\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\r\n\t * @event rollout\r\n\t * @since 0.7.0\r\n\t */\r\n\r\n\t/**\r\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressmove\r\n\t * event will be generated on that object whenever the mouse moves until the mouse press is released. This can be\r\n\t * useful for dragging and similar operations.\r\n\t *\r\n\t * **Please note** that if the initial mouse target from a `mousedown` event is removed from the stage after being pressed\r\n\t * (e.g. during a `pressmove` event), a `pressmove` event is still generated. However since it is no longer in the\r\n\t * display list, the event can not bubble. This means that previous ancestors (parent containers) will not receive\r\n\t * the event, and therefore can not re-dispatch it. If you intend to listen for `{{#crossLink \"DisplayObject/pressup:event\"}}{{/crossLink}}`\r\n\t * or `pressmove` on a dynamic object (such as a {{#crossLink \"MovieClip\"}}{{/crossLink}} or {{#crossLink \"Container\"}}{{/crossLink}}),\r\n\t * then ensure you set {{#crossLink \"Container/mouseChildren:property\"}}{{/crossLink}} to `false`.\r\n\t * @event pressmove\r\n\t * @since 0.7.0\r\n\t */\r\n\r\n\t/**\r\n\t * After a {{#crossLink \"DisplayObject/mousedown:event\"}}{{/crossLink}} occurs on a display object, a pressup event\r\n\t * will be generated on that object when that mouse press is released. This can be useful for dragging and similar\r\n\t * operations.\r\n\t *\r\n\t * **Please note** that if the initial mouse target from a `mousedown` event is removed from the stage after being pressed\r\n\t * (e.g. during a `pressmove` event), a `pressup` event is still generated. However since it is no longer in the\r\n\t * display list, the event can not bubble. This means that previous ancestors (parent containers) will not receive\r\n\t * the event, and therefore can not re-dispatch it. If you intend to listen for `{{#crossLink \"DisplayObject/pressmove:event\"}}{{/crossLink}}`\r\n\t * or `pressup` on a dynamic object (such as a {{#crossLink \"MovieClip\"}}{{/crossLink}} or {{#crossLink \"Container\"}}{{/crossLink}}),\r\n\t * then ensure you set {{#crossLink \"Container/mouseChildren:property\"}}{{/crossLink}} to `false`.\r\n\t * @event pressup\r\n\t * @since 0.7.0\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the display object is added to a parent container.\r\n\t * @event added\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched when the display object is removed from its parent container.\r\n\t * @event removed\r\n\t */\r\n\r\n\t/**\r\n\t * Dispatched on each display object on a stage whenever the stage updates. This occurs immediately before the\r\n\t * rendering (draw) pass. When {{#crossLink \"Stage/update\"}}{{/crossLink}} is called, first all display objects on\r\n\t * the stage dispatch the tick event, then all of the display objects are drawn to stage. Children will have their\r\n\t * {{#crossLink \"tick:event\"}}{{/crossLink}} event dispatched in order of their depth prior to the event being\r\n\t * dispatched on their parent.\r\n\t * @event tick\r\n\t * @param {Object} target The object that dispatched the event.\r\n\t * @param {String} type The event type.\r\n\t * @param {Array} params An array containing any arguments that were passed to the Stage.update() method. For\r\n\t *      example if you called stage.update(\"hello\"), then the params would be [\"hello\"].\r\n\t * @since 0.6.0\r\n\t */\r\n\r\n\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"DisplayObject/stage:property\"}}{{/crossLink}} property instead.\r\n\t * @method _getStage\r\n\t * @protected\r\n\t * @return {Stage}\r\n\t **/\r\n\tp._getStage = function() {\r\n\t\t// uses dynamic access to avoid circular dependencies;\r\n\t\tvar o = this, _Stage = createjs[\"Stage\"];\r\n\t\twhile (o.parent) { o = o.parent; }\r\n\t\tif (o instanceof _Stage) { return o; }\r\n\t\treturn null;\r\n\t};\r\n\t// DisplayObject.getStage is @deprecated. Remove for 1.1+\r\n\tp.getStage = createjs.deprecate(p._getStage, \"DisplayObject.getStage\");\r\n\r\n\t/**\r\n\t * Returns the Stage instance that this display object will be rendered on, or null if it has not been added to one.\r\n\t * @property stage\r\n\t * @type {Stage}\r\n\t * @readonly\r\n\t **/\r\n\r\n\t/**\r\n\t * Returns an ID number that uniquely identifies the current cache for this display object. This can be used to\r\n\t * determine if the cache has changed since a previous check.\r\n\t * Moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}\r\n\t * @property cacheID\r\n\t * @deprecated\r\n\t * @type {Number}\r\n\t * @default 0\r\n\t */\r\n\r\n\t/**\r\n\t * Set both the {{#crossLink \"DisplayObject/scaleX:property\"}}{{/crossLink}} and the {{#crossLink \"DisplayObject/scaleY\"}}{{/crossLink}}\r\n\t * property to the same value. Note that when you get the value, if the `scaleX` and `scaleY` are different values,\r\n\t * it will return only the `scaleX`.\r\n\t * @property scaleX\r\n\t * @type {Number}\r\n\t * @default 1\r\n\t */\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tstage: { get: p._getStage },\r\n\t\t\tcacheID: {\r\n\t\t\t\tget: function(){ return this.bitmapCache && this.bitmapCache.cacheID },\r\n\t\t\t\tset: function(a){ this.bitmapCache && (this.bitmapCache.cacheID = a) }\r\n\t\t\t},\r\n\t\t\tscale: {\r\n\t\t\t\tget: function() { return this.scaleX; },\r\n\t\t\t\tset: function(scale) { this.scaleX = this.scaleY = scale; },\r\n\t\t\t}\r\n\t\t});\r\n\t} catch (e) {}\r\n\r\n\r\n// public methods:\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns <code>true</code> if the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\r\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tvar cache = this.bitmapCache;\r\n\t\tif(cache && !ignoreCache) {\r\n\t\t\treturn cache.draw(ctx);\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Applies this display object's transformation, alpha, globalCompositeOperation, clipping path (mask), and shadow\r\n\t * to the specified context. This is typically called prior to {{#crossLink \"DisplayObject/draw\"}}{{/crossLink}}.\r\n\t * @method updateContext\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D to update.\r\n\t **/\r\n\tp.updateContext = function(ctx) {\r\n\t\tvar o=this, mask=o.mask, mtx= o._props.matrix;\r\n\t\t\r\n\t\tif (mask && mask.graphics && !mask.graphics.isEmpty()) {\r\n\t\t\tmask.getMatrix(mtx);\r\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\r\n\t\t\t\r\n\t\t\tmask.graphics.drawAsPath(ctx);\r\n\t\t\tctx.clip();\r\n\t\t\t\r\n\t\t\tmtx.invert();\r\n\t\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx, mtx.ty);\r\n\t\t}\r\n\t\t\r\n\t\tthis.getMatrix(mtx);\r\n\t\tvar tx = mtx.tx, ty = mtx.ty;\r\n\t\tif (DisplayObject._snapToPixelEnabled && o.snapToPixel) {\r\n\t\t\ttx = tx + (tx < 0 ? -0.5 : 0.5) | 0;\r\n\t\t\tty = ty + (ty < 0 ? -0.5 : 0.5) | 0;\r\n\t\t}\r\n\t\tctx.transform(mtx.a,  mtx.b, mtx.c, mtx.d, tx, ty);\r\n\t\tctx.globalAlpha *= o.alpha;\r\n\t\tif (o.compositeOperation) { ctx.globalCompositeOperation = o.compositeOperation; }\r\n\t\tif (o.shadow) { this._applyShadow(ctx, o.shadow); }\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into a new element, which is then used for subsequent draws. Intended for complex content\r\n\t * that does not change frequently (ex. a Container with many children that do not move, or a complex vector Shape),\r\n\t * this can provide for much faster rendering because the content does not need to be re-rendered each tick. The\r\n\t * cached display object can be moved, rotated, faded, etc freely, however if its content changes, you must manually\r\n\t * update the cache by calling <code>updateCache()</code> again. You must specify the cached area via the x, y, w,\r\n\t * and h parameters. This defines the rectangle that will be rendered and cached using this display object's coordinates.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * For example if you defined a Shape that drew a circle at 0, 0 with a radius of 25:\r\n\t *\r\n\t *      var shape = new createjs.Shape();\r\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0, 0, 25);\r\n\t *      shape.cache(-25, -25, 50, 50);\r\n\t *\r\n\t * Note that filters need to be defined <em>before</em> the cache is applied or you will have to call updateCache after\r\n\t * application. Check out the {{#crossLink \"Filter\"}}{{/crossLink}} class for more information. Some filters\r\n\t * (ex. BlurFilter) may not work as expected in conjunction with the scale param.\r\n\t * \r\n\t * Usually, the resulting cacheCanvas will have the dimensions width * scale, height * scale, however some filters (ex. BlurFilter)\r\n\t * will add padding to the canvas dimensions.\r\n\t *\r\n\t * In previous versions caching was handled on DisplayObject but has since been moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}.\r\n\t * This allows for easier interaction and alternate cache methods like WebGL with {{#crossLink \"StageGL\"}}{{/crossLink}}.\r\n\t * For more information on the options object, see the BitmapCache {{#crossLink \"BitmapCache/define\"}}{{/crossLink}}.\r\n\t *\r\n\t * @method cache\r\n\t * @param {Number} x The x coordinate origin for the cache region.\r\n\t * @param {Number} y The y coordinate origin for the cache region.\r\n\t * @param {Number} width The width of the cache region.\r\n\t * @param {Number} height The height of the cache region.\r\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape using\r\n\t * \tmyShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and rotate\r\n\t * \tcached elements with greater fidelity. Default is 1.\r\n\t * @param {Object} [options=undefined] Specify additional parameters for the cache logic\r\n\t **/\r\n\tp.cache = function(x, y, width, height, scale, options) {\r\n\t\tif(!this.bitmapCache){\r\n\t\t\tthis.bitmapCache = new createjs.BitmapCache();\r\n\t\t}\r\n\t\tthis.bitmapCache.define(this, x, y, width, height, scale, options);\r\n\t};\r\n\r\n\t/**\r\n\t * Redraws the display object to its cache. Calling updateCache without an active cache will throw an error.\r\n\t * If compositeOperation is null the current cache will be cleared prior to drawing. Otherwise the display object\r\n\t * will be drawn over the existing cache using the specified compositeOperation.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t * Clear the current graphics of a cached shape, draw some new instructions, and then update the cache. The new line\r\n\t * will be drawn on top of the old one.\r\n\t *\r\n\t *      // Not shown: Creating the shape, and caching it.\r\n\t *      shapeInstance.clear();\r\n\t *      shapeInstance.setStrokeStyle(3).beginStroke(\"#ff0000\").moveTo(100, 100).lineTo(200,200);\r\n\t *      shapeInstance.updateCache();\r\n\t *\r\n\t * In previous versions caching was handled on DisplayObject but has since been moved to {{#crossLink \"BitmapCache\"}}{{/crossLink}}.\r\n\t * This allows for easier interaction and alternate cache methods like WebGL and {{#crossLink \"StageGL\"}}{{/crossLink}}.\r\n\t *\r\n\t * @method updateCache\r\n\t * @param {String} compositeOperation The compositeOperation to use, or null to clear the cache and redraw it.\r\n\t * <a href=\"https://html.spec.whatwg.org/multipage/scripting.html#dom-context-2d-globalcompositeoperation\">\r\n\t * whatwg spec on compositing</a>.\r\n\t **/\r\n\tp.updateCache = function(compositeOperation) {\r\n\t\tif(!this.bitmapCache) {\r\n\t\t\tthrow \"cache() must be called before updateCache()\";\r\n\t\t}\r\n\t\tthis.bitmapCache.update(compositeOperation);\r\n\t};\r\n\r\n\t/**\r\n\t * Clears the current cache. See {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} for more information.\r\n\t * @method uncache\r\n\t **/\r\n\tp.uncache = function() {\r\n\t\tif(this.bitmapCache) {\r\n\t\t\tthis.bitmapCache.release();\r\n\t\t\tthis.bitmapCache = undefined;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a data URL for the cache, or null if this display object is not cached.\r\n\t * Only generated if the cache has changed, otherwise returns last result.\r\n\t * @method getCacheDataURL\r\n\t * @return {String} The image data url for the cache.\r\n\t **/\r\n\tp.getCacheDataURL = function() {\r\n\t\treturn this.bitmapCache?this.bitmapCache.getDataURL():null;\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms the specified x and y position from the coordinate space of the display object\r\n\t * to the global (stage) coordinate space. For example, this could be used to position an HTML label\r\n\t * over a specific point on a nested display object. Returns a Point instance with x and y properties\r\n\t * correlating to the transformed coordinates on the stage.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.x = 300;\r\n\t *      displayObject.y = 200;\r\n\t *      stage.addChild(displayObject);\r\n\t *      var point = displayObject.localToGlobal(100, 100);\r\n\t *      // Results in x=400, y=300\r\n\t *\r\n\t * @method localToGlobal\r\n\t * @param {Number} x The x position in the source display object to transform.\r\n\t * @param {Number} y The y position in the source display object to transform.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \r\n\t * @return {Point} A Point instance with x and y properties correlating to the transformed coordinates\r\n\t * on the stage.\r\n\t **/\r\n\tp.localToGlobal = function(x, y, pt) {\r\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).transformPoint(x,y, pt||new createjs.Point());\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms the specified x and y position from the global (stage) coordinate space to the\r\n\t * coordinate space of the display object. For example, this could be used to determine\r\n\t * the current mouse position within the display object. Returns a Point instance with x and y properties\r\n\t * correlating to the transformed position in the display object's coordinate space.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.x = 300;\r\n\t *      displayObject.y = 200;\r\n\t *      stage.addChild(displayObject);\r\n\t *      var point = displayObject.globalToLocal(100, 100);\r\n\t *      // Results in x=-200, y=-100\r\n\t *\r\n\t * @method globalToLocal\r\n\t * @param {Number} x The x position on the stage to transform.\r\n\t * @param {Number} y The y position on the stage to transform.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \r\n\t * @return {Point} A Point instance with x and y properties correlating to the transformed position in the\r\n\t * display object's coordinate space.\r\n\t **/\r\n\tp.globalToLocal = function(x, y, pt) {\r\n\t\treturn this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(x,y, pt||new createjs.Point());\r\n\t};\r\n\r\n\t/**\r\n\t * Transforms the specified x and y position from the coordinate space of this display object to the coordinate\r\n\t * space of the target display object. Returns a Point instance with x and y properties correlating to the\r\n\t * transformed position in the target's coordinate space. Effectively the same as using the following code with\r\n\t * {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\r\n\t *\r\n\t *      var pt = this.localToGlobal(x, y);\r\n\t *      pt = target.globalToLocal(pt.x, pt.y);\r\n\t *\r\n\t * @method localToLocal\r\n\t * @param {Number} x The x position in the source display object to transform.\r\n\t * @param {Number} y The y position on the source display object to transform.\r\n\t * @param {DisplayObject} target The target display object to which the coordinates will be transformed.\r\n\t * @param {Point | Object} [pt] An object to copy the result into. If omitted a new Point object with x/y properties will be returned. \r\n\t * @return {Point} Returns a Point instance with x and y properties correlating to the transformed position\r\n\t * in the target's coordinate space.\r\n\t **/\r\n\tp.localToLocal = function(x, y, target, pt) {\r\n\t\tpt = this.localToGlobal(x, y, pt);\r\n\t\treturn target.globalToLocal(pt.x, pt.y, pt);\r\n\t};\r\n\r\n\t/**\r\n\t * Shortcut method to quickly set the transform properties on the display object. All parameters are optional.\r\n\t * Omitted parameters will have the default value set.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      displayObject.setTransform(100, 100, 2, 2);\r\n\t *\r\n\t * @method setTransform\r\n\t * @param {Number} [x=0] The horizontal translation (x position) in pixels\r\n\t * @param {Number} [y=0] The vertical translation (y position) in pixels\r\n\t * @param {Number} [scaleX=1] The horizontal scale, as a percentage of 1\r\n\t * @param {Number} [scaleY=1] the vertical scale, as a percentage of 1\r\n\t * @param {Number} [rotation=0] The rotation, in degrees\r\n\t * @param {Number} [skewX=0] The horizontal skew factor\r\n\t * @param {Number} [skewY=0] The vertical skew factor\r\n\t * @param {Number} [regX=0] The horizontal registration point in pixels\r\n\t * @param {Number} [regY=0] The vertical registration point in pixels\r\n\t * @return {DisplayObject} Returns this instance. Useful for chaining commands.\r\n\t * @chainable\r\n\t*/\r\n\tp.setTransform = function(x, y, scaleX, scaleY, rotation, skewX, skewY, regX, regY) {\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\tthis.scaleX = scaleX == null ? 1 : scaleX;\r\n\t\tthis.scaleY = scaleY == null ? 1 : scaleY;\r\n\t\tthis.rotation = rotation || 0;\r\n\t\tthis.skewX = skewX || 0;\r\n\t\tthis.skewY = skewY || 0;\r\n\t\tthis.regX = regX || 0;\r\n\t\tthis.regY = regY || 0;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a matrix based on this object's current transform.\r\n\t * @method getMatrix\r\n\t * @param {Matrix2D} matrix Optional. A Matrix2D object to populate with the calculated values. If null, a new\r\n\t * Matrix object is returned.\r\n\t * @return {Matrix2D} A matrix representing this display object's transform.\r\n\t **/\r\n\tp.getMatrix = function(matrix) {\r\n\t\tvar o = this, mtx = matrix&&matrix.identity() || new createjs.Matrix2D();\r\n\t\treturn o.transformMatrix ?  mtx.copy(o.transformMatrix) : mtx.appendTransform(o.x, o.y, o.scaleX, o.scaleY, o.rotation, o.skewX, o.skewY, o.regX, o.regY);\r\n\t};\r\n\r\n\t/**\r\n\t * Generates a Matrix2D object representing the combined transform of the display object and all of its\r\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}). This can\r\n\t * be used to transform positions between coordinate spaces, such as with {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\r\n\t * and {{#crossLink \"DisplayObject/globalToLocal\"}}{{/crossLink}}.\r\n\t * @method getConcatenatedMatrix\r\n\t * @param {Matrix2D} [matrix] A {{#crossLink \"Matrix2D\"}}{{/crossLink}} object to populate with the calculated values.\r\n\t * If null, a new Matrix2D object is returned.\r\n\t * @return {Matrix2D} The combined matrix.\r\n\t **/\r\n\tp.getConcatenatedMatrix = function(matrix) {\r\n\t\tvar o = this, mtx = this.getMatrix(matrix);\r\n\t\twhile (o = o.parent) {\r\n\t\t\tmtx.prependMatrix(o.getMatrix(o._props.matrix));\r\n\t\t}\r\n\t\treturn mtx;\r\n\t};\r\n\r\n\t/**\r\n\t * Generates a DisplayProps object representing the combined display properties of the  object and all of its\r\n\t * parent Containers up to the highest level ancestor (usually the {{#crossLink \"Stage\"}}{{/crossLink}}).\r\n\t * @method getConcatenatedDisplayProps\r\n\t * @param {DisplayProps} [props] A {{#crossLink \"DisplayProps\"}}{{/crossLink}} object to populate with the calculated values.\r\n\t * If null, a new DisplayProps object is returned.\r\n\t * @return {DisplayProps} The combined display properties.\r\n\t **/\r\n\tp.getConcatenatedDisplayProps = function(props) {\r\n\t\tprops = props ? props.identity() : new createjs.DisplayProps();\r\n\t\tvar o = this, mtx = o.getMatrix(props.matrix); \r\n\t\tdo {\r\n\t\t\tprops.prepend(o.visible, o.alpha, o.shadow, o.compositeOperation);\r\n\t\t\t\r\n\t\t\t// we do this to avoid problems with the matrix being used for both operations when o._props.matrix is passed in as the props param.\r\n\t\t\t// this could be simplified (ie. just done as part of the prepend above) if we switched to using a pool.\r\n\t\t\tif (o != this) { mtx.prependMatrix(o.getMatrix(o._props.matrix)); }\r\n\t\t} while (o = o.parent);\r\n\t\treturn props;\r\n\t};\r\n\r\n\t/**\r\n\t * Tests whether the display object intersects the specified point in local coordinates (ie. draws a pixel with alpha > 0 at\r\n\t * the specified position). This ignores the alpha, shadow, hitArea, mask, and compositeOperation of the display object.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      stage.addEventListener(\"stagemousedown\", handleMouseDown);\r\n\t *      function handleMouseDown(event) {\r\n\t *          var hit = myShape.hitTest(event.stageX, event.stageY);\r\n\t *      }\r\n\t *\r\n\t * Please note that shape-to-shape collision is not currently supported by EaselJS.\r\n\t * @method hitTest\r\n\t * @param {Number} x The x position to check in the display object's local coordinates.\r\n\t * @param {Number} y The y position to check in the display object's local coordinates.\r\n\t * @return {Boolean} A Boolean indicating whether a visible portion of the DisplayObject intersect the specified\r\n\t * local Point.\r\n\t*/\r\n\tp.hitTest = function(x, y) {\r\n\t\tvar ctx = DisplayObject._hitTestContext;\r\n\t\tctx.setTransform(1, 0, 0, 1, -x, -y);\r\n\t\tthis.draw(ctx);\r\n\r\n\t\tvar hit = this._testHit(ctx);\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.clearRect(0, 0, 2, 2);\r\n\t\treturn hit;\r\n\t};\r\n\r\n\t/**\r\n\t * Provides a chainable shortcut method for setting a number of properties on the instance.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var myGraphics = new createjs.Graphics().beginFill(\"#ff0000\").drawCircle(0, 0, 25);\r\n\t *      var shape = stage.addChild(new Shape()).set({graphics:myGraphics, x:100, y:100, alpha:0.5});\r\n\t *\r\n\t * @method set\r\n\t * @param {Object} props A generic object containing properties to copy to the DisplayObject instance.\r\n\t * @return {DisplayObject} Returns the instance the method is called on (useful for chaining calls.)\r\n\t * @chainable\r\n\t*/\r\n\tp.set = function(props) {\r\n\t\tfor (var n in props) { this[n] = props[n]; }\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a rectangle representing this object's bounds in its local coordinate system (ie. with no transformation).\r\n\t * Objects that have been cached will return the bounds of the cache.\r\n\t * \r\n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \r\n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\r\n\t * bounds.\r\n\t * \r\n\t * <table>\r\n\t * \t<tr><td><b>All</b></td><td>\r\n\t * \t\tAll display objects support setting bounds manually using setBounds(). Likewise, display objects that\r\n\t * \t\thave been cached using cache() will return the bounds of their cache. Manual and cache bounds will override\r\n\t * \t\tthe automatic calculations listed below.\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Bitmap</b></td><td>\r\n\t * \t\tReturns the width and height of the sourceRect (if specified) or image, extending from (x=0,y=0).\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Sprite</b></td><td>\r\n\t * \t\tReturns the bounds of the current frame. May have non-zero x/y if a frame registration point was specified\r\n\t * \t\tin the spritesheet data. See also {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}}\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Container</b></td><td>\r\n\t * \t\tReturns the aggregate (combined) bounds of all children that return a non-null value from getBounds().\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Shape</b></td><td>\r\n\t * \t\tDoes not currently support automatic bounds calculations. Use setBounds() to manually define bounds.\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>Text</b></td><td>\r\n\t * \t\tReturns approximate bounds. Horizontal values (x/width) are quite accurate, but vertical values (y/height) are\r\n\t * \t\tnot, especially when using textBaseline values other than \"top\".\r\n\t * \t</td></tr>\r\n\t * \t<tr><td><b>BitmapText</b></td><td>\r\n\t * \t\tReturns approximate bounds. Values will be more accurate if spritesheet frame registration points are close\r\n\t * \t\tto (x=0,y=0).\r\n\t * \t</td></tr>\r\n\t* </table>\r\n\t * \r\n\t * Bounds can be expensive to calculate for some objects (ex. text, or containers with many children), and\r\n\t * are recalculated each time you call getBounds(). You can prevent recalculation on static objects by setting the\r\n\t * bounds explicitly:\r\n\t * \r\n\t * \tvar bounds = obj.getBounds();\r\n\t * \tobj.setBounds(bounds.x, bounds.y, bounds.width, bounds.height);\r\n\t * \t// getBounds will now use the set values, instead of recalculating\r\n\t * \r\n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\r\n\t * values if you need to retain it.\r\n\t * \r\n\t * \tvar myBounds = obj.getBounds().clone();\r\n\t * \t// OR:\r\n\t * \tmyRect.copy(obj.getBounds());\r\n\t * \r\n\t * @method getBounds\r\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this\r\n\t * object.\r\n\t **/\r\n\tp.getBounds = function() {\r\n\t\tif (this._bounds) { return this._rectangle.copy(this._bounds); }\r\n\t\tvar cacheCanvas = this.cacheCanvas;\r\n\t\tif (cacheCanvas) {\r\n\t\t\tvar scale = this._cacheScale;\r\n\t\t\treturn this._rectangle.setValues(this._cacheOffsetX, this._cacheOffsetY, cacheCanvas.width/scale, cacheCanvas.height/scale);\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a rectangle representing this object's bounds in its parent's coordinate system (ie. with transformations applied).\r\n\t * Objects that have been cached will return the transformed bounds of the cache.\r\n\t * \r\n\t * Not all display objects can calculate their own bounds (ex. Shape). For these objects, you can use \r\n\t * {{#crossLink \"DisplayObject/setBounds\"}}{{/crossLink}} so that they are included when calculating Container\r\n\t * bounds.\r\n\t * \r\n\t * To reduce memory impact, the returned Rectangle instance may be reused internally; clone the instance or copy its\r\n\t * values if you need to retain it.\r\n\t * \r\n\t * Container instances calculate aggregate bounds for all children that return bounds via getBounds.\r\n\t * @method getTransformedBounds\r\n\t * @return {Rectangle} A Rectangle instance representing the bounds, or null if bounds are not available for this object.\r\n\t **/\r\n\tp.getTransformedBounds = function() {\r\n\t\treturn this._getBounds();\r\n\t};\r\n\r\n\t/**\r\n\t * Allows you to manually specify the bounds of an object that either cannot calculate their own bounds (ex. Shape &\r\n\t * Text) for future reference, or so the object can be included in Container bounds. Manually set bounds will always\r\n\t * override calculated bounds.\r\n\t * \r\n\t * The bounds should be specified in the object's local (untransformed) coordinates. For example, a Shape instance\r\n\t * with a 25px radius circle centered at 0,0 would have bounds of (-25, -25, 50, 50).\r\n\t * @method setBounds\r\n\t * @param {Number} x The x origin of the bounds. Pass null to remove the manual bounds.\r\n\t * @param {Number} y The y origin of the bounds.\r\n\t * @param {Number} width The width of the bounds.\r\n\t * @param {Number} height The height of the bounds.\r\n\t **/\r\n\tp.setBounds = function(x, y, width, height) {\r\n\t\tif (x == null) { this._bounds = x; return; }\r\n\t\tthis._bounds = (this._bounds || new createjs.Rectangle()).setValues(x, y, width, height);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this DisplayObject. Some properties that are specific to this instance's current context are\r\n\t * reverted to their defaults (for example .parent). Caches are not maintained across clones, and some elements\r\n\t * are copied by reference (masks, individual filter instances, hit area)\r\n\t * @method clone\r\n\t * @return {DisplayObject} A clone of the current DisplayObject instance.\r\n\t **/\r\n\tp.clone = function() {\r\n\t\treturn this._cloneProps(new DisplayObject());\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[DisplayObject (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * Called before the object gets drawn and is a chance to ensure the display state of the object is correct.\r\n\t * Mostly used by {{#crossLink \"MovieClip\"}}{{/crossLink}} and {{#crossLink \"BitmapText\"}}{{/crossLink}} to\r\n\t * correct their internal state and children prior to being drawn.\r\n\t *\r\n\t * Is manually called via draw in a {{#crossLink \"Stage\"}}{{/crossLink}} but is automatically called when\r\n\t * present in a {{#crossLink \"StageGL\"}}{{/crossLink}} instance.\r\n\t *\r\n\t * @method _updateState\r\n\t * @default null\r\n\t */\r\n\tp._updateState = null;\r\n\r\n\t// separated so it can be used more easily in subclasses:\r\n\t/**\r\n\t * @method _cloneProps\r\n\t * @param {DisplayObject} o The DisplayObject instance which will have properties from the current DisplayObject\r\n\t * instance copied into.\r\n\t * @return {DisplayObject} o\r\n\t * @protected\r\n\t **/\r\n\tp._cloneProps = function(o) {\r\n\t\to.alpha = this.alpha;\r\n\t\to.mouseEnabled = this.mouseEnabled;\r\n\t\to.tickEnabled = this.tickEnabled;\r\n\t\to.name = this.name;\r\n\t\to.regX = this.regX;\r\n\t\to.regY = this.regY;\r\n\t\to.rotation = this.rotation;\r\n\t\to.scaleX = this.scaleX;\r\n\t\to.scaleY = this.scaleY;\r\n\t\to.shadow = this.shadow;\r\n\t\to.skewX = this.skewX;\r\n\t\to.skewY = this.skewY;\r\n\t\to.visible = this.visible;\r\n\t\to.x  = this.x;\r\n\t\to.y = this.y;\r\n\t\to.compositeOperation = this.compositeOperation;\r\n\t\to.snapToPixel = this.snapToPixel;\r\n\t\to.filters = this.filters==null?null:this.filters.slice(0);\r\n\t\to.mask = this.mask;\r\n\t\to.hitArea = this.hitArea;\r\n\t\to.cursor = this.cursor;\r\n\t\to._bounds = this._bounds;\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _applyShadow\r\n\t * @protected\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @param {Shadow} shadow\r\n\t **/\r\n\tp._applyShadow = function(ctx, shadow) {\r\n\t\tshadow = shadow || Shadow.identity;\r\n\t\tctx.shadowColor = shadow.color;\r\n\t\tctx.shadowOffsetX = shadow.offsetX;\r\n\t\tctx.shadowOffsetY = shadow.offsetY;\r\n\t\tctx.shadowBlur = shadow.blur;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _tick\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * @protected\r\n\t **/\r\n\tp._tick = function(evtObj) {\r\n\t\t// because tick can be really performance sensitive, check for listeners before calling dispatchEvent.\r\n\t\tvar ls = this._listeners;\r\n\t\tif (ls && ls[\"tick\"]) {\r\n\t\t\t// reset & reuse the event object to avoid construction / GC costs:\r\n\t\t\tevtObj.target = null;\r\n\t\t\tevtObj.propagationStopped = evtObj.immediatePropagationStopped = false;\r\n\t\t\tthis.dispatchEvent(evtObj);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * @method _testHit\r\n\t * @protected\r\n\t * @param {CanvasRenderingContext2D} ctx\r\n\t * @return {Boolean}\r\n\t **/\r\n\tp._testHit = function(ctx) {\r\n\t\ttry {\r\n\t\t\tvar hit = ctx.getImageData(0, 0, 1, 1).data[3] > 1;\r\n\t\t} catch (e) {\r\n\t\t\tif (!DisplayObject.suppressCrossDomainErrors) {\r\n\t\t\t\tthrow \"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn hit;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getBounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._getBounds = function(matrix, ignoreTransform){\r\n\t\treturn this._transformBounds(this.getBounds(), matrix, ignoreTransform);\r\n\t};\r\n\r\n\t/**\r\n\t * @method _transformBounds\r\n\t * @param {Rectangle} bounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._transformBounds = function(bounds, matrix, ignoreTransform) {\r\n\t\tif (!bounds) { return bounds; }\r\n\t\tvar x = bounds.x, y = bounds.y, width = bounds.width, height = bounds.height, mtx = this._props.matrix;\r\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\r\n\t\t\r\n\t\tif (x || y) { mtx.appendTransform(0,0,1,1,0,0,0,-x,-y); } // TODO: simplify this.\r\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\r\n\t\t\r\n\t\tvar x_a = width*mtx.a, x_b = width*mtx.b;\r\n\t\tvar y_c = height*mtx.c, y_d = height*mtx.d;\r\n\t\tvar tx = mtx.tx, ty = mtx.ty;\r\n\t\t\r\n\t\tvar minX = tx, maxX = tx, minY = ty, maxY = ty;\r\n\r\n\t\tif ((x = x_a + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\r\n\t\tif ((x = x_a + y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\r\n\t\tif ((x = y_c + tx) < minX) { minX = x; } else if (x > maxX) { maxX = x; }\r\n\r\n\t\tif ((y = x_b + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\r\n\t\tif ((y = x_b + y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\r\n\t\tif ((y = y_d + ty) < minY) { minY = y; } else if (y > maxY) { maxY = y; }\r\n\r\n\t\treturn bounds.setValues(minX, minY, maxX-minX, maxY-minY);\r\n\t};\r\n\r\n\t/**\r\n\t * Indicates whether the display object has any mouse event listeners or a cursor.\r\n\t * @method _isMouseOpaque\r\n\t * @return {Boolean}\r\n\t * @protected\r\n\t **/\r\n\tp._hasMouseEventListener = function() {\r\n\t\tvar evts = DisplayObject._MOUSE_EVENTS;\r\n\t\tfor (var i= 0, l=evts.length; i<l; i++) {\r\n\t\t\tif (this.hasEventListener(evts[i])) { return true; }\r\n\t\t}\r\n\t\treturn !!this.cursor;\r\n\t};\r\n\r\n\tcreatejs.DisplayObject = createjs.promote(DisplayObject, \"EventDispatcher\");\r\n}());\n\n//##############################################################################\n// Container.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\t\r\n\r\n// constructor:\r\n/**\r\n * A Container is a nestable display list that allows you to work with compound display elements. For  example you could\r\n * group arm, leg, torso and head {{#crossLink \"Bitmap\"}}{{/crossLink}} instances together into a Person Container, and\r\n * transform them as a group, while still being able to move the individual parts relative to each other. Children of\r\n * containers have their <code>transform</code> and <code>alpha</code> properties concatenated with their parent\r\n * Container.\r\n *\r\n * For example, a {{#crossLink \"Shape\"}}{{/crossLink}} with x=100 and alpha=0.5, placed in a Container with <code>x=50</code>\r\n * and <code>alpha=0.7</code> will be rendered to the canvas at <code>x=150</code> and <code>alpha=0.35</code>.\r\n * Containers have some overhead, so you generally shouldn't create a Container to hold a single child.\r\n *\r\n * <h4>Example</h4>\r\n *\r\n *      var container = new createjs.Container();\r\n *      container.addChild(bitmapInstance, shapeInstance);\r\n *      container.x = 100;\r\n *\r\n * @class Container\r\n * @extends DisplayObject\r\n * @constructor\r\n **/\r\n\tfunction Container() {\r\n\t\tthis.DisplayObject_constructor();\r\n\t\t\r\n\t// public properties:\r\n\t\t/**\r\n\t\t * The array of children in the display list. You should usually use the child management methods such as\r\n\t\t * {{#crossLink \"Container/addChild\"}}{{/crossLink}}, {{#crossLink \"Container/removeChild\"}}{{/crossLink}},\r\n\t\t * {{#crossLink \"Container/swapChildren\"}}{{/crossLink}}, etc, rather than accessing this directly, but it is\r\n\t\t * included for advanced uses.\r\n\t\t * @property children\r\n\t\t * @type Array\r\n\t\t * @default null\r\n\t\t **/\r\n\t\tthis.children = [];\r\n\t\t\r\n\t\t/**\r\n\t\t * Indicates whether the children of this container are independently enabled for mouse/pointer interaction.\r\n\t\t * If false, the children will be aggregated under the container - for example, a click on a child shape would\r\n\t\t * trigger a click event on the container.\r\n\t\t * @property mouseChildren\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.mouseChildren = true;\r\n\t\t\r\n\t\t/**\r\n\t\t * If false, the tick will not be propagated to children of this Container. This can provide some performance benefits.\r\n\t\t * In addition to preventing the \"tick\" event from being dispatched, it will also prevent tick related updates\r\n\t\t * on some display objects (ex. Sprite & MovieClip frame advancing, DOMElement visibility handling).\r\n\t\t * @property tickChildren\r\n\t\t * @type Boolean\r\n\t\t * @default true\r\n\t\t **/\r\n\t\tthis.tickChildren = true;\r\n\t}\r\n\tvar p = createjs.extend(Container, createjs.DisplayObject);\r\n\t\r\n\t\r\n// getter / setters:\r\n\t/**\r\n\t * Use the {{#crossLink \"Container/numChildren:property\"}}{{/crossLink}} property instead.\r\n\t * @method _getNumChildren\r\n\t * @protected\r\n\t * @return {Number}\r\n\t **/\r\n\tp._getNumChildren = function() {\r\n\t\treturn this.children.length;\r\n\t};\r\n\t// Container.getNumChildren is @deprecated. Remove for 1.1+\r\n\tp.getNumChildren = createjs.deprecate(p._getNumChildren, \"Container.getNumChildren\");\r\n\r\n\t/**\r\n\t * Returns the number of children in the container.\r\n\t * @property numChildren\r\n\t * @type {Number}\r\n\t * @readonly\r\n\t **/\r\n\ttry {\r\n\t\tObject.defineProperties(p, {\r\n\t\t\tnumChildren: { get: p._getNumChildren }\r\n\t\t});\r\n\t} catch (e) {}\r\n\t\r\n\r\n// public methods:\r\n\t/**\r\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\r\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\r\n\t * @method initialize\r\n\t * @deprecated in favour of `createjs.promote()`\r\n\t **/\r\n\tp.initialize = Container; // TODO: deprecated.\r\n\t\r\n\t/**\r\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\r\n\t * This does not account for whether it would be visible within the boundaries of the stage.\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method isVisible\r\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\r\n\t **/\r\n\tp.isVisible = function() {\r\n\t\tvar hasContent = this.cacheCanvas || this.children.length;\r\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\r\n\t};\r\n\r\n\t/**\r\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\r\n\t * Returns true if the draw was handled (useful for overriding functionality).\r\n\t *\r\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\r\n\t * @method draw\r\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\r\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\r\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\r\n\t * into itself).\r\n\t **/\r\n\tp.draw = function(ctx, ignoreCache) {\r\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\r\n\t\t\r\n\t\t// this ensures we don't have issues with display list changes that occur during a draw:\r\n\t\tvar list = this.children.slice();\r\n\t\tfor (var i=0,l=list.length; i<l; i++) {\r\n\t\t\tvar child = list[i];\r\n\t\t\tif (!child.isVisible()) { continue; }\r\n\t\t\t\r\n\t\t\t// draw the child:\r\n\t\t\tctx.save();\r\n\t\t\tchild.updateContext(ctx);\r\n\t\t\tchild.draw(ctx);\r\n\t\t\tctx.restore();\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Adds a child to the top of the display list.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \t\tcontainer.addChild(bitmapInstance);\r\n\t *\r\n\t * You can also add multiple children at once:\r\n\t *\r\n\t * \t\tcontainer.addChild(bitmapInstance, shapeInstance, textInstance);\r\n\t *\r\n\t * @method addChild\r\n\t * @param {DisplayObject} child The display object to add.\r\n\t * @return {DisplayObject} The child that was added, or the last child if multiple children were added.\r\n\t **/\r\n\tp.addChild = function(child) {\r\n\t\tif (child == null) { return child; }\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tfor (var i=0; i<l; i++) { this.addChild(arguments[i]); }\r\n\t\t\treturn arguments[l-1];\r\n\t\t}\r\n\t\t// Note: a lot of duplication with addChildAt, but push is WAY faster than splice.\r\n\t\tvar par=child.parent, silent = par === this;\r\n\t\tpar&&par._removeChildAt(createjs.indexOf(par.children, child), silent);\r\n\t\tchild.parent = this;\r\n\t\tthis.children.push(child);\r\n\t\tif (!silent) { child.dispatchEvent(\"added\"); }\r\n\t\treturn child;\r\n\t};\r\n\r\n\t/**\r\n\t * Adds a child to the display list at the specified index, bumping children at equal or greater indexes up one, and\r\n\t * setting its parent to this Container.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      addChildAt(child1, index);\r\n\t *\r\n\t * You can also add multiple children, such as:\r\n\t *\r\n\t *      addChildAt(child1, child2, ..., index);\r\n\t *\r\n\t * The index must be between 0 and numChildren. For example, to add myShape under otherShape in the display list,\r\n\t * you could use:\r\n\t *\r\n\t *      container.addChildAt(myShape, container.getChildIndex(otherShape));\r\n\t *\r\n\t * This would also bump otherShape's index up by one. Fails silently if the index is out of range.\r\n\t *\r\n\t * @method addChildAt\r\n\t * @param {DisplayObject} child The display object to add.\r\n\t * @param {Number} index The index to add the child at.\r\n\t * @return {DisplayObject} Returns the last child that was added, or the last child if multiple children were added.\r\n\t **/\r\n\tp.addChildAt = function(child, index) {\r\n\t\tvar l = arguments.length;\r\n\t\tvar indx = arguments[l-1]; // can't use the same name as the index param or it replaces arguments[1]\r\n\t\tif (indx < 0 || indx > this.children.length) { return arguments[l-2]; }\r\n\t\tif (l > 2) {\r\n\t\t\tfor (var i=0; i<l-1; i++) { this.addChildAt(arguments[i], indx+i); }\r\n\t\t\treturn arguments[l-2];\r\n\t\t}\r\n\t\tvar par=child.parent, silent = par === this;\r\n\t\tpar&&par._removeChildAt(createjs.indexOf(par.children, child), silent);\r\n\t\tchild.parent = this;\r\n\t\tthis.children.splice(index, 0, child);\r\n\t\tif (!silent) { child.dispatchEvent(\"added\"); }\r\n\t\treturn child;\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the specified child from the display list. Note that it is faster to use removeChildAt() if the index is\r\n\t * already known.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      container.removeChild(child);\r\n\t *\r\n\t * You can also remove multiple children:\r\n\t *\r\n\t *      removeChild(child1, child2, ...);\r\n\t *\r\n\t * Returns true if the child (or children) was removed, or false if it was not in the display list.\r\n\t * @method removeChild\r\n\t * @param {DisplayObject} child The child to remove.\r\n\t * @return {Boolean} true if the child (or children) was removed, or false if it was not in the display list.\r\n\t **/\r\n\tp.removeChild = function(child) {\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tvar good = true;\r\n\t\t\tfor (var i=0; i<l; i++) { good = good && this.removeChild(arguments[i]); }\r\n\t\t\treturn good;\r\n\t\t}\r\n\t\treturn this._removeChildAt(createjs.indexOf(this.children, child));\r\n\t};\r\n\r\n\t/**\r\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      container.removeChildAt(2);\r\n\t *\r\n\t * You can also remove multiple children:\r\n\t *\r\n\t *      container.removeChild(2, 7, ...)\r\n\t *\r\n\t * Returns true if the child (or children) was removed, or false if any index was out of range.\r\n\t * @method removeChildAt\r\n\t * @param {Number} index The index of the child to remove.\r\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\r\n\t **/\r\n\tp.removeChildAt = function(index) {\r\n\t\tvar l = arguments.length;\r\n\t\tif (l > 1) {\r\n\t\t\tvar a = [];\r\n\t\t\tfor (var i=0; i<l; i++) { a[i] = arguments[i]; }\r\n\t\t\ta.sort(function(a, b) { return b-a; });\r\n\t\t\tvar good = true;\r\n\t\t\tfor (var i=0; i<l; i++) { good = good && this._removeChildAt(a[i]); }\r\n\t\t\treturn good;\r\n\t\t}\r\n\t\treturn this._removeChildAt(index);\r\n\t};\r\n\r\n\t/**\r\n\t * Removes all children from the display list.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t * \tcontainer.removeAllChildren();\r\n\t *\r\n\t * @method removeAllChildren\r\n\t **/\r\n\tp.removeAllChildren = function() {\r\n\t\tvar kids = this.children;\r\n\t\twhile (kids.length) { this._removeChildAt(0); }\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the child at the specified index.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      container.getChildAt(2);\r\n\t *\r\n\t * @method getChildAt\r\n\t * @param {Number} index The index of the child to return.\r\n\t * @return {DisplayObject} The child at the specified index. Returns null if there is no child at the index.\r\n\t **/\r\n\tp.getChildAt = function(index) {\r\n\t\treturn this.children[index];\r\n\t};\r\n\t\r\n\t/**\r\n\t * Returns the child with the specified name.\r\n\t * @method getChildByName\r\n\t * @param {String} name The name of the child to return.\r\n\t * @return {DisplayObject} The child with the specified name.\r\n\t **/\r\n\tp.getChildByName = function(name) {\r\n\t\tvar kids = this.children;\r\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\r\n\t\t\tif(kids[i].name == name) { return kids[i]; }\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\r\n\t/**\r\n\t * Performs an array sort operation on the child list.\r\n\t *\r\n\t * <h4>Example: Display children with a higher y in front.</h4>\r\n\t * \r\n\t *      var sortFunction = function(obj1, obj2, options) {\r\n\t *          if (obj1.y > obj2.y) { return 1; }\r\n\t *          if (obj1.y < obj2.y) { return -1; }\r\n\t *          return 0;\r\n\t *      }\r\n\t *      container.sortChildren(sortFunction);\r\n\t *\r\n\t * @method sortChildren\r\n\t * @param {Function} sortFunction the function to use to sort the child list. See JavaScript's <code>Array.sort</code>\r\n\t * documentation for details.\r\n\t **/\r\n\tp.sortChildren = function(sortFunction) {\r\n\t\tthis.children.sort(sortFunction);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns the index of the specified child in the display list, or -1 if it is not in the display list.\r\n\t *\r\n\t * <h4>Example</h4>\r\n\t *\r\n\t *      var index = container.getChildIndex(child);\r\n\t *\r\n\t * @method getChildIndex\r\n\t * @param {DisplayObject} child The child to return the index of.\r\n\t * @return {Number} The index of the specified child. -1 if the child is not found.\r\n\t **/\r\n\tp.getChildIndex = function(child) {\r\n\t\treturn createjs.indexOf(this.children, child);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Swaps the children at the specified indexes. Fails silently if either index is out of range.\r\n\t * @method swapChildrenAt\r\n\t * @param {Number} index1\r\n\t * @param {Number} index2\r\n\t **/\r\n\tp.swapChildrenAt = function(index1, index2) {\r\n\t\tvar kids = this.children;\r\n\t\tvar o1 = kids[index1];\r\n\t\tvar o2 = kids[index2];\r\n\t\tif (!o1 || !o2) { return; }\r\n\t\tkids[index1] = o2;\r\n\t\tkids[index2] = o1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Swaps the specified children's depth in the display list. Fails silently if either child is not a child of this\r\n\t * Container.\r\n\t * @method swapChildren\r\n\t * @param {DisplayObject} child1\r\n\t * @param {DisplayObject} child2\r\n\t **/\r\n\tp.swapChildren = function(child1, child2) {\r\n\t\tvar kids = this.children;\r\n\t\tvar index1,index2;\r\n\t\tfor (var i=0,l=kids.length;i<l;i++) {\r\n\t\t\tif (kids[i] == child1) { index1 = i; }\r\n\t\t\tif (kids[i] == child2) { index2 = i; }\r\n\t\t\tif (index1 != null && index2 != null) { break; }\r\n\t\t}\r\n\t\tif (i==l) { return; } // TODO: throw error?\r\n\t\tkids[index1] = child2;\r\n\t\tkids[index2] = child1;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Changes the depth of the specified child. Fails silently if the child is not a child of this container, or the index is out of range.\r\n\t * @param {DisplayObject} child\r\n\t * @param {Number} index  \r\n\t * @method setChildIndex\r\n\t **/\r\n\tp.setChildIndex = function(child, index) {\r\n\t\tvar kids = this.children, l=kids.length;\r\n\t\tif (child.parent != this || index < 0 || index >= l) { return; }\r\n\t\tfor (var i=0;i<l;i++) {\r\n\t\t\tif (kids[i] == child) { break; }\r\n\t\t}\r\n\t\tif (i==l || i == index) { return; }\r\n\t\tkids.splice(i,1);\r\n\t\tkids.splice(index,0,child);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns true if the specified display object either is this container or is a descendent (child, grandchild, etc)\r\n\t * of this container.\r\n\t * @method contains\r\n\t * @param {DisplayObject} child The DisplayObject to be checked.\r\n\t * @return {Boolean} true if the specified display object either is this container or is a descendent.\r\n\t **/\r\n\tp.contains = function(child) {\r\n\t\twhile (child) {\r\n\t\t\tif (child == this) { return true; }\r\n\t\t\tchild = child.parent;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t/**\r\n\t * Tests whether the display object intersects the specified local point (ie. draws a pixel with alpha > 0 at the\r\n\t * specified position). This ignores the alpha, shadow and compositeOperation of the display object, and all\r\n\t * transform properties including regX/Y.\r\n\t * @method hitTest\r\n\t * @param {Number} x The x position to check in the display object's local coordinates.\r\n\t * @param {Number} y The y position to check in the display object's local coordinates.\r\n\t * @return {Boolean} A Boolean indicating whether there is a visible section of a DisplayObject that overlaps the specified\r\n\t * coordinates.\r\n\t **/\r\n\tp.hitTest = function(x, y) {\r\n\t\t// TODO: optimize to use the fast cache check where possible.\r\n\t\treturn (this.getObjectUnderPoint(x, y) != null);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns an array of all display objects under the specified coordinates that are in this container's display\r\n\t * list. This routine ignores any display objects with {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\r\n\t * set to `false`. The array will be sorted in order of visual depth, with the top-most display object at index 0.\r\n\t * This uses shape based hit detection, and can be an expensive operation to run, so it is best to use it carefully.\r\n\t * For example, if testing for objects under the mouse, test on tick (instead of on {{#crossLink \"DisplayObject/mousemove:event\"}}{{/crossLink}}),\r\n\t * and only if the mouse's position has changed.\r\n\t * \r\n\t * <ul>\r\n\t *     <li>By default (mode=0) this method evaluates all display objects.</li>\r\n\t *     <li>By setting the `mode` parameter to `1`, the {{#crossLink \"DisplayObject/mouseEnabled:property\"}}{{/crossLink}}\r\n\t * \t\tand {{#crossLink \"mouseChildren:property\"}}{{/crossLink}} properties will be respected.</li>\r\n\t * \t   <li>Setting the `mode` to `2` additionally excludes display objects that do not have active mouse event\r\n\t * \t   \tlisteners or a {{#crossLink \"DisplayObject:cursor:property\"}}{{/crossLink}} property. That is, only objects\r\n\t * \t   \tthat would normally intercept mouse interaction will be included. This can significantly improve performance\r\n\t * \t   \tin some cases by reducing the number of display objects that need to be tested.</li>\r\n\t * </li>\r\n\t * \r\n\t * This method accounts for both {{#crossLink \"DisplayObject/hitArea:property\"}}{{/crossLink}} and {{#crossLink \"DisplayObject/mask:property\"}}{{/crossLink}}.\r\n\t * @method getObjectsUnderPoint\r\n\t * @param {Number} x The x position in the container to test.\r\n\t * @param {Number} y The y position in the container to test.\r\n\t * @param {Number} [mode=0] The mode to use to determine which display objects to include. 0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\r\n\t * @return {Array} An Array of DisplayObjects under the specified coordinates.\r\n\t **/\r\n\tp.getObjectsUnderPoint = function(x, y, mode) {\r\n\t\tvar arr = [];\r\n\t\tvar pt = this.localToGlobal(x, y);\r\n\t\tthis._getObjectsUnderPoint(pt.x, pt.y, arr, mode>0, mode==1);\r\n\t\treturn arr;\r\n\t};\r\n\r\n\t/**\r\n\t * Similar to {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}}, but returns only the top-most display\r\n\t * object. This runs significantly faster than <code>getObjectsUnderPoint()</code>, but is still potentially an expensive\r\n\t * operation. See {{#crossLink \"Container/getObjectsUnderPoint\"}}{{/crossLink}} for more information.\r\n\t * @method getObjectUnderPoint\r\n\t * @param {Number} x The x position in the container to test.\r\n\t * @param {Number} y The y position in the container to test.\r\n\t * @param {Number} mode The mode to use to determine which display objects to include.  0-all, 1-respect mouseEnabled/mouseChildren, 2-only mouse opaque objects.\r\n\t * @return {DisplayObject} The top-most display object under the specified coordinates.\r\n\t **/\r\n\tp.getObjectUnderPoint = function(x, y, mode) {\r\n\t\tvar pt = this.localToGlobal(x, y);\r\n\t\treturn this._getObjectsUnderPoint(pt.x, pt.y, null, mode>0, mode==1);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Docced in superclass.\r\n\t */\r\n\tp.getBounds = function() {\r\n\t\treturn this._getBounds(null, true);\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Docced in superclass.\r\n\t */\r\n\tp.getTransformedBounds = function() {\r\n\t\treturn this._getBounds();\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a clone of this Container. Some properties that are specific to this instance's current context are\r\n\t * reverted to their defaults (for example .parent).\r\n\t * @method clone\r\n\t * @param {Boolean} [recursive=false] If true, all of the descendants of this container will be cloned recursively. If false, the\r\n\t * properties of the container will be cloned, but the new instance will not have any children.\r\n\t * @return {Container} A clone of the current Container instance.\r\n\t **/\r\n\tp.clone = function(recursive) {\r\n\t\tvar o = this._cloneProps(new Container());\r\n\t\tif (recursive) { this._cloneChildren(o); }\r\n\t\treturn o;\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a string representation of this object.\r\n\t * @method toString\r\n\t * @return {String} a string representation of the instance.\r\n\t **/\r\n\tp.toString = function() {\r\n\t\treturn \"[Container (name=\"+  this.name +\")]\";\r\n\t};\r\n\r\n\r\n// private methods:\r\n\t/**\r\n\t * @method _tick\r\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\r\n\t * @protected\r\n\t **/\r\n\tp._tick = function(evtObj) {\r\n\t\tif (this.tickChildren) {\r\n\t\t\tfor (var i=this.children.length-1; i>=0; i--) {\r\n\t\t\t\tvar child = this.children[i];\r\n\t\t\t\tif (child.tickEnabled && child._tick) { child._tick(evtObj); }\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.DisplayObject__tick(evtObj);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Recursively clones all children of this container, and adds them to the target container.\r\n\t * @method cloneChildren\r\n\t * @protected\r\n\t * @param {Container} o The target container.\r\n\t **/\r\n\tp._cloneChildren = function(o) {\r\n\t\tif (o.children.length) { o.removeAllChildren(); }\r\n\t\tvar arr = o.children;\r\n\t\tfor (var i=0, l=this.children.length; i<l; i++) {\r\n\t\t\tvar clone = this.children[i].clone(true);\r\n\t\t\tclone.parent = o;\r\n\t\t\tarr.push(clone);\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Removes the child at the specified index from the display list, and sets its parent to null.\r\n\t * Used by `removeChildAt`, `addChild`, and `addChildAt`.\r\n\t * @method removeChildAt\r\n\t * @protected\r\n\t * @param {Number} index The index of the child to remove.\r\n\t * @param {Boolean} [silent] Prevents dispatch of `removed` event if true.\r\n\t * @return {Boolean} true if the child (or children) was removed, or false if any index was out of range.\r\n\t **/\r\n\tp._removeChildAt = function(index, silent) {\r\n\t\tif (index < 0 || index > this.children.length-1) { return false; }\r\n\t\tvar child = this.children[index];\r\n\t\tif (child) { child.parent = null; }\r\n\t\tthis.children.splice(index, 1);\r\n\t\tif (!silent) { child.dispatchEvent(\"removed\"); }\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/**\r\n\t * @method _getObjectsUnderPoint\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @param {Array} arr\r\n\t * @param {Boolean} mouse If true, it will respect mouse interaction properties like mouseEnabled, mouseChildren, and active listeners.\r\n\t * @param {Boolean} activeListener If true, there is an active mouse event listener on a parent object.\r\n\t * @param {Number} currentDepth Indicates the current depth of the search.\r\n\t * @return {DisplayObject}\r\n\t * @protected\r\n\t **/\r\n\tp._getObjectsUnderPoint = function(x, y, arr, mouse, activeListener, currentDepth) {\r\n\t\tcurrentDepth = currentDepth || 0;\r\n\t\tif (!currentDepth && !this._testMask(this, x, y)) { return null; }\r\n\t\tvar mtx, ctx = createjs.DisplayObject._hitTestContext;\r\n\t\tactiveListener = activeListener || (mouse&&this._hasMouseEventListener());\r\n\r\n\t\t// draw children one at a time, and check if we get a hit:\r\n\t\tvar children = this.children, l = children.length;\r\n\t\tfor (var i=l-1; i>=0; i--) {\r\n\t\t\tvar child = children[i];\r\n\t\t\tvar hitArea = child.hitArea;\r\n\t\t\tif (!child.visible || (!hitArea && !child.isVisible()) || (mouse && !child.mouseEnabled)) { continue; }\r\n\t\t\tif (!hitArea && !this._testMask(child, x, y)) { continue; }\r\n\t\t\t\r\n\t\t\t// if a child container has a hitArea then we only need to check its hitAre2a, so we can treat it as a normal DO:\r\n\t\t\tif (!hitArea && child instanceof Container) {\r\n\t\t\t\tvar result = child._getObjectsUnderPoint(x, y, arr, mouse, activeListener, currentDepth+1);\r\n\t\t\t\tif (!arr && result) { return (mouse && !this.mouseChildren) ? this : result; }\r\n\t\t\t} else {\r\n\t\t\t\tif (mouse && !activeListener && !child._hasMouseEventListener()) { continue; }\r\n\t\t\t\t\r\n\t\t\t\t// TODO: can we pass displayProps forward, to avoid having to calculate this backwards every time? It's kind of a mixed bag. When we're only hunting for DOs with event listeners, it may not make sense.\r\n\t\t\t\tvar props = child.getConcatenatedDisplayProps(child._props);\r\n\t\t\t\tmtx = props.matrix;\r\n\t\t\t\t\r\n\t\t\t\tif (hitArea) {\r\n\t\t\t\t\tmtx.appendMatrix(hitArea.getMatrix(hitArea._props.matrix));\r\n\t\t\t\t\tprops.alpha = hitArea.alpha;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tctx.globalAlpha = props.alpha;\r\n\t\t\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\r\n\t\t\t\t(hitArea||child).draw(ctx);\r\n\t\t\t\tif (!this._testHit(ctx)) { continue; }\r\n\t\t\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\t\tctx.clearRect(0, 0, 2, 2);\r\n\t\t\t\tif (arr) { arr.push(child); }\r\n\t\t\t\telse { return (mouse && !this.mouseChildren) ? this : child; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _testMask\r\n\t * @param {DisplayObject} target\r\n\t * @param {Number} x\r\n\t * @param {Number} y\r\n\t * @return {Boolean} Indicates whether the x/y is within the masked region.\r\n\t * @protected\r\n\t **/\r\n\tp._testMask = function(target, x, y) {\r\n\t\tvar mask = target.mask;\r\n\t\tif (!mask || !mask.graphics || mask.graphics.isEmpty()) { return true; }\r\n\t\t\r\n\t\tvar mtx = this._props.matrix, parent = target.parent;\r\n\t\tmtx = parent ? parent.getConcatenatedMatrix(mtx) : mtx.identity();\r\n\t\tmtx = mask.getMatrix(mask._props.matrix).prependMatrix(mtx);\r\n\t\t\r\n\t\tvar ctx = createjs.DisplayObject._hitTestContext;\r\n\t\tctx.setTransform(mtx.a,  mtx.b, mtx.c, mtx.d, mtx.tx-x, mtx.ty-y);\r\n\t\t\r\n\t\t// draw the mask as a solid fill:\r\n\t\tmask.graphics.drawAsPath(ctx);\r\n\t\tctx.fillStyle = \"#000\";\r\n\t\tctx.fill();\r\n\t\t\r\n\t\tif (!this._testHit(ctx)) { return false; }\r\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\tctx.clearRect(0, 0, 2, 2);\r\n\t\t\r\n\t\treturn true;\r\n\t};\r\n\t\r\n\t/**\r\n\t * @method _getBounds\r\n\t * @param {Matrix2D} matrix\r\n\t * @param {Boolean} ignoreTransform If true, does not apply this object's transform.\r\n\t * @return {Rectangle}\r\n\t * @protected\r\n\t **/\r\n\tp._getBounds = function(matrix, ignoreTransform) {\r\n\t\tvar bounds = this.DisplayObject_getBounds();\r\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\r\n\t\t\r\n\t\tvar mtx = this._props.matrix;\r\n\t\tmtx = ignoreTransform ? mtx.identity() : this.getMatrix(mtx);\r\n\t\tif (matrix) { mtx.prependMatrix(matrix); }\r\n\t\t\r\n\t\tvar l = this.children.length, rect=null;\r\n\t\tfor (var i=0; i<l; i++) {\r\n\t\t\tvar child = this.children[i];\r\n\t\t\tif (!child.visible || !(bounds = child._getBounds(mtx))) { continue; }\r\n\t\t\tif (rect) { rect.extend(bounds.x, bounds.y, bounds.width, bounds.height); }\r\n\t\t\telse { rect = bounds.clone(); }\r\n\t\t}\r\n\t\treturn rect;\r\n\t};\r\n\r\n\r\n\tcreatejs.Container = createjs.promote(Container, \"DisplayObject\");\r\n}());\n\n//##############################################################################\n// Stage.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A stage is the root level {{#crossLink \"Container\"}}{{/crossLink}} for a display list. Each time its {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * method is called, it will render its display list to its target canvas.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a stage, adds a child to it, then uses {{#crossLink \"Ticker\"}}{{/crossLink}} to update the child\n\t * and redraw the stage using {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvasElementId\");\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t *      stage.addChild(image);\n\t *      createjs.Ticker.addEventListener(\"tick\", handleTick);\n\t *      function handleTick(event) {\n\t *          image.x += 10;\n\t *          stage.update();\n\t *      }\n\t *\n\t * @class Stage\n\t * @extends Container\n\t * @constructor\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that the Stage will render to, or the string id\n\t * of a canvas object in the current document.\n\t **/\n\tfunction Stage(canvas) {\n\t\tthis.Container_constructor();\n\t\n\t\n\t// public properties:\n\t\t/**\n\t\t * Indicates whether the stage should automatically clear the canvas before each render. You can set this to <code>false</code>\n\t\t * to manually control clearing (for generative art, or when pointing multiple stages at the same canvas for\n\t\t * example).\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var stage = new createjs.Stage(\"canvasId\");\n\t\t *      stage.autoClear = false;\n\t\t *\n\t\t * @property autoClear\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.autoClear = true;\n\t\n\t\t/**\n\t\t * The canvas the stage will render to. Multiple stages can share a single canvas, but you must disable autoClear for all but the\n\t\t * first stage that will be ticked (or they will clear each other's render).\n\t\t *\n\t\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t\t * new canvas or mouse events will not work as expected. For example:\n\t\t *\n\t\t *      myStage.enableDOMEvents(false);\n\t\t *      myStage.canvas = anotherCanvas;\n\t\t *      myStage.enableDOMEvents(true);\n\t\t *\n\t\t * @property canvas\n\t\t * @type HTMLCanvasElement | Object\n\t\t **/\n\t\tthis.canvas = (typeof canvas == \"string\") ? document.getElementById(canvas) : canvas;\n\t\n\t\t/**\n\t\t * The current mouse X position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseX\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseX = 0;\n\t\n\t\t/**\n\t\t * The current mouse Y position on the canvas. If the mouse leaves the canvas, this will indicate the most recent\n\t\t * position over the canvas, and mouseInBounds will be set to false.\n\t\t * @property mouseY\n\t\t * @type Number\n\t\t * @readonly\n\t\t **/\n\t\tthis.mouseY = 0;\n\t\n\t\t/**\n\t\t * Specifies the area of the stage to affect when calling update. This can be use to selectively\n\t\t * re-draw specific regions of the canvas. If null, the whole canvas area is drawn.\n\t\t * @property drawRect\n\t\t * @type {Rectangle}\n\t\t */\n\t\tthis.drawRect = null;\n\t\n\t\t/**\n\t\t * Indicates whether display objects should be rendered on whole pixels. You can set the\n\t\t * {{#crossLink \"DisplayObject/snapToPixel\"}}{{/crossLink}} property of\n\t\t * display objects to false to enable/disable this behaviour on a per instance basis.\n\t\t * @property snapToPixelEnabled\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.snapToPixelEnabled = false;\n\t\n\t\t/**\n\t\t * Indicates whether the mouse is currently within the bounds of the canvas.\n\t\t * @property mouseInBounds\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseInBounds = false;\n\t\n\t\t/**\n\t\t * If true, tick callbacks will be called on all display objects on the stage prior to rendering to the canvas.\n\t\t * @property tickOnUpdate\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.tickOnUpdate = true;\n\t\n\t\t/**\n\t\t * If true, mouse move events will continue to be called when the mouse leaves the target canvas. See\n\t\t * {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}}, and {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t\t * x/y/rawX/rawY.\n\t\t * @property mouseMoveOutside\n\t\t * @type Boolean\n\t\t * @default false\n\t\t **/\n\t\tthis.mouseMoveOutside = false;\n\t\t\n\t\t\n\t\t/**\n\t\t * Prevents selection of other elements in the html page if the user clicks and drags, or double clicks on the canvas.\n\t\t * This works by calling `preventDefault()` on any mousedown events (or touch equivalent) originating on the canvas.\n\t\t * @property preventSelection\n\t\t * @type Boolean\n\t\t * @default true\n\t\t **/\n\t\tthis.preventSelection = true;\n\t\n\t\t/**\n\t\t * The hitArea property is not supported for Stage.\n\t\t * @property hitArea\n\t\t * @type {DisplayObject}\n\t\t * @default null\n\t\t */\n\t\t \n\t\t \n\t// private properties:\n\t\t/**\n\t\t * Holds objects with data for each active pointer id. Each object has the following properties:\n\t\t * x, y, event, target, overTarget, overX, overY, inBounds, posEvtObj (native event that last updated position)\n\t\t * @property _pointerData\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerData = {};\n\t\n\t\t/**\n\t\t * Number of active pointers.\n\t\t * @property _pointerCount\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._pointerCount = 0;\n\t\n\t\t/**\n\t\t * The ID of the primary pointer.\n\t\t * @property _primaryPointerID\n\t\t * @type {Object}\n\t\t * @private\n\t\t */\n\t\tthis._primaryPointerID = null;\n\t\n\t\t/**\n\t\t * @property _mouseOverIntervalID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._mouseOverIntervalID = null;\n\t\t\n\t\t/**\n\t\t * @property _nextStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._nextStage = null;\n\t\t\n\t\t/**\n\t\t * @property _prevStage\n\t\t * @protected\n\t\t * @type Stage\n\t\t **/\n\t\tthis._prevStage = null;\n\t\t\n\t\t\n\t// initialize:\n\t\tthis.enableDOMEvents(true);\n\t}\n\tvar p = createjs.extend(Stage, createjs.Container);\n\n// events:\n\t/**\n\t * Dispatched when the user moves the mouse over the canvas.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemousemove\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user presses their left mouse button on the canvas. See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event stagemousedown\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the user the user presses somewhere on the stage, then releases the mouse button anywhere that the page can detect it (this varies slightly between browsers).\n\t * You can use {{#crossLink \"Stage/mouseInBounds:property\"}}{{/crossLink}} to check whether the mouse is currently within the stage bounds.\n\t * See the {{#crossLink \"MouseEvent\"}}{{/crossLink}} class for a listing of event properties.\n\t * @event stagemouseup\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves from within the canvas area (mouseInBounds == true) to outside it (mouseInBounds == false).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseleave\n\t * @since 0.7.0\n\t */\n\n\t/**\n\t * Dispatched when the mouse moves into the canvas area (mouseInBounds == false) from outside it (mouseInBounds == true).\n\t * This is currently only dispatched for mouse input (not touch). See the {{#crossLink \"MouseEvent\"}}{{/crossLink}}\n\t * class for a listing of event properties.\n\t * @event mouseenter\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the tick event is propagated through the display list.\n\t * You can call preventDefault on the event object to cancel propagating the tick event.\n\t * @event tickstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the tick event is propagated through the display list. Does not fire if\n\t * tickOnUpdate is false. Precedes the \"drawstart\" event.\n\t * @event tickend\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it.\n\t * You can call preventDefault on the event object to cancel the draw.\n\t * @event drawstart\n\t * @since 0.7.0\n\t */\n\t \n\t/**\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t * @event drawend\n\t * @since 0.7.0\n\t */\n\n\t \n// getter / setters:\n\t/**\n\t * Specifies a target stage that will have mouse / touch interactions relayed to it after this stage handles them.\n\t * This can be useful in cases where you have multiple layered canvases and want user interactions\n\t * events to pass through. For example, this would relay mouse events from topStage to bottomStage:\n\t *\n\t *      topStage.nextStage = bottomStage;\n\t *\n\t * To disable relaying, set nextStage to null.\n\t * \n\t * MouseOver, MouseOut, RollOver, and RollOut interactions are also passed through using the mouse over settings\n\t * of the top-most stage, but are only processed if the target stage has mouse over interactions enabled.\n\t * Considerations when using roll over in relay targets:<OL>\n\t * <LI> The top-most (first) stage must have mouse over interactions enabled (via enableMouseOver)</LI>\n\t * <LI> All stages that wish to participate in mouse over interaction must enable them via enableMouseOver</LI>\n\t * <LI> All relay targets will share the frequency value of the top-most stage</LI>\n\t * </OL>\n\t * To illustrate, in this example the targetStage would process mouse over interactions at 10hz (despite passing\n\t * 30 as it's desired frequency):\n\t * \ttopStage.nextStage = targetStage;\n\t * \ttopStage.enableMouseOver(10);\n\t * \ttargetStage.enableMouseOver(30);\n\t * \n\t * If the target stage's canvas is completely covered by this stage's canvas, you may also want to disable its\n\t * DOM events using:\n\t * \n\t *\ttargetStage.enableDOMEvents(false);\n\t * \n\t * @property nextStage\n\t * @type {Stage}\n\t **/\n\tp._get_nextStage = function() {\n\t\treturn this._nextStage;\n\t};\n\tp._set_nextStage = function(value) {\n\t\tif (this._nextStage) { this._nextStage._prevStage = null; }\n\t\tif (value) { value._prevStage = this; }\n\t\tthis._nextStage = value;\n\t};\n\t\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tnextStage: { get: p._get_nextStage, set: p._set_nextStage }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// public methods:\n\t/**\n\t * Each time the update method is called, the stage will call {{#crossLink \"Stage/tick\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false,\n\t * and then render the display list to the canvas.\n\t *\n\t * @method update\n\t * @param {Object} [props] Props object to pass to `tick()`. Should usually be a {{#crossLink \"Ticker\"}}{{/crossLink}} event object, or similar object with a delta property.\n\t **/\n\tp.update = function(props) {\n\t\tif (!this.canvas) { return; }\n\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\tif (this.dispatchEvent(\"drawstart\", false, true) === false) { return; }\n\t\tcreatejs.DisplayObject._snapToPixelEnabled = this.snapToPixelEnabled;\n\t\tvar r = this.drawRect, ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tif (this.autoClear) {\n\t\t\tif (r) { ctx.clearRect(r.x, r.y, r.width, r.height); }\n\t\t\telse { ctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1); }\n\t\t}\n\t\tctx.save();\n\t\tif (this.drawRect) {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(r.x, r.y, r.width, r.height);\n\t\t\tctx.clip();\n\t\t}\n\t\tthis.updateContext(ctx);\n\t\tthis.draw(ctx, false);\n\t\tctx.restore();\n\t\tthis.dispatchEvent(\"drawend\");\n\t};\n\t\n\t/**\n\t * Propagates a tick event through the display list. This is automatically called by {{#crossLink \"Stage/update\"}}{{/crossLink}}\n\t * unless {{#crossLink \"Stage/tickOnUpdate:property\"}}{{/crossLink}} is set to false.\n\t *\n\t * If a props object is passed to `tick()`, then all of its properties will be copied to the event object that is\n\t * propagated to listeners.\n\t *\n\t * Some time-based features in EaselJS (for example {{#crossLink \"Sprite/framerate\"}}{{/crossLink}} require that\n\t * a {{#crossLink \"Ticker/tick:event\"}}{{/crossLink}} event object (or equivalent object with a delta property) be\n\t * passed as the `props` parameter to `tick()`. For example:\n\t *\n\t * \tTicker.on(\"tick\", handleTick);\n\t * \tfunction handleTick(evtObj) {\n\t * \t\t// clone the event object from Ticker, and add some custom data to it:\n\t * \t\tvar evt = evtObj.clone().set({greeting:\"hello\", name:\"world\"});\n\t * \t\t\n\t * \t\t// pass it to stage.update():\n\t * \t\tmyStage.update(evt); // subsequently calls tick() with the same param\n\t * \t}\n\t * \t\n\t * \t// ...\n\t * \tmyDisplayObject.on(\"tick\", handleDisplayObjectTick);\n\t * \tfunction handleDisplayObjectTick(evt) {\n\t * \t\tconsole.log(evt.delta); // the delta property from the Ticker tick event object\n\t * \t\tconsole.log(evt.greeting, evt.name); // custom data: \"hello world\"\n\t * \t}\n\t * \n\t * @method tick\n\t * @param {Object} [props] An object with properties that should be copied to the event object. Should usually be a Ticker event object, or similar object with a delta property.\n\t **/\n\tp.tick = function(props) {\n\t\tif (!this.tickEnabled || this.dispatchEvent(\"tickstart\", false, true) === false) { return; }\n\t\tvar evtObj = new createjs.Event(\"tick\");\n\t\tif (props) {\n\t\t\tfor (var n in props) {\n\t\t\t\tif (props.hasOwnProperty(n)) { evtObj[n] = props[n]; }\n\t\t\t}\n\t\t}\n\t\tthis._tick(evtObj);\n\t\tthis.dispatchEvent(\"tickend\");\n\t};\n\n\t/**\n\t * Default event handler that calls the Stage {{#crossLink \"Stage/update\"}}{{/crossLink}} method when a {{#crossLink \"DisplayObject/tick:event\"}}{{/crossLink}}\n\t * event is received. This allows you to register a Stage instance as a event listener on {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t * directly, using:\n\t *\n\t *      Ticker.addEventListener(\"tick\", myStage);\n\t *\n\t * Note that if you subscribe to ticks using this pattern, then the tick event object will be passed through to\n\t * display object tick handlers, instead of <code>delta</code> and <code>paused</code> parameters.\n\t * @property handleEvent\n\t * @type Function\n\t **/\n\tp.handleEvent = function(evt) {\n\t\tif (evt.type == \"tick\") { this.update(evt); }\n\t};\n\n\t/**\n\t * Clears the target canvas. Useful if {{#crossLink \"Stage/autoClear:property\"}}{{/crossLink}} is set to `false`.\n\t * @method clear\n\t **/\n\tp.clear = function() {\n\t\tif (!this.canvas) { return; }\n\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.clearRect(0, 0, this.canvas.width+1, this.canvas.height+1);\n\t};\n\n\t/**\n\t * Returns a data url that contains a Base64-encoded image of the contents of the stage. The returned data url can\n\t * be specified as the src value of an image element.\n\t * @method toDataURL\n\t * @param {String} [backgroundColor] The background color to be used for the generated image. Any valid CSS color\n\t * value is allowed. The default value is a transparent background.\n\t * @param {String} [mimeType=\"image/png\"] The MIME type of the image format to be create. The default is \"image/png\". If an unknown MIME type\n\t * is passed in, or if the browser does not support the specified MIME type, the default value will be used.\n\t * @return {String} a Base64 encoded image.\n\t **/\n\tp.toDataURL = function(backgroundColor, mimeType) {\n\t\tvar data, ctx = this.canvas.getContext('2d'), w = this.canvas.width, h = this.canvas.height;\n\n\t\tif (backgroundColor) {\n\t\t\tdata = ctx.getImageData(0, 0, w, h);\n\t\t\tvar compositeOperation = ctx.globalCompositeOperation;\n\t\t\tctx.globalCompositeOperation = \"destination-over\";\n\t\t\t\n\t\t\tctx.fillStyle = backgroundColor;\n\t\t\tctx.fillRect(0, 0, w, h);\n\t\t}\n\n\t\tvar dataURL = this.canvas.toDataURL(mimeType||\"image/png\");\n\n\t\tif(backgroundColor) {\n\t\t\tctx.putImageData(data, 0, 0);\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t}\n\n\t\treturn dataURL;\n\t};\n\n\t/**\n\t * Enables or disables (by passing a frequency of 0) mouse over ({{#crossLink \"DisplayObject/mouseover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/mouseout:event\"}}{{/crossLink}}) and roll over events ({{#crossLink \"DisplayObject/rollover:event\"}}{{/crossLink}}\n\t * and {{#crossLink \"DisplayObject/rollout:event\"}}{{/crossLink}}) for this stage's display list. These events can\n\t * be expensive to generate, so they are disabled by default. The frequency of the events can be controlled\n\t * independently of mouse move events via the optional `frequency` parameter.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var stage = new createjs.Stage(\"canvasId\");\n\t *      stage.enableMouseOver(10); // 10 updates per second\n\t *\n\t * @method enableMouseOver\n\t * @param {Number} [frequency=20] Optional param specifying the maximum number of times per second to broadcast\n\t * mouse over/out events. Set to 0 to disable mouse over events completely. Maximum is 50. A lower frequency is less\n\t * responsive, but uses less CPU.\n\t **/\n\tp.enableMouseOver = function(frequency) {\n\t\tif (this._mouseOverIntervalID) {\n\t\t\tclearInterval(this._mouseOverIntervalID);\n\t\t\tthis._mouseOverIntervalID = null;\n\t\t\tif (frequency == 0) {\n\t\t\t\tthis._testMouseOver(true);\n\t\t\t}\n\t\t}\n\t\tif (frequency == null) { frequency = 20; }\n\t\telse if (frequency <= 0) { return; }\n\t\tvar o = this;\n\t\tthis._mouseOverIntervalID = setInterval(function(){ o._testMouseOver(); }, 1000/Math.min(50,frequency));\n\t};\n\n\t/**\n\t * Enables or disables the event listeners that stage adds to DOM elements (window, document and canvas). It is good\n\t * practice to disable events when disposing of a Stage instance, otherwise the stage will continue to receive\n\t * events from the page.\n\t *\n\t * When changing the canvas property you must disable the events on the old canvas, and enable events on the\n\t * new canvas or mouse events will not work as expected. For example:\n\t *\n\t *      myStage.enableDOMEvents(false);\n\t *      myStage.canvas = anotherCanvas;\n\t *      myStage.enableDOMEvents(true);\n\t *\n\t * @method enableDOMEvents\n\t * @param {Boolean} [enable=true] Indicates whether to enable or disable the events. Default is true.\n\t **/\n\tp.enableDOMEvents = function(enable) {\n\t\tif (enable == null) { enable = true; }\n\t\tvar n, o, ls = this._eventListeners;\n\t\tif (!enable && ls) {\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.removeEventListener(n, o.f, false);\n\t\t\t}\n\t\t\tthis._eventListeners = null;\n\t\t} else if (enable && !ls && this.canvas) {\n\t\t\tvar t = window.addEventListener ? window : document;\n\t\t\tvar _this = this;\n\t\t\tls = this._eventListeners = {};\n\t\t\tls[\"mouseup\"] = {t:t, f:function(e) { _this._handleMouseUp(e)} };\n\t\t\tls[\"mousemove\"] = {t:t, f:function(e) { _this._handleMouseMove(e)} };\n\t\t\tls[\"dblclick\"] = {t:this.canvas, f:function(e) { _this._handleDoubleClick(e)} };\n\t\t\tls[\"mousedown\"] = {t:this.canvas, f:function(e) { _this._handleMouseDown(e)} };\n\n\t\t\tfor (n in ls) {\n\t\t\t\to = ls[n];\n\t\t\t\to.t.addEventListener(n, o.f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Stage instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"Stage cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Stage (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _getElementRect\n\t * @protected\n\t * @param {HTMLElement} e\n\t **/\n\tp._getElementRect = function(e) {\n\t\tvar bounds;\n\t\ttry { bounds = e.getBoundingClientRect(); } // this can fail on disconnected DOM elements in IE9\n\t\tcatch (err) { bounds = {top: e.offsetTop, left: e.offsetLeft, width:e.offsetWidth, height:e.offsetHeight}; }\n\n\t\tvar offX = (window.pageXOffset || document.scrollLeft || 0) - (document.clientLeft || document.body.clientLeft || 0);\n\t\tvar offY = (window.pageYOffset || document.scrollTop || 0) - (document.clientTop  || document.body.clientTop  || 0);\n\n\t\tvar styles = window.getComputedStyle ? getComputedStyle(e,null) : e.currentStyle; // IE <9 compatibility.\n\t\tvar padL = parseInt(styles.paddingLeft)+parseInt(styles.borderLeftWidth);\n\t\tvar padT = parseInt(styles.paddingTop)+parseInt(styles.borderTopWidth);\n\t\tvar padR = parseInt(styles.paddingRight)+parseInt(styles.borderRightWidth);\n\t\tvar padB = parseInt(styles.paddingBottom)+parseInt(styles.borderBottomWidth);\n\n\t\t// note: in some browsers bounds properties are read only.\n\t\treturn {\n\t\t\tleft: bounds.left+offX+padL,\n\t\t\tright: bounds.right+offX-padR,\n\t\t\ttop: bounds.top+offY+padT,\n\t\t\tbottom: bounds.bottom+offY-padB\n\t\t}\n\t};\n\n\t/**\n\t * @method _getPointerData\n\t * @protected\n\t * @param {Number} id\n\t **/\n\tp._getPointerData = function(id) {\n\t\tvar data = this._pointerData[id];\n\t\tif (!data) { data = this._pointerData[id] = {x:0,y:0}; }\n\t\treturn data;\n\t};\n\n\t/**\n\t * @method _handleMouseMove\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseMove = function(e) {\n\t\tif(!e){ e = window.event; }\n\t\tthis._handlePointerMove(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerMove\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerMove = function(id, e, pageX, pageY, owner) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\tif (!this.canvas) { return; }\n\t\tvar nextStage=this._nextStage, o=this._getPointerData(id);\n\n\t\tvar inBounds = o.inBounds;\n\t\tthis._updatePointerPosition(id, e, pageX, pageY);\n\t\tif (inBounds || o.inBounds || this.mouseMoveOutside) {\n\t\t\tif (id === -1 && o.inBounds == !inBounds) {\n\t\t\t\tthis._dispatchMouseEvent(this, (inBounds ? \"mouseleave\" : \"mouseenter\"), false, id, o, e);\n\t\t\t}\n\t\t\t\n\t\t\tthis._dispatchMouseEvent(this, \"stagemousemove\", false, id, o, e);\n\t\t\tthis._dispatchMouseEvent(o.target, \"pressmove\", true, id, o, e);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._handlePointerMove(id, e, pageX, pageY, null);\n\t};\n\n\t/**\n\t * @method _updatePointerPosition\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t **/\n\tp._updatePointerPosition = function(id, e, pageX, pageY) {\n\t\tvar rect = this._getElementRect(this.canvas);\n\t\tpageX -= rect.left;\n\t\tpageY -= rect.top;\n\n\t\tvar w = this.canvas.width;\n\t\tvar h = this.canvas.height;\n\t\tpageX /= (rect.right-rect.left)/w;\n\t\tpageY /= (rect.bottom-rect.top)/h;\n\t\tvar o = this._getPointerData(id);\n\t\tif (o.inBounds = (pageX >= 0 && pageY >= 0 && pageX <= w-1 && pageY <= h-1)) {\n\t\t\to.x = pageX;\n\t\t\to.y = pageY;\n\t\t} else if (this.mouseMoveOutside) {\n\t\t\to.x = pageX < 0 ? 0 : (pageX > w-1 ? w-1 : pageX);\n\t\t\to.y = pageY < 0 ? 0 : (pageY > h-1 ? h-1 : pageY);\n\t\t}\n\n\t\to.posEvtObj = e;\n\t\to.rawX = pageX;\n\t\to.rawY = pageY;\n\n\t\tif (id === this._primaryPointerID || id === -1) {\n\t\t\tthis.mouseX = o.x;\n\t\t\tthis.mouseY = o.y;\n\t\t\tthis.mouseInBounds = o.inBounds;\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleMouseUp\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseUp = function(e) {\n\t\tthis._handlePointerUp(-1, e, false);\n\t};\n\n\t/**\n\t * @method _handlePointerUp\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Boolean} clear\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerUp = function(id, e, clear, owner) {\n\t\tvar nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar target=null, oTarget = o.target;\n\t\tif (!owner && (oTarget || nextStage)) { target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\t\t\n\t\tif (o.down) { this._dispatchMouseEvent(this, \"stagemouseup\", false, id, o, e, target); o.down = false; }\n\t\t\n\t\tif (target == oTarget) { this._dispatchMouseEvent(oTarget, \"click\", true, id, o, e); }\n\t\tthis._dispatchMouseEvent(oTarget, \"pressup\", true, id, o, e);\n\t\t\n\t\tif (clear) {\n\t\t\tif (id==this._primaryPointerID) { this._primaryPointerID = null; }\n\t\t\tdelete(this._pointerData[id]);\n\t\t} else { o.target = null; }\n\t\t\n\t\tnextStage&&nextStage._handlePointerUp(id, e, clear, owner || target && this);\n\t};\n\n\t/**\n\t * @method _handleMouseDown\n\t * @protected\n\t * @param {MouseEvent} e\n\t **/\n\tp._handleMouseDown = function(e) {\n\t\tthis._handlePointerDown(-1, e, e.pageX, e.pageY);\n\t};\n\n\t/**\n\t * @method _handlePointerDown\n\t * @protected\n\t * @param {Number} id\n\t * @param {Event} e\n\t * @param {Number} pageX\n\t * @param {Number} pageY\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handlePointerDown = function(id, e, pageX, pageY, owner) {\n\t\tif (this.preventSelection) { e.preventDefault(); }\n\t\tif (this._primaryPointerID == null || id === -1) { this._primaryPointerID = id; } // mouse always takes over.\n\t\t\n\t\tif (pageY != null) { this._updatePointerPosition(id, e, pageX, pageY); }\n\t\tvar target = null, nextStage = this._nextStage, o = this._getPointerData(id);\n\t\tif (!owner) { target = o.target = this._getObjectsUnderPoint(o.x, o.y, null, true); }\n\n\t\tif (o.inBounds) { this._dispatchMouseEvent(this, \"stagemousedown\", false, id, o, e, target); o.down = true; }\n\t\tthis._dispatchMouseEvent(target, \"mousedown\", true, id, o, e);\n\t\t\n\t\tnextStage&&nextStage._handlePointerDown(id, e, pageX, pageY, owner || target && this);\n\t};\n\n\t/**\n\t * @method _testMouseOver\n\t * @param {Boolean} clear If true, clears the mouseover / rollover (ie. no target)\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t * @param {Stage} eventTarget The stage that the cursor is actively over.\n\t * @protected\n\t **/\n\tp._testMouseOver = function(clear, owner, eventTarget) {\n\t\tif (this._prevStage && owner === undefined) { return; } // redundant listener.\n\t\t\n\t\tvar nextStage = this._nextStage;\n\t\tif (!this._mouseOverIntervalID) {\n\t\t\t// not enabled for mouseover, but should still relay the event.\n\t\t\tnextStage&&nextStage._testMouseOver(clear, owner, eventTarget);\n\t\t\treturn;\n\t\t}\n\t\tvar o = this._getPointerData(-1);\n\t\t// only update if the mouse position has changed. This provides a lot of optimization, but has some trade-offs.\n\t\tif (!o || (!clear && this.mouseX == this._mouseOverX && this.mouseY == this._mouseOverY && this.mouseInBounds)) { return; }\n\t\t\n\t\tvar e = o.posEvtObj;\n\t\tvar isEventTarget = eventTarget || e&&(e.target == this.canvas);\n\t\tvar target=null, common = -1, cursor=\"\", t, i, l;\n\t\t\n\t\tif (!owner && (clear || this.mouseInBounds && isEventTarget)) {\n\t\t\ttarget = this._getObjectsUnderPoint(this.mouseX, this.mouseY, null, true);\n\t\t\tthis._mouseOverX = this.mouseX;\n\t\t\tthis._mouseOverY = this.mouseY;\n\t\t}\n\n\t\tvar oldList = this._mouseOverTarget||[];\n\t\tvar oldTarget = oldList[oldList.length-1];\n\t\tvar list = this._mouseOverTarget = [];\n\n\t\t// generate ancestor list and check for cursor:\n\t\tt = target;\n\t\twhile (t) {\n\t\t\tlist.unshift(t);\n\t\t\tif (!cursor) { cursor = t.cursor; }\n\t\t\tt = t.parent;\n\t\t}\n\t\tthis.canvas.style.cursor = cursor;\n\t\tif (!owner && eventTarget) { eventTarget.canvas.style.cursor = cursor; }\n\n\t\t// find common ancestor:\n\t\tfor (i=0,l=list.length; i<l; i++) {\n\t\t\tif (list[i] != oldList[i]) { break; }\n\t\t\tcommon = i;\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(oldTarget, \"mouseout\", true, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=oldList.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(oldList[i], \"rollout\", false, -1, o, e, target);\n\t\t}\n\n\t\tfor (i=list.length-1; i>common; i--) {\n\t\t\tthis._dispatchMouseEvent(list[i], \"rollover\", false, -1, o, e, oldTarget);\n\t\t}\n\n\t\tif (oldTarget != target) {\n\t\t\tthis._dispatchMouseEvent(target, \"mouseover\", true, -1, o, e, oldTarget);\n\t\t}\n\t\t\n\t\tnextStage&&nextStage._testMouseOver(clear, owner || target && this, eventTarget || isEventTarget && this);\n\t};\n\n\t/**\n\t * @method _handleDoubleClick\n\t * @protected\n\t * @param {MouseEvent} e\n\t * @param {Stage} owner Indicates that the event has already been captured & handled by the indicated stage.\n\t **/\n\tp._handleDoubleClick = function(e, owner) {\n\t\tvar target=null, nextStage=this._nextStage, o=this._getPointerData(-1);\n\t\tif (!owner) {\n\t\t\ttarget = this._getObjectsUnderPoint(o.x, o.y, null, true);\n\t\t\tthis._dispatchMouseEvent(target, \"dblclick\", true, -1, o, e);\n\t\t}\n\t\tnextStage&&nextStage._handleDoubleClick(e, owner || target && this);\n\t};\n\n\t/**\n\t * @method _dispatchMouseEvent\n\t * @protected\n\t * @param {DisplayObject} target\n\t * @param {String} type\n\t * @param {Boolean} bubbles\n\t * @param {Number} pointerId\n\t * @param {Object} o\n\t * @param {MouseEvent} [nativeEvent]\n\t * @param {DisplayObject} [relatedTarget]\n\t **/\n\tp._dispatchMouseEvent = function(target, type, bubbles, pointerId, o, nativeEvent, relatedTarget) {\n\t\t// TODO: might be worth either reusing MouseEvent instances, or adding a willTrigger method to avoid GC.\n\t\tif (!target || (!bubbles && !target.hasEventListener(type))) { return; }\n\t\t/*\n\t\t// TODO: account for stage transformations?\n\t\tthis._mtx = this.getConcatenatedMatrix(this._mtx).invert();\n\t\tvar pt = this._mtx.transformPoint(o.x, o.y);\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, pt.x, pt.y, nativeEvent, pointerId, pointerId==this._primaryPointerID || pointerId==-1, o.rawX, o.rawY);\n\t\t*/\n\t\tvar evt = new createjs.MouseEvent(type, bubbles, false, o.x, o.y, nativeEvent, pointerId, pointerId === this._primaryPointerID || pointerId === -1, o.rawX, o.rawY, relatedTarget);\n\t\ttarget.dispatchEvent(evt);\n\t};\n\n\n\tcreatejs.Stage = createjs.promote(Stage, \"Container\");\n}());\n\n//##############################################################################\n// StageGL.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n/*\n * README IF EDITING:\n * Terminology for developers:\n *\n * Vertex: a point that help defines a shape, 3 per triangle. Usually has an x,y,z but can have more/less info.\n * Vertex Property: a piece of information attached to the vertex like a vector3 containing x,y,z\n * Index/Indices: used in groups of 3 to define a triangle, points to vertices by their index in an array (some render\n * \t\tmodes do not use these)\n * Card: a group of 2 triangles used to display a rectangular image\n * U/V: common names for the [0-1] texture co-ordinates on an image\n * Batch: a single call to the renderer, best done as little as possible so multiple cards are put into a single batch\n * Buffer: WebGL array data\n * Program/Shader: For every vertex we run the Vertex shader. The results are used per pixel by the Fragment shader. When\n * \t\tcombined and paired these are a shader \"program\"\n * Texture: WebGL representation of image data and associated extra information\n * Slot: A space on the GPU into which textures can be loaded for use in a batch, using \"ActiveTexture\" switches texture slot.\n */\n\n(function () {\n\t\"use strict\";\n\n\t/**\n\t * A StageGL instance is the root level {{#crossLink \"Container\"}}{{/crossLink}} for an WebGL-optimized display list,\n\t * which is used in place of the usual {{#crossLink \"Stage\"}}{{/crossLink}}. This class should behave identically to\n\t * a {{#crossLink \"Stage\"}}{{/crossLink}} except for WebGL-specific functionality.\n\t *\n\t * Each time the {{#crossLink \"Stage/tick\"}}{{/crossLink}} method is called, the display list is rendered to the\n\t * target &lt;canvas/&gt; instance, ignoring non-WebGL-compatible display objects. On devices and browsers that don't\n\t * support WebGL, content will automatically be rendered to canvas 2D context instead.\n\t *\n\t * <h4>Limitations</h4>\n\t * - {{#crossLink \"Shape\"}}{{/crossLink}}, {{#crossLink \"Shadow\"}}{{/crossLink}}, and {{#crossLink \"Text\"}}{{/crossLink}}\n\t * \tare not rendered when added to the display list.\n\t * - To display something StageGL cannot render, {{#crossLink \"displayObject/cache\"}}{{/crossLink}} the object.\n\t *\tCaches can be rendered regardless of source.\n\t * - Images are wrapped as a webGL \"Texture\". Each graphics card has a limit to its concurrent Textures, too many \n\t * Textures will noticeably slow performance.\n\t * - Each cache counts as an individual Texture. As such {{#crossLink \"SpriteSheet\"}}{{/crossLink}} and \n\t * {{#crossLink \"SpriteSheetBuilder\"}}{{/crossLink}} are recommended practices to help keep texture counts low.\n\t * - To use any image node (DOM Image/Canvas Element) between multiple StageGL instances it must be a \n\t * {{#crossLink \"Bitmap/clone\"}}{{/crossLink}}, otherwise the GPU texture loading and tracking will get confused.\n\t * - to avoid an up/down scaled render you must call {{#crossLink \"StageGL/updateViewport\"}}{{/crossLink}} if you\n\t * resize your canvas after making a StageGL instance, this will properly size the WebGL context stored in memory.\n\t * - Best performance in demanding scenarios will come from manual management of texture memory, but it is handled\n\t * automatically by default. See {{#crossLink \"StageGL/releaseTexture\"}}{{/crossLink}} for details.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a StageGL instance, adds a child to it, then uses the EaselJS {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t * to update the child and redraw the stage.\n\t *\n\t *      var stage = new createjs.StageGL(\"canvasElementId\");\n\t *\n\t *      var image = new createjs.Bitmap(\"imagePath.png\");\n\t *      stage.addChild(image);\n\t *\n\t *      createjs.Ticker.on(\"tick\", handleTick);\n\t *\n\t *      function handleTick(event) {\n\t *          image.x += 10;\n\t *          stage.update();\n\t *      }\n\t *\n\t * <h4>Notes</h4>\n\t * - StageGL is not currently included in the minified version of EaselJS.\n\t * - {{#crossLink \"SpriteContainer\"}}{{/crossLink}} (the previous approach to WebGL with EaselJS) has been deprecated.\n\t * - Earlier versions of WebGL support in EaselJS (SpriteStage and SpriteContainer) had hard limitations on images\n\t * \tper container, which have been solved.\n\t *\n\t * @class StageGL\n\t * @extends Stage\n\t * @constructor\n\t * @param {HTMLCanvasElement | String | Object} canvas A canvas object that StageGL will render to, or the string id\n\t *  of a canvas object in the current DOM.\n\t * @param {Object} options All the option parameters in a reference object, some are not supported by some browsers.\n\t * @param {Boolean} [options.preserveBuffer=false] If `true`, the canvas is NOT auto-cleared by WebGL (the spec\n\t *  discourages setting this to `true`). This is useful if you want persistent draw effects.\n\t * @param {Boolean} [options.antialias=false] Specifies whether or not the browser's WebGL implementation should try\n\t *  to perform anti-aliasing. This will also enable linear pixel sampling on power-of-two textures (smoother images).\n\t * @param {Boolean} [options.transparent=false] If `true`, the canvas is transparent. This is <strong>very</strong>\n\t * expensive, and should be used with caution.\n\t * @param {Boolean} [options.premultiply=false] Alters color handling. If `true`, this assumes the shader must\n\t * account for pre-multiplied alpha. This can help avoid visual halo effects with some assets, but may also cause\n\t * problems with other assets.\n\t * @param {Integer} [options.autoPurge=1200] How often the system should automatically dump unused textures with\n\t * `purgeTextures(autoPurge)` every `autoPurge/2` draws. See {{#crossLink \"StageGL/purgeTextures\"}}{{/crossLink}} for more\n\t * information.\n\t */\n\tfunction StageGL(canvas, options) {\n\t\tthis.Stage_constructor(canvas);\n\n\t\tif (options !== undefined) {\n\t\t\tif (typeof options !== \"object\"){ throw(\"Invalid options object\"); }\n\t\t\tvar premultiply = options.premultiply;\n\t\t\tvar transparent = options.transparent;\n\t\t\tvar antialias = options.antialias;\n\t\t\tvar preserveBuffer = options.preserveBuffer;\n\t\t\tvar autoPurge = options.autoPurge;\n\t\t}\n\n// public properties:\n\t\t/**\n\t\t * Console log potential issues and problems. This is designed to have <em>minimal</em> performance impact, so\n\t\t * if extensive debugging information is required, this may be inadequate. See {{#crossLink \"WebGLInspector\"}}{{/crossLink}}\n\t\t * @property vocalDebug\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.vocalDebug = false;\n\n// private properties:\n\t\t/**\n\t\t * Specifies whether or not the canvas is auto-cleared by WebGL. The WebGL spec discourages `true`.\n\t\t * If true, the canvas is NOT auto-cleared by WebGL. Used when the canvas context is created and requires\n\t\t * context re-creation to update.\n\t\t * @property _preserveBuffer\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._preserveBuffer = preserveBuffer||false;\n\n\t\t/**\n\t\t * Specifies whether or not the browser's WebGL implementation should try to perform anti-aliasing.\n\t\t * @property _antialias\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._antialias = antialias||false;\n\n\t\t/**\n\t\t * Specifies whether or not the browser's WebGL implementation should be transparent.\n\t\t * @property _transparent\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._transparent = transparent||false;\n\n\t\t/**\n\t\t * Specifies whether or not StageGL is handling colours as premultiplied alpha.\n\t\t * @property _premultiply\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t */\n\t\tthis._premultiply = premultiply||false;\n\n\t\t/**\n\t\t * Internal value of {{#crossLink \"StageGL/autoPurge\"}}{{/crossLink}}\n\t\t * @property _autoPurge\n\t\t * @protected\n\t\t * @type {Integer}\n\t\t * @default null\n\t\t */\n\t\tthis._autoPurge = undefined;\n\t\tthis.autoPurge = autoPurge;\t//getter/setter handles setting the real value and validating\n\n\t\t/**\n\t\t * The width in px of the drawing surface saved in memory.\n\t\t * @property _viewportWidth\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._viewportWidth = 0;\n\n\t\t/**\n\t\t * The height in px of the drawing surface saved in memory.\n\t\t * @property _viewportHeight\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._viewportHeight = 0;\n\n\t\t/**\n\t\t * A 2D projection matrix used to convert WebGL's viewspace into canvas co-ordinates. Regular canvas display\n\t\t * uses Top-Left values of [0,0] where WebGL uses a Center [0,0] Top-Right [1,1] (euclidean) system.\n\t\t * @property _projectionMatrix\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._projectionMatrix = null;\n\n\t\t/**\n\t\t * The current WebGL canvas context. Often shorthanded to just \"gl\" in many parts of the code.\n\t\t * @property _webGLContext\n\t\t * @protected\n\t\t * @type {WebGLRenderingContext}\n\t\t * @default null\n\t\t */\n\t\tthis._webGLContext = null;\n\n\t\t/**\n\t\t * The color to use when the WebGL canvas has been cleared. May appear as a background color. Defaults to grey.\n\t\t * @property _clearColor\n\t\t * @protected\n\t\t * @type {Object}\n\t\t * @default {r: 0.50, g: 0.50, b: 0.50, a: 0.00}\n\t\t */\n\t\tthis._clearColor = {r: 0.50, g: 0.50, b: 0.50, a: 0.00};\n\n\t\t/**\n\t\t * The maximum number of cards (aka a single sprite) that can be drawn in one draw call. Use getter/setters to\n\t\t * modify otherwise internal buffers may be incorrect sizes.\n\t\t * @property _maxCardsPerBatch\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default StageGL.DEFAULT_MAX_BATCH_SIZE (10000)\n\t\t */\n\t\tthis._maxCardsPerBatch = StageGL.DEFAULT_MAX_BATCH_SIZE;\t\t\t\t\t\t\t\t\t\t\t\t\t\t//TODO: write getter/setters for this\n\n\t\t/**\n\t\t * The shader program used to draw the current batch.\n\t\t * @property _activeShader\n\t\t * @protected\n\t\t * @type {WebGLProgram}\n\t\t * @default null\n\t\t */\n\t\tthis._activeShader = null;\n\n\t\t/**\n\t\t * The vertex position data for the current draw call.\n\t\t * @property _vertices\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._vertices = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_vertices:property\"}}{{/crossLink}}.\n\t\t * @property _vertexPositionBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._vertexPositionBuffer = null;\n\n\t\t/**\n\t\t * The vertex U/V data for the current draw call.\n\t\t * @property _uvs\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._uvs = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_uvs:property\"}}{{/crossLink}}.\n\t\t * @property _uvPositionBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._uvPositionBuffer = null;\n\n\t\t/**\n\t\t * The vertex indices data for the current draw call.\n\t\t * @property _indices\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._indices = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_indices:property\"}}{{/crossLink}}.\n\t\t * @property _textureIndexBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._textureIndexBuffer = null;\n\n\t\t/**\n\t\t * The vertices data for the current draw call.\n\t\t * @property _alphas\n\t\t * @protected\n\t\t * @type {Float32Array}\n\t\t * @default null\n\t\t */\n\t\tthis._alphas = null;\n\n\t\t/**\n\t\t * The WebGL buffer attached to {{#crossLink \"StageGL/_alphas:property\"}}{{/crossLink}}.\n\t\t * @property _alphaBuffer\n\t\t * @protected\n\t\t * @type {WebGLBuffer}\n\t\t * @default null\n\t\t */\n\t\tthis._alphaBuffer = null;\n\n\t\t/**\n\t\t * An index based lookup of every WebGL Texture currently in use.\n\t\t * @property _drawTexture\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._textureDictionary = [];\n\n\t\t/**\n\t\t * A string based lookup hash of which index a texture is stored at in the dictionary. The lookup string is\n\t\t * often the src url.\n\t\t * @property _textureIDs\n\t\t * @protected\n\t\t * @type {Object}\n\t\t */\n\t\tthis._textureIDs = {};\n\n\t\t/**\n\t\t * An array of all the textures currently loaded into the GPU. The index in the array matches the GPU index.\n\t\t * @property _batchTextures\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._batchTextures = [];\n\n\t\t/**\n\t\t * An array of all the simple filler textures used to prevent issues with missing textures in a batch.\n\t\t * @property _baseTextures\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._baseTextures = [];\n\n\t\t/**\n\t\t * The number of concurrent textures the GPU can handle. This value is dynamically set from WebGL during initialization\n\t\t * via `gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)`. The WebGL spec states that the lowest guaranteed value is 8,\n\t\t * but it could be higher. Do not set this value higher than the value returned by the GPU. Setting it lower will\n\t\t * probably reduce performance, but may be advisable to reserve slots for custom filter work.\n\t\t * NOTE: Can also act as a length for {{#crossLink \"StageGL/_batchTextures:property\"}}.\n\t\t * @property _batchTextureCount\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 8\n\t\t */\n\t\tthis._batchTextureCount = 8;\n\n\t\t/**\n\t\t * The location at which the last texture was inserted into a GPU slot in {{#crossLink \"StageGL/_batchTextures:property\"}}{{/crossLink}}.\n\t\t * Manual control of this variable can yield improvements in performance by intelligently replacing textures\n\t\t * inside a batch to reduce texture re-load. It is impossible to write automated general use code, as it requires\n\t\t * display list look ahead inspection and/or render foreknowledge.\n\t\t * @property _lastTextureInsert\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default -1\n\t\t */\n\t\tthis._lastTextureInsert = -1;\n\n\t\t/**\n\t\t * The current batch being drawn, A batch consists of a call to `drawElements` on the GPU. Many of these calls\n\t\t * can occur per draw.\n\t\t * @property _batchId\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._batchID = 0;\n\n\t\t/**\n\t\t * The current draw being performed, may contain multiple batches. Comparing to {{#crossLink \"StageGL/_batchID:property\"}}{{/crossLink}}\n\t\t * can reveal batching efficiency.\n\t\t * @property _drawID\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._drawID = 0;\n\n\t\t/**\n\t\t * Used to prevent textures in certain GPU slots from being replaced by an insert.\n\t\t * @property _slotBlackList\n\t\t * @protected\n\t\t * @type {Array}\n\t\t */\n\t\tthis._slotBlacklist = [];\n\n\t\t/**\n\t\t * Used to prevent nested draw calls from accidentally overwriting drawing information by tracking depth.\n\t\t * @property _isDrawing\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._isDrawing = 0;\n\n\t\t/**\n\t\t * Used to ensure every canvas used as a texture source has a unique ID.\n\t\t * @property _lastTrackedCanvas\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t */\n\t\tthis._lastTrackedCanvas = 0;\n\n\t\t/**\n\t\t * Controls whether final rendering output of a {{#crossLink \"cacheDraw\"}}{{/crossLink}} is the canvas or a render\n\t\t * texture. See the {{#crossLink \"cache\"}}{{/crossLink}} function modifications for full implications and discussion.\n\t\t * @property isCacheControlled\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t * @todo LM: is this supposed to be _isCacheControlled since its private?\n\t\t */\n\t\tthis.isCacheControlled = false;\n\n\t\t/**\n\t\t * Used to counter-position the object being cached so it aligns with the cache surface. Additionally ensures\n\t\t * that all rendering starts with a top level container.\n\t\t * @property _cacheContainer\n\t\t * @protected\n\t\t * @type {Container}\n\t\t * @default An instance of an EaselJS Container.\n\t\t */\n\t\tthis._cacheContainer = new createjs.Container();\n\n\t\t// and begin\n\t\tthis._initializeWebGL();\n\t}\n\tvar p = createjs.extend(StageGL, createjs.Stage);\n\n// static methods:\n\t/**\n\t * Calculate the U/V co-ordinate based info for sprite frames. Instead of pixel count it uses a 0-1 space. Also includes\n\t * the ability to get info back for a specific frame, or only calculate that one frame.\n\t *\n\t *     //generate UV rects for all entries\n\t *     StageGL.buildUVRects( spriteSheetA );\n\t *     //generate all, fetch the first\n\t *     var firstFrame = StageGL.buildUVRects( spriteSheetB, 0 );\n\t *     //generate the rect for just a single frame for performance's sake\n\t *     var newFrame = StageGL.buildUVRects( dynamicSpriteSheet, newFrameIndex, true );\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method buildUVRects\n\t * @param  {SpriteSheet} spritesheet The spritesheet to find the frames on\n\t * @param  {int} [target=-1] The index of the frame to return\n\t * @param  {Boolean} [onlyTarget=false] Whether \"target\" is the only frame that gets calculated\n\t * @static\n\t * @return {Object} the target frame if supplied and present or a generic frame {t, l, b, r}\n\t */\n\tStageGL.buildUVRects = function (spritesheet, target, onlyTarget) {\n\t\tif (!spritesheet || !spritesheet._frames) { return null; }\n\t\tif (target === undefined) { target = -1; }\n\t\tif (onlyTarget === undefined) { onlyTarget = false; }\n\n\t\tvar start = (target != -1 && onlyTarget)?(target):(0);\n\t\tvar end = (target != -1 && onlyTarget)?(target+1):(spritesheet._frames.length);\n\t\tfor (var i=start; i<end; i++) {\n\t\t\tvar f = spritesheet._frames[i];\n\t\t\tif (f.uvRect || f.image.width <= 0 || f.image.height <= 0) { continue; }\n\n\t\t\tvar r = f.rect;\n\t\t\tf.uvRect = {\n\t\t\t\tt: r.y / f.image.height,\n\t\t\t\tl: r.x / f.image.width,\n\t\t\t\tb: (r.y + r.height) / f.image.height,\n\t\t\t\tr: (r.x + r.width) / f.image.width\n\t\t\t};\n\t\t}\n\n\t\treturn spritesheet._frames[(target != -1) ? target : 0].uvRect || {t:0, l:0, b:1, r:1};\n\t};\n\n\t/**\n\t * Test a context to see if it has WebGL enabled on it.\n\t * @method isWebGLActive\n\t * @param {CanvasContext} ctx The context to test\n\t * @static\n\t * @return {Boolean} Whether WebGL is enabled\n\t */\n\tStageGL.isWebGLActive = function (ctx) {\n\t\treturn ctx &&\n\t\t\tctx instanceof WebGLRenderingContext &&\n\t\t\ttypeof WebGLRenderingContext !== 'undefined';\n\t};\n\n// static properties:\n\t/**\n\t * The number of properties defined per vertex (x, y, textureU, textureV, textureIndex, alpha)\n\t * @property VERTEX_PROPERTY_COUNT\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 6\n\t * @readonly\n\t */\n\tStageGL.VERTEX_PROPERTY_COUNT = 6;\n\n\t/**\n\t * The number of triangle indices it takes to form a Card. 3 per triangle, 2 triangles.\n\t * @property INDICIES_PER_CARD\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 6\n\t * @readonly\n\t */\n\tStageGL.INDICIES_PER_CARD = 6;\n\n\t/**\n\t * The default value for the maximum number of cards we want to process in a batch. See\n\t * {{#crossLink \"StageGL/WEBGL_MAX_INDEX_NUM:property\"}}{{/crossLink}} for a hard limit.\n\t * @property DEFAULT_MAX_BATCH_SIZE\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 10000\n\t * @readonly\n\t */\n\tStageGL.DEFAULT_MAX_BATCH_SIZE = 10000;\n\n\t/**\n\t * The maximum size WebGL allows for element index numbers. Uses a 16 bit unsigned integer. It takes 6 indices to\n\t * make a unique card.\n\t * @property WEBGL_MAX_INDEX_NUM\n\t * @static\n\t * @final\n\t * @type {Number}\n\t * @default 65536\n\t * @readonly\n\t */\n\tStageGL.WEBGL_MAX_INDEX_NUM = Math.pow(2, 16);\n\n\t/**\n\t * Default U/V rect for dealing with full coverage from an image source.\n\t * @property UV_RECT\n\t * @static\n\t * @final\n\t * @type {Object}\n\t * @default {t:0, l:0, b:1, r:1}\n\t * @readonly\n\t */\n\tStageGL.UV_RECT = {t:0, l:0, b:1, r:1};\n\n\ttry {\n\t\t/**\n\t\t * Vertex positions for a card that covers the entire render. Used with render targets primarily.\n\t\t * @property COVER_VERT\n\t\t * @static\n\t\t * @final\n\t\t * @type {Float32Array}\n\t\t * @readonly\n\t\t */\n\t\tStageGL.COVER_VERT = new Float32Array([\n\t\t\t-1,\t\t 1,\t\t//TL\n\t\t\t1,\t\t 1,\t\t//TR\n\t\t\t-1,\t\t-1,\t\t//BL\n\t\t\t1,\t\t 1,\t\t//TR\n\t\t\t1,\t\t-1,\t\t//BR\n\t\t\t-1,\t\t-1\t\t//BL\n\t\t]);\n\n\t\t/**\n\t\t * U/V for {{#crossLink \"StageGL/COVER_VERT:property\"}}{{/crossLink}}.\n\t\t * @property COVER_UV\n\t\t * @static\n\t\t * @final\n\t\t * @type {Float32Array}\n\t\t * @readonly\n\t\t */\n\t\tStageGL.COVER_UV = new Float32Array([\n\t\t\t 0,\t\t 0,\t\t//TL\n\t\t\t 1,\t\t 0,\t\t//TR\n\t\t\t 0,\t\t 1,\t\t//BL\n\t\t\t 1,\t\t 0,\t\t//TR\n\t\t\t 1,\t\t 1,\t\t//BR\n\t\t\t 0,\t\t 1\t\t//BL\n\t\t]);\n\n\t\t/**\n\t\t * Flipped U/V for {{#crossLink \"StageGL:COVER_VERT:property\"}}{{/crossLink}}.\n\t\t * @property COVER_UV_FLIP\n\t\t * @static\n\t\t * @final\n\t\t * @type {Float32Array}\n\t\t * @readonly\n\t\t */\n\t\tStageGL.COVER_UV_FLIP = new Float32Array([\n\t\t\t 0,\t\t 1,\t\t//TL\n\t\t\t 1,\t\t 1,\t\t//TR\n\t\t\t 0,\t\t 0,\t\t//BL\n\t\t\t 1,\t\t 1,\t\t//TR\n\t\t\t 1,\t\t 0,\t\t//BR\n\t\t\t 0,\t\t 0\t\t//BL\n\t\t]);\n\t} catch(e) { /* Breaking in older browsers, but those browsers wont run StageGL so no recovery or warning needed */ }\n\n\t/**\n\t * Portion of the shader that contains the \"varying\" properties required in both vertex and fragment shaders. The\n\t * regular shader is designed to render all expected objects. Shader code may contain templates that are replaced\n\t * pre-compile.\n\t * @property REGULAR_VARYING_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_VARYING_HEADER = (\n\t\t\"precision mediump float;\" +\n\t\t\"varying vec2 vTextureCoord;\" +\n\t\t\"varying lowp float indexPicker;\" +\n\t\t\"varying lowp float alphaValue;\"\n\t);\n\n\t/**\n\t * Actual full header for the vertex shader. Includes the varying header. The regular shader is designed to render\n\t * all expected objects. Shader code may contain templates that are replaced pre-compile.\n\t * @property REGULAR_VERTEX_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_VERTEX_HEADER = (\n\t\tStageGL.REGULAR_VARYING_HEADER +\n\t\t\"attribute vec2 vertexPosition;\" +\n\t\t\"attribute vec2 uvPosition;\" +\n\t\t\"attribute lowp float textureIndex;\" +\n\t\t\"attribute lowp float objectAlpha;\" +\n\t\t\"uniform mat4 pMatrix;\"\n\t);\n\n\t/**\n\t * Actual full header for the fragment shader. Includes the varying header. The regular shader is designed to render\n\t * all expected objects. Shader code may contain templates that are replaced pre-compile.\n\t * @property REGULAR_FRAGMENT_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_FRAGMENT_HEADER = (\n\t\tStageGL.REGULAR_VARYING_HEADER +\n\t\t\"uniform sampler2D uSampler[{{count}}];\"\n\t);\n\n\t/**\n\t * Body of the vertex shader. The regular shader is designed to render all expected objects. Shader code may contain\n\t * templates that are replaced pre-compile.\n\t * @property REGULAR_VERTEX_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_VERTEX_BODY  = (\n\t\t\"void main(void) {\" +\n\t\t\t//DHG TODO: This doesn't work. Must be something wrong with the hand built matrix see js... bypass for now\n\t\t\t//vertexPosition, round if flag\n\t\t\t//\"gl_Position = pMatrix * vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);\" +\n\t\t\t\"gl_Position = vec4(\"+\n\t\t\t\t\"(vertexPosition.x * pMatrix[0][0]) + pMatrix[3][0],\" +\n\t\t\t\t\"(vertexPosition.y * pMatrix[1][1]) + pMatrix[3][1],\" +\n\t\t\t\t\"pMatrix[3][2],\" +\n\t\t\t\t\"1.0\" +\n\t\t\t\");\" +\n\t\t\t\"alphaValue = objectAlpha;\" +\n\t\t\t\"indexPicker = textureIndex;\" +\n\t\t\t\"vTextureCoord = uvPosition;\" +\n\t\t\"}\"\n\t);\n\n\t/**\n\t * Body of the fragment shader. The regular shader is designed to render all expected objects. Shader code may\n\t * contain templates that are replaced pre-compile.\n\t * @property REGULAR_FRAGMENT_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.REGULAR_FRAGMENT_BODY = (\n\t\t\"void main(void) {\" +\n\t\t\t\"vec4 color = vec4(1.0, 0.0, 0.0, 1.0);\" +\n\n\t\t\t\"if (indexPicker <= 0.5) {\" +\n\t\t\t\t\"color = texture2D(uSampler[0], vTextureCoord);\" +\n\t\t\t\t\"{{alternates}}\" +\n\t\t\t\"}\" +\n\n\t\t\t\"{{fragColor}}\" +\n\t\t\"}\"\n\t);\n\tStageGL.REGULAR_FRAG_COLOR_NORMAL = (\n\t\t\"gl_FragColor = vec4(color.rgb, color.a * alphaValue);\"\n\t);\n\tStageGL.REGULAR_FRAG_COLOR_PREMULTIPLY = (\n\t\t\"if(color.a > 0.0035) {\" +\t\t// 1/255 = 0.0039, so ignore any value below 1 because it's probably noise\n\t\t\t\"gl_FragColor = vec4(color.rgb/color.a, color.a * alphaValue);\" +\n\t\t\"} else {\" +\n\t\t\t\"gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\" +\n\t\t\"}\"\n\t);\n\n\t//TODO: DHG: a real particle shader\n\t/**\n\t * @property PARTICLE_VERTEX_BODY\n\t * @todo\n\t * @final\n\t * @static\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.PARTICLE_VERTEX_BODY = (\n\t\tStageGL.REGULAR_VERTEX_BODY\n\t);\n\t/**\n\t * @property PARTICLE_FRAGMENT_BODY\n\t * @todo\n\t * @final\n\t * @static\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.PARTICLE_FRAGMENT_BODY = (\n\t\tStageGL.REGULAR_FRAGMENT_BODY\n\t);\n\n\t/**\n\t * Portion of the shader that contains the \"varying\" properties required in both vertex and fragment shaders. The\n\t * cover shader is designed to be a simple vertex/uv only texture render that covers the render surface. Shader\n\t * code may contain templates that are replaced pre-compile.\n\t * @property COVER_VARYING_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_VARYING_HEADER = (\n\t\t\"precision mediump float;\" +\n\n\t\t\"varying highp vec2 vRenderCoord;\" +\n\t\t\"varying highp vec2 vTextureCoord;\"\n\t);\n\n\t/**\n\t * Actual full header for the vertex shader. Includes the varying header. The cover shader is designed to be a\n\t * simple vertex/uv only texture render that covers the render surface. Shader code may contain templates that are\n\t * replaced pre-compile.\n\t * @property COVER_VERTEX_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_VERTEX_HEADER = (\n\t\tStageGL.COVER_VARYING_HEADER +\n\t\t\"attribute vec2 vertexPosition;\" +\n\t\t\"attribute vec2 uvPosition;\" +\n\t\t\"uniform float uUpright;\"\n\t);\n\n\t/**\n\t * Actual full header for the fragment shader. Includes the varying header. The cover shader is designed to be a\n\t * simple vertex/uv only texture render that covers the render surface. Shader code may contain templates that are\n\t * replaced pre-compile.\n\t * @property COVER_FRAGMENT_HEADER\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_FRAGMENT_HEADER = (\n\t\tStageGL.COVER_VARYING_HEADER +\n\t\t\"uniform sampler2D uSampler;\"\n\t);\n\n\t/**\n\t * Body of the vertex shader. The cover shader is designed to be a simple vertex/uv only texture render that covers\n\t * the render surface. Shader code may contain templates that are replaced pre-compile.\n\t * @property COVER_VERTEX_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_VERTEX_BODY  = (\n\t\t\"void main(void) {\" +\n\t\t\t\"gl_Position = vec4(vertexPosition.x, vertexPosition.y, 0.0, 1.0);\" +\n\t\t\t\"vRenderCoord = uvPosition;\" +\n\t\t\t\"vTextureCoord = vec2(uvPosition.x, abs(uUpright - uvPosition.y));\" +\n\t\t\"}\"\n\t);\n\n\t/**\n\t * Body of the fragment shader. The cover shader is designed to be a simple vertex/uv only texture render that\n\t * covers the render surface. Shader code may contain templates that are replaced pre-compile.\n\t * @property COVER_FRAGMENT_BODY\n\t * @static\n\t * @final\n\t * @type {String}\n\t * @readonly\n\t */\n\tStageGL.COVER_FRAGMENT_BODY = (\n\t\t\"void main(void) {\" +\n\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\t\t\t\"gl_FragColor = color;\" +\n\t\t\"}\"\n\t);\n\n// events:\n\t/**\n\t * Dispatched each update immediately before the canvas is cleared and the display list is drawn to it. You can call\n\t * {{#crossLink \"Event/preventDefault\"}}{{/crossLink}} on the event to cancel the draw.\n\t * @event drawstart\n\t */\n\n\t/**\n\t * Dispatched each update immediately after the display list is drawn to the canvas and the canvas context is restored.\n\t * @event drawend\n\t */\n\n// getter / setters:\n\tp._get_isWebGL = function () {\n\t\treturn !!this._webGLContext;\n\t};\n\n\tp._set_autoPurge = function (value) {\n\t\tvalue = isNaN(value)?1200:value;\n\t\tif (value != -1) {\n\t\t\tvalue = value<10?10:value;\n\t\t}\n\t\tthis._autoPurge = value;\n\t};\n\tp._get_autoPurge = function () {\n\t\treturn Number(this._autoPurge);\n\t};\n\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\t/**\n\t\t\t * Indicates whether WebGL is being used for rendering. For example, this would be `false` if WebGL is not\n\t\t\t * supported in the browser.\n\t\t\t * @property isWebGL\n\t\t\t * @type {Boolean}\n\t\t\t * @readonly\n\t\t\t */\n\t\t\tisWebGL: { get: p._get_isWebGL },\n\n\t\t\t/**\n\t\t\t * Specifies whether or not StageGL is automatically purging unused textures. Higher numbers purge less\n\t\t\t * often. Values below 10 are upgraded to 10, and -1 disables this feature.\n\t\t\t * @property autoPurge\n\t\t\t * @protected\n\t\t\t * @type {Integer}\n\t\t\t * @default 1000\n\t\t\t */\n\t\t\tautoPurge: { get: p._get_autoPurge, set: p._set_autoPurge }\n\t\t});\n\t} catch (e) {} // TODO: use Log\n\n\n// constructor methods:\n\t/**\n\t * Create and properly initialize the WebGL instance.\n\t * @method _initializeWebGL\n\t * @protected\n\t * @return {WebGLRenderingContext}\n\t */\n\tp._initializeWebGL = function () {\n\t\tif (this.canvas) {\n\t\t\tif (!this._webGLContext || this._webGLContext.canvas !== this.canvas) {\n\t\t\t\t// A context hasn't been defined yet,\n\t\t\t\t// OR the defined context belongs to a different canvas, so reinitialize.\n\n\t\t\t\t// defaults and options\n\t\t\t\tvar options = {\n\t\t\t\t\tdepth: false, // Disable the depth buffer as it isn't used.\n\t\t\t\t\talpha: this._transparent, // Make the canvas background transparent.\n\t\t\t\t\tstencil: true,\n\t\t\t\t\tantialias: this._antialias,\n\t\t\t\t\tpremultipliedAlpha: this._premultiply, // Assume the drawing buffer contains colors with premultiplied alpha.\n\t\t\t\t\tpreserveDrawingBuffer: this._preserveBuffer\n\t\t\t\t};\n\n\t\t\t\tvar gl = this._webGLContext = this._fetchWebGLContext(this.canvas, options);\n\t\t\t\tif (!gl) { return null; }\n\n\t\t\t\tthis.updateSimultaneousTextureCount(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));\n\t\t\t\tthis._maxTextureSlots = gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS);\n\t\t\t\tthis._createBuffers(gl);\n\t\t\t\tthis._initTextures(gl);\n\n\t\t\t\tgl.disable(gl.DEPTH_TEST);\n\t\t\t\tgl.enable(gl.BLEND);\n\t\t\t\tgl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\t\t\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiply);\n\t\t\t\t//gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n\n\t\t\t\tthis._webGLContext.clearColor(this._clearColor.r, this._clearColor.g, this._clearColor.b, this._clearColor.a);\n\t\t\t\tthis.updateViewport(this._viewportWidth || this.canvas.width, this._viewportHeight || this.canvas.height);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._webGLContext = null;\n\t\t}\n\t\treturn this._webGLContext;\n\t};\n\n// public methods:\n\t/**\n\t * Docced in superclass\n\t */\n\tp.update = function (props) {\n\t\tif (!this.canvas) { return; }\n\t\tif (this.tickOnUpdate) { this.tick(props); }\n\t\tthis.dispatchEvent(\"drawstart\");\n\t\tif (this.autoClear) { this.clear(); }\n\n\t\tif (this._webGLContext) {\n\t\t\t// Use WebGL.\n\t\t\tthis._batchDraw(this, this._webGLContext);\n\t\t\tif (this._autoPurge != -1 && !(this._drawID%((this._autoPurge/2)|0))) {\n\t\t\t\tthis.purgeTextures(this._autoPurge);\n\t\t\t}\n\t\t} else {\n\t\t\t// Use 2D.\n\t\t\tvar ctx = this.canvas.getContext(\"2d\");\n\t\t\tctx.save();\n\t\t\tthis.updateContext(ctx);\n\t\t\tthis.draw(ctx, false);\n\t\t\tctx.restore();\n\t\t}\n\t\tthis.dispatchEvent(\"drawend\");\n\t};\n\n\t/**\n\t * Docced in superclass\n\t */\n\tp.clear = function () {\n\t\tif (!this.canvas) { return; }\n\t\tif (StageGL.isWebGLActive(this._webGLContext)) {\n\t\t\tvar gl = this._webGLContext;\n\t\t\tvar cc = this._clearColor;\n\t\t\tvar adjust = this._transparent ? cc.a : 1.0;\n\t\t\t// Use WebGL settings; adjust for pre multiplied alpha appropriate to scenario\n\t\t\tthis._webGLContext.clearColor(cc.r * adjust, cc.g * adjust, cc.b * adjust, adjust);\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\tthis._webGLContext.clearColor(cc.r, cc.g, cc.b, cc.a);\n\t\t} else {\n\t\t\t// Use 2D.\n\t\t\tthis.Stage_clear();\n\t\t}\n\t};\n\n\t/**\n\t * Draws the stage into the supplied context if possible. Many WebGL properties only exist on their context. As such\n\t * you cannot share contexts among many StageGLs and each context requires a unique StageGL instance. Contexts that\n\t * don't match the context managed by this StageGL will be treated as a 2D context.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D | WebGLRenderingContext} context The context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For\n\t *  example, used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean} If the draw was handled by this function\n\t */\n\tp.draw = function (context, ignoreCache) {\n\t\tif (context === this._webGLContext && StageGL.isWebGLActive(this._webGLContext)) {\n\t\t\tvar gl = this._webGLContext;\n\t\t\tthis._batchDraw(this, gl, ignoreCache);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn this.Stage_draw(context, ignoreCache);\n\t\t}\n\t};\n\n\t/**\n\t * Draws the target into the correct context, be it a canvas or Render Texture using WebGL.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method cacheDraw\n\t * @param {DisplayObject} target The object we're drawing into cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @param {Array} filters The filters we're drawing into cache.\n\t * @param {BitmapCache} manager The BitmapCache instance looking after the cache\n\t * @return {Boolean} If the draw was handled by this function\n\t */\n\tp.cacheDraw = function (target, filters, manager) {\n\t\tif (StageGL.isWebGLActive(this._webGLContext)) {\n\t\t\tvar gl = this._webGLContext;\n\t\t\tthis._cacheDraw(gl, target, filters, manager);\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\n\t/**\n\t * Blocks, or frees a texture \"slot\" on the GPU. Can be useful if you are overflowing textures. When overflowing\n\t * textures they are re-uploaded to the GPU every time they're encountered, this can be expensive with large textures.\n\t * By blocking the slot you reduce available slots, potentially increasing draw calls, but mostly you prevent a\n\t * texture being re-uploaded if it would have moved slots due to overflow.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * For example, block the slot a background image is stored in so there is less re-loading of that image.\n\t * @method protectTextureSlot\n\t * @param  {Number} id The slot to be affected\n\t * @param  {Boolean} [lock=false] Whether this slot is the one being locked.\n\t */\n\tp.protectTextureSlot = function (id, lock) {\n\t\tif (id > this._maxTextureSlots || id < 0) {\n\t\t\tthrow \"Slot outside of acceptable range\";\n\t\t}\n\t\tthis._slotBlacklist[id] = !!lock;\n\t};\n\n\t/**\n\t * Render textures can't draw into themselves so any item being used for renderTextures needs two to alternate between.\n\t * This function creates, gets, and toggles the render surface between the two.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method getTargetRenderTexture\n\t * @param  {DisplayObject} target The object associated with the render textures, usually a cached object.\n\t * @param  {Number} w The width to create the texture at.\n\t * @param  {Number} h The height to create the texture at.\n\t * @return {Objet}\n\t * @todo fill in return type\n\t */\n\tp.getTargetRenderTexture = function (target, w, h) {\n\t\tvar result, toggle = false;\n\t\tvar gl = this._webGLContext;\n\t\tif (target.__lastRT !== undefined && target.__lastRT === target.__rtA) { toggle = true; }\n\t\tif (!toggle) {\n\t\t\tif (target.__rtA === undefined) {\n\t\t\t\ttarget.__rtA = this.getRenderBufferTexture(w, h);\n\t\t\t} else {\n\t\t\t\tif (w != target.__rtA._width || h != target.__rtA._height) {\n\t\t\t\t\tthis.resizeTexture(target.__rtA, w, h);\n\t\t\t\t}\n\t\t\t\tthis.setTextureParams(gl);\n\t\t\t}\n\t\t\tresult = target.__rtA;\n\t\t} else {\n\t\t\tif (target.__rtB === undefined) {\n\t\t\t\ttarget.__rtB = this.getRenderBufferTexture(w, h);\n\t\t\t} else {\n\t\t\t\tif (w != target.__rtB._width || h != target.__rtB._height) {\n\t\t\t\t\tthis.resizeTexture(target.__rtB, w, h);\n\t\t\t\t}\n\t\t\t\tthis.setTextureParams(gl);\n\t\t\t}\n\t\t\tresult = target.__rtB;\n\t\t}\n\t\tif (!result) {\n\t\t\tthrow \"Problems creating render textures, known causes include using too much VRAM by not releasing WebGL texture instances\";\n\t\t}\n\t\ttarget.__lastRT = result;\n\t\treturn result;\n\t};\n\n\t/**\n\t * For every image encountered StageGL registers and tracks it automatically. This tracking can cause memory leaks \n\t * if not purged. StageGL, by default, automatically purges them. This does have a cost and may unfortunately find\n\t * false positives. This function is for manual management of this memory instead of the automatic system controlled\n\t * by the {{#crossLink \"StageGL/autoPurge:property\"}}{{/crossLink}} property.\n\t *\n\t * This function will recursively remove all textures found on the object, its children, cache, etc. It will uncache \n\t * objects and remove any texture it finds REGARDLESS of whether it is currently in use elsewhere. It is up to the\n\t * developer to ensure that a texture in use is not removed.\n\t *\n\t * Textures in use, or to be used again shortly, should not be removed. This is simply for performance reasons.\n\t * Removing a texture in use will cause the texture to have to be re-uploaded slowing rendering.\n\t * @method releaseTexture\n\t * @param  {DisplayObject | Texture | Image | Canvas} item An object that used the texture to be discarded.\n\t */\n\tp.releaseTexture = function (item) {\n\t\tvar i, l;\n\t\tif (!item) { return; }\n\n\t\t// this is a container object\n\t\tif (item.children) {\n\t\t\tfor (i = 0, l = item.children.length; i < l; i++) {\n\t\t\t\tthis.releaseTexture(item.children[i]);\n\t\t\t}\n\t\t}\n\n\t\t// this has a cache canvas\n\t\tif (item.cacheCanvas) {\n\t\t\titem.uncache();\n\t\t}\n\n\t\tvar foundImage = undefined;\n\t\tif (item._storeID !== undefined) {\n\t\t\t// this is a texture itself\n\t\t\tif (item === this._textureDictionary[item._storeID]) {\n\t\t\t\tthis._killTextureObject(item);\n\t\t\t\titem._storeID = undefined;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// this is an image or canvas\n\t\t\tfoundImage = item;\n\t\t} else if (item._webGLRenderStyle === 2) {\n\t\t\t// this is a Bitmap class\n\t\t\tfoundImage = item.image;\n\t\t} else if (item._webGLRenderStyle === 1) {\n\t\t\t// this is a SpriteSheet, we can't tell which image we used from the list easily so remove them all!\n\t\t\tfor (i = 0, l = item.spriteSheet._images.length; i < l; i++) {\n\t\t\t\tthis.releaseTexture(item.spriteSheet._images[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// did we find anything\n\t\tif (foundImage === undefined) {\n\t\t\tif (this.vocalDebug) {\n\t\t\t\tconsole.log(\"No associated texture found on release\");\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// remove it\n\t\tthis._killTextureObject(this._textureDictionary[foundImage._storeID]);\n\t\tfoundImage._storeID = undefined;\n\t};\n\n\t/**\n\t * Similar to {{#crossLink \"releaseTexture\"}}{{/crossLink}}, but this function differs by searching for textures to\n\t * release. It works by assuming that it can purge any texture which was last used more than \"count\" draw calls ago.\n\t * Because this process is unaware of the objects and whether they may be used on your stage, false positives can\n\t * occur. It is recommended to manually manage your memory with {{#crossLink \"StageGL/releaseTexture\"}}{{/crossLink}},\n\t * however, there are many use cases where this is simpler and error-free. This process is also run by default under\n\t * the hood to prevent leaks. To disable it see the {{#crossLink \"StageGL/autoPurge:property\"}}{{/crossLink}} property.\n\t * @method purgeTextures\n\t * @param {Number} [count=100] How many renders ago the texture was last used\n\t */\n\tp.purgeTextures = function (count) {\n\t\tif (count == undefined){ count = 100; }\n\n\t\tvar dict = this._textureDictionary;\n\t\tvar l = dict.length;\n\t\tfor (var i= 0; i<l; i++) {\n\t\t\tvar item = dict[i];\n\t\t\tif (!item) { continue; }\n\t\t\tif (item._drawID + count <= this._drawID) {\t// use draw not batch as draw is more indicative of time\n\t\t\t\tthis._killTextureObject(item);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Try to set the max textures the system can handle. It should default to the hardware maximum, and lower values\n\t * may limit performance. Some devices have been known to mis-report their max textures, or you may need a standard\n\t * baseline cross devices for testing. Barring the previous suggestions, there is little need to call this function\n\t * as the library will automatically try to find the best value.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method updateSimultaneousTextureCount\n\t * @param {Number} [count=1] The number of textures intended for simultaneous loading.\n\t */\n\tp.updateSimultaneousTextureCount = function (count) {\n\t\t// TODO: DHG: make sure API works in all instances, may be some issues with buffers etc I haven't foreseen\n\t\tvar gl = this._webGLContext;\n\t\tvar success = false;\n\n\t\tif (count < 1 || isNaN(count)) { count = 1; }\n\t\tthis._batchTextureCount = count;\n\n\t\twhile (!success) {\n\t\t\ttry {\n\t\t\t\tthis._activeShader = this._fetchShaderProgram(gl);\n\t\t\t\tsuccess = true;\n\t\t\t} catch(e) {\n\t\t\t\tif (this._batchTextureCount == 1) {\n\t\t\t\t\tthrow \"Cannot compile shader \" + e;\n\t\t\t\t}\n\n\t\t\t\tthis._batchTextureCount -= 4;\n\t\t\t\tif (this._batchTextureCount < 1) { this._batchTextureCount = 1; }\n\n\t\t\t\tif (this.vocalDebug) {\n\t\t\t\t\tconsole.log(\"Reducing desired texture count due to errors: \" + this._batchTextureCount);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Update the WebGL viewport. Note that this does <strong>not</strong> update the canvas element's width/height, but\n\t * the render surface's instead. This is necessary after manually resizing the canvas element on the DOM to avoid a\n\t * up/down scaled render.\n\t * @method updateViewport\n\t * @param {Integer} width The width of the render surface in pixels.\n\t * @param {Integer} height The height of the render surface in pixels.\n\t */\n\tp.updateViewport = function (width, height) {\n\t\tthis._viewportWidth = width|0;\n\t\tthis._viewportHeight = height|0;\n\t\tvar gl = this._webGLContext;\n\n\t\tif (gl) {\n\t\t\tgl.viewport(0, 0, this._viewportWidth, this._viewportHeight);\n\n\t\t\t// WebGL works with a -1,1 space on its screen. It also follows Y-Up\n\t\t\t// we need to flip the y, scale and then translate the co-ordinates to match this\n\t\t\t// additionally we offset into they Y so the polygons are inside the camera's \"clipping\" plane\n\t\t\tthis._projectionMatrix = new Float32Array([\n\t\t\t\t2 / this._viewportWidth,\t0,\t\t\t\t\t\t\t\t0,\t\t\t\t\t\t\t0,\n\t\t\t\t0,\t\t\t\t\t\t\t-2 / this._viewportHeight,\t\t1,\t\t\t\t\t\t\t0,\n\t\t\t\t0,\t\t\t\t\t\t\t0,\t\t\t\t\t\t\t\t1,\t\t\t\t\t\t\t0,\n\t\t\t\t-1,\t\t\t\t\t\t\t1,\t\t\t\t\t\t\t\t0.1,\t\t\t\t\t\t0\n\t\t\t]);\n\t\t\t// create the flipped version for use with render texture flipping\n\t\t\t// DHG: this would be a slice/clone but some platforms don't offer them for Float32Array\n\t\t\tthis._projectionMatrixFlip = new Float32Array([0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0]);\n\t\t\tthis._projectionMatrixFlip.set(this._projectionMatrix);\n\t\t\tthis._projectionMatrixFlip[5] *= -1;\n\t\t\tthis._projectionMatrixFlip[13] *= -1;\n\t\t}\n\t};\n\n\t/**\n\t * Fetches the shader compiled and set up to work with the provided filter/object. The shader is compiled on first\n\t * use and returned on subsequent calls.\n\t * @method getFilterShader\n\t * @param  {Filter|Object} filter The object which will provide the information needed to construct the filter shader.\n\t * @return {WebGLProgram}\n\t */\n\tp.getFilterShader = function (filter) {\n\t\tif (!filter) { filter = this; }\n\n\t\tvar gl = this._webGLContext;\n\t\tvar targetShader = this._activeShader;\n\n\t\tif (filter._builtShader) {\n\t\t\ttargetShader = filter._builtShader;\n\t\t\tif (filter.shaderParamSetup) {\n\t\t\t\tgl.useProgram(targetShader);\n\t\t\t\tfilter.shaderParamSetup(gl, this, targetShader);\n\t\t\t}\n\t\t} else {\n\t\t\ttry {\n\t\t\t\ttargetShader = this._fetchShaderProgram(\n\t\t\t\t\tgl, \"filter\",\n\t\t\t\t\tfilter.VTX_SHADER_BODY, filter.FRAG_SHADER_BODY,\n\t\t\t\t\tfilter.shaderParamSetup && filter.shaderParamSetup.bind(filter)\n\t\t\t\t);\n\t\t\t\tfilter._builtShader = targetShader;\n\t\t\t\ttargetShader._name = filter.toString();\n\t\t\t} catch (e) {\n\t\t\t\tconsole && console.log(\"SHADER SWITCH FAILURE\", e);\n\t\t\t}\n\t\t}\n\t\treturn targetShader;\n\t};\n\n\t/**\n\t * Returns a base texture that has no image or data loaded. Not intended for loading images. It may return `null`\n\t * in some error cases, and trying to use a \"null\" texture can cause renders to fail.\n\t * @method getBaseTexture\n\t * @param  {uint} [w=1] The width of the texture in pixels, defaults to 1\n\t * @param  {uint} [h=1] The height of the texture in pixels, defaults to 1\n\t */\n\tp.getBaseTexture = function (w, h) {\n\t\tvar width = Math.ceil(w > 0 ? w : 1) || 1;\n\t\tvar height = Math.ceil(h > 0 ? h : 1) || 1;\n\n\t\tvar gl = this._webGLContext;\n\t\tvar texture = gl.createTexture();\n\t\tthis.resizeTexture(texture, width, height);\n\t\tthis.setTextureParams(gl, false);\n\n\t\treturn texture;\n\t};\n\n\t/**\n\t * Resizes a supplied texture element. May generate invalid textures in some error cases such as; when the texture\n\t * is too large, when an out of texture memory error occurs, or other error scenarios. Trying to use an invalid texture\n\t * can cause renders to hard stop on some devices. Check the WebGL bound texture after running this function.\n\t *\n\t * NOTE: The supplied texture must have been made with the WebGL \"texImage2D\" function, all default APIs in StageGL\n\t * use this, so this note only matters for library developers and plugins.\n\t *\n\t * @protected\n\t * @method resizeTexture\n\t * @param  {WebGLTexture} texture The GL Texture to be modified.\n\t * @param  {uint} [width=1] The width of the texture in pixels, defaults to 1\n\t * @param  {uint} [height=1] The height of the texture in pixels, defaults to 1\n\t */\n\tp.resizeTexture = function (texture, width,height) {\n\t\tvar gl = this._webGLContext;\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\tgl.texImage2D(\n\t\t\tgl.TEXTURE_2D,\t\t\t\t// target\n\t\t\t0,\t\t\t\t\t\t\t// level of detail\n\t\t\tgl.RGBA,\t\t\t\t\t// internal format\n\t\t\twidth, height, 0,\t\t\t// width, height, border (only for array/null sourced textures)\n\t\t\tgl.RGBA,\t\t\t\t\t// format (match internal format)\n\t\t\tgl.UNSIGNED_BYTE,\t\t\t// type of texture(pixel color depth)\n\t\t\tnull\t\t\t\t\t\t// image data, we can do null because we're doing array data\n\t\t);\n\t\ttexture.width = width;\n\t\ttexture.height = height;\n\t};\n\n\t/**\n\t * Returns a base texture (see {{#crossLink \"StageGL/getBaseTexture\"}}{{/crossLink}}) for details. Also includes an\n\t * attached and linked render buffer in `texture._frameBuffer`. RenderTextures can be thought of as an internal\n\t * canvas on the GPU that can be drawn to.\n\t * @method getRenderBufferTexture\n\t * @param  {Number} w The width of the texture in pixels.\n\t * @param  {Number} h The height of the texture in pixels.\n\t * @return {Texture} the basic texture instance with a render buffer property.\n\t */\n\tp.getRenderBufferTexture = function (w, h) {\n\t\tvar gl = this._webGLContext;\n\n\t\t// get the texture\n\t\tvar renderTexture = this.getBaseTexture(w, h);\n\t\tif (!renderTexture) { return null; }\n\n\t\t// get the frame buffer\n\t\tvar frameBuffer = gl.createFramebuffer();\n\t\tif (!frameBuffer) { return null; }\n\n\t\t// set its width and height for spoofing as an image\n\t\trenderTexture.width = w;\n\t\trenderTexture.height = h;\n\n\t\t// attach frame buffer to texture and provide cross links to look up each other\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, frameBuffer);\n\t\tgl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, renderTexture, 0);\n\t\tframeBuffer._renderTexture = renderTexture;\n\t\trenderTexture._frameBuffer = frameBuffer;\n\n\t\t// these keep track of themselves simply to reduce complexity of some lookup code\n\t\trenderTexture._storeID = this._textureDictionary.length;\n\t\tthis._textureDictionary[renderTexture._storeID] = renderTexture;\n\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\treturn renderTexture;\n\t};\n\n\t/**\n\t * Common utility function used to apply the correct texture processing parameters for the bound texture.\n\t * @method setTextureParams\n\t * @param  {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param  {Boolean} [isPOT=false] Marks whether the texture is \"Power of Two\", this may allow better quality AA.\n\t */\n\tp.setTextureParams = function (gl, isPOT) {\n\t\tif (isPOT && this._antialias) {\n\t\t\t//non POT linear works in some devices, but performance is NOT good, investigate\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\t} else {\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n\t\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\t\t}\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t};\n\n\t/**\n\t * Changes the webGL clear, aka \"background\" color to the provided value. A transparent clear is recommended, as\n\t * non-transparent colours may create undesired boxes around some visuals.\n\t *\n\t * The clear color will also be used for filters and other \"render textures\". The stage background will ignore the\n\t * transparency value and display a solid color normally. For the stage to recognize and use transparency it must be\n\t * created with the transparent flag set to `true` (see {{#crossLink \"StageGL/constructor\"}}{{/crossLink}})).\n\t *\n\t * Using \"transparent white\" to demonstrate, the valid data formats are as follows:\n\t * <ul>\n\t *     <li>\"#FFF\"</li>\n\t *     <li>\"#FFFFFF\"</li>\n\t *     <li>\"#FFFFFF00\"</li>\n\t *     <li>\"rgba(255,255,255,0.0)\"</li>\n\t * </ul>\n\t * @method setClearColor\n\t * @param {String|int} [color=0x00000000] The new color to use as the background\n\t */\n\tp.setClearColor = function (color) {\n\t\tvar r, g, b, a, output;\n\n\t\tif (typeof color == \"string\") {\n\t\t\tif (color.indexOf(\"#\") == 0) {\n\t\t\t\tif (color.length == 4) {\n\t\t\t\t\tcolor = \"#\" + color.charAt(1)+color.charAt(1) + color.charAt(2)+color.charAt(2) + color.charAt(3)+color.charAt(3)\n\t\t\t\t}\n\t\t\t\tr = Number(\"0x\"+color.slice(1, 3))/255;\n\t\t\t\tg = Number(\"0x\"+color.slice(3, 5))/255;\n\t\t\t\tb = Number(\"0x\"+color.slice(5, 7))/255;\n\t\t\t\ta = Number(\"0x\"+color.slice(7, 9))/255;\n\t\t\t} else if (color.indexOf(\"rgba(\") == 0) {\n\t\t\t\toutput = color.slice(5, -1).split(\",\");\n\t\t\t\tr = Number(output[0])/255;\n\t\t\t\tg = Number(output[1])/255;\n\t\t\t\tb = Number(output[2])/255;\n\t\t\t\ta = Number(output[3]);\n\t\t\t}\n\t\t} else {\t// >>> is an unsigned shift which is what we want as 0x80000000 and up are negative values\n\t\t\tr = ((color & 0xFF000000) >>> 24)/255;\n\t\t\tg = ((color & 0x00FF0000) >>> 16)/255;\n\t\t\tb = ((color & 0x0000FF00) >>> 8)/255;\n\t\t\ta = (color & 0x000000FF)/255;\n\t\t}\n\n\t\tthis._clearColor.r = r || 0;\n\t\tthis._clearColor.g = g || 0;\n\t\tthis._clearColor.b = b || 0;\n\t\tthis._clearColor.a = a || 0;\n\n\t\tif (!this._webGLContext) { return; }\n\t\tthis._webGLContext.clearColor(this._clearColor.r, this._clearColor.g, this._clearColor.b, this._clearColor.a);\n\t};\n\n\t/**\n\t * docced in subclass\n\t */\n\tp.toString = function () {\n\t\treturn \"[StageGL (name=\"+  this.name +\")]\";\n\t};\n\n// private methods:\n\t/**\n\t * Sets up and returns the WebGL context for the canvas. May return undefined in error scenarios. These can include \n\t * situations where the canvas element already has a context, 2D or GL.\n\t * @param  {Canvas} canvas The DOM canvas element to attach to\n\t * @param  {Object} options The options to be handed into the WebGL object, see WebGL spec\n\t * @method _fetchWebGLContext\n\t * @protected\n\t * @return {WebGLRenderingContext} The WebGL context, may return undefined in error scenarios\n\t */\n\tp._fetchWebGLContext = function (canvas, options) {\n\t\tvar gl;\n\n\t\ttry {\n\t\t\tgl = canvas.getContext(\"webgl\", options) || canvas.getContext(\"experimental-webgl\", options);\n\t\t} catch (e) {\n\t\t\t// don't do anything in catch, null check will handle it\n\t\t}\n\n\t\tif (!gl) {\n\t\t\tvar msg = \"Could not initialize WebGL\";\n\t\t\tconsole.error?console.error(msg):console.log(msg);\n\t\t} else {\n\t\t\tgl.viewportWidth = canvas.width;\n\t\t\tgl.viewportHeight = canvas.height;\n\t\t}\n\n\t\treturn gl;\n\t};\n\n\t/**\n\t * Create the completed Shader Program from the vertex and fragment shaders. Allows building of custom shaders for\n\t * filters. Once compiled, shaders are saved so. If the Shader code requires dynamic alterations re-run this function\n\t * to generate a new shader.\n\t * @method _fetchShaderProgram\n\t * @param  {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param  {String} [shaderName=\"regular\"] Working values: \"regular\", \"override\", and \"filter\". Which type of shader to build.\n\t * Filter and override both accept the custom params. Regular and override have all features. Filter is a special case reduced feature shader meant to be over-ridden.\n\t * @param  {String} [customVTX] Extra vertex shader information to replace a regular draw, see \n\t * {{#crossLink \"StageGL/COVER_VERTEX_BODY\"}}{{/crossLink}} for default and {{#crossLink \"Filter\"}}{{/crossLink}} for examples.\n\t * @param  {String} [customFRAG] Extra fragment shader information to replace a regular draw, see \n\t * {{#crossLink \"StageGL/COVER_FRAGMENT_BODY\"}}{{/crossLink}} for default and {{#crossLink \"Filter\"}}{{/crossLink}} for examples.\n\t * @param  {Function} [shaderParamSetup] Function to run so custom shader parameters can get applied for the render.\n\t * @protected\n\t * @return {WebGLProgram} The compiled and linked shader\n\t */\n\tp._fetchShaderProgram = function (gl, shaderName, customVTX, customFRAG, shaderParamSetup) {\n\t\tgl.useProgram(null);\t\t// safety to avoid collisions\n\n\t\t// build the correct shader string out of the right headers and bodies\n\t\tvar targetFrag, targetVtx;\n\t\tswitch (shaderName) {\n\t\t\tcase \"filter\":\n\t\t\t\ttargetVtx = StageGL.COVER_VERTEX_HEADER + (customVTX || StageGL.COVER_VERTEX_BODY);\n\t\t\t\ttargetFrag = StageGL.COVER_FRAGMENT_HEADER + (customFRAG || StageGL.COVER_FRAGMENT_BODY);\n\t\t\t\tbreak;\n\t\t\tcase \"particle\": //TODO\n\t\t\t\ttargetVtx = StageGL.REGULAR_VERTEX_HEADER + StageGL.PARTICLE_VERTEX_BODY;\n\t\t\t\ttargetFrag = StageGL.REGULAR_FRAGMENT_HEADER + StageGL.PARTICLE_FRAGMENT_BODY;\n\t\t\t\tbreak;\n\t\t\tcase \"override\":\n\t\t\t\ttargetVtx = StageGL.REGULAR_VERTEX_HEADER + (customVTX || StageGL.REGULAR_VERTEX_BODY);\n\t\t\t\ttargetFrag = StageGL.REGULAR_FRAGMENT_HEADER + (customFRAG || StageGL.REGULAR_FRAGMENT_BODY);\n\t\t\t\tbreak;\n\t\t\tcase \"regular\":\n\t\t\tdefault:\n\t\t\t\ttargetVtx = StageGL.REGULAR_VERTEX_HEADER + StageGL.REGULAR_VERTEX_BODY;\n\t\t\t\ttargetFrag = StageGL.REGULAR_FRAGMENT_HEADER + StageGL.REGULAR_FRAGMENT_BODY;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// create the separate vars\n\t\tvar vertexShader = this._createShader(gl, gl.VERTEX_SHADER, targetVtx);\n\t\tvar fragmentShader = this._createShader(gl, gl.FRAGMENT_SHADER, targetFrag);\n\n\t\t// link them together\n\t\tvar shaderProgram = gl.createProgram();\n\t\tgl.attachShader(shaderProgram, vertexShader);\n\t\tgl.attachShader(shaderProgram, fragmentShader);\n\t\tgl.linkProgram(shaderProgram);\n\t\tshaderProgram._type = shaderName;\n\n\t\t// check compile status\n\t\tif (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\n\t\t\tgl.useProgram(this._activeShader);\n\t\t\tthrow gl.getProgramInfoLog(shaderProgram);\n\t\t}\n\n\t\t// set up the parameters on the shader\n\t\tgl.useProgram(shaderProgram);\n\t\tswitch (shaderName) {\n\t\t\tcase \"filter\":\n\t\t\t\t// get the places in memory the shader is stored so we can feed information into them\n\t\t\t\t// then save it off on the shader because it's so tied to the shader itself\n\t\t\t\tshaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"vertexPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n\n\t\t\t\tshaderProgram.uvPositionAttribute = gl.getAttribLocation(shaderProgram, \"uvPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.uvPositionAttribute);\n\n\t\t\t\tshaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, \"uSampler\");\n\t\t\t\tgl.uniform1i(shaderProgram.samplerUniform, 0);\n\n\t\t\t\tshaderProgram.uprightUniform = gl.getUniformLocation(shaderProgram, \"uUpright\");\n\t\t\t\tgl.uniform1f(shaderProgram.uprightUniform, 0);\n\n\t\t\t\t// if there's some custom attributes be sure to hook them up\n\t\t\t\tif (shaderParamSetup) {\n\t\t\t\t\tshaderParamSetup(gl, this, shaderProgram);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"override\":\n\t\t\tcase \"particle\":\n\t\t\tcase \"regular\":\n\t\t\tdefault:\n\t\t\t\t// get the places in memory the shader is stored so we can feed information into them\n\t\t\t\t// then save it off on the shader because it's so tied to the shader itself\n\t\t\t\tshaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, \"vertexPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);\n\n\t\t\t\tshaderProgram.uvPositionAttribute = gl.getAttribLocation(shaderProgram, \"uvPosition\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.uvPositionAttribute);\n\n\t\t\t\tshaderProgram.textureIndexAttribute = gl.getAttribLocation(shaderProgram, \"textureIndex\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.textureIndexAttribute);\n\n\t\t\t\tshaderProgram.alphaAttribute = gl.getAttribLocation(shaderProgram, \"objectAlpha\");\n\t\t\t\tgl.enableVertexAttribArray(shaderProgram.alphaAttribute);\n\n\t\t\t\tvar samplers = [];\n\t\t\t\tfor (var i = 0; i < this._batchTextureCount; i++) {\n\t\t\t\t\tsamplers[i] = i;\n\t\t\t\t}\n\n\t\t\t\tshaderProgram.samplerData = samplers;\n\t\t\t\tshaderProgram.samplerUniform = gl.getUniformLocation(shaderProgram, \"uSampler\");\n\t\t\t\tgl.uniform1iv(shaderProgram.samplerUniform, samplers);\n\n\t\t\t\tshaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, \"pMatrix\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tgl.useProgram(this._activeShader);\n\t\treturn shaderProgram;\n\t};\n\n\t/**\n\t * Creates a shader from the specified string replacing templates. Template items are defined via `{{` `key` `}}``.\n\t * @method _createShader\n\t * @param  {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param  {Number} type The type of shader to create. gl.VERTEX_SHADER | gl.FRAGMENT_SHADER\n\t * @param  {String} str The definition for the shader.\n\t * @return {WebGLShader}\n\t * @protected\n\t */\n\tp._createShader = function (gl, type, str) {\n\t\t// inject the static number\n\t\tstr = str.replace(/{{count}}/g, this._batchTextureCount);\n\n\t\t// resolve issue with no dynamic samplers by creating correct samplers in if else chain\n\t\t// TODO: WebGL 2.0 does not need this support\n\t\tvar insert = \"\";\n\t\tfor (var i = 1; i<this._batchTextureCount; i++) {\n\t\t\tinsert += \"} else if (indexPicker <= \"+ i +\".5) { color = texture2D(uSampler[\"+ i +\"], vTextureCoord);\";\n\t\t}\n\t\tstr = str.replace(/{{alternates}}/g, insert);\n\t\tstr = str.replace(/{{fragColor}}/g, this._premultiply ? StageGL.REGULAR_FRAG_COLOR_PREMULTIPLY : StageGL.REGULAR_FRAG_COLOR_NORMAL);\n\n\t\t// actually compile the shader\n\t\tvar shader = gl.createShader(type);\n\t\tgl.shaderSource(shader, str);\n\t\tgl.compileShader(shader);\n\n\t\t// check compile status\n\t\tif (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n\t\t\tthrow gl.getShaderInfoLog(shader);\n\t\t}\n\n\t\treturn shader;\n\t};\n\n\t/**\n\t * Sets up the necessary vertex property buffers, including position and U/V.\n\t * @method _createBuffers\n\t * @param {WebGLRenderingContext} gl\n\t * @protected\n\t */\n\tp._createBuffers = function (gl) {\n\t\tvar groupCount = this._maxCardsPerBatch * StageGL.INDICIES_PER_CARD;\n\t\tvar groupSize, i, l;\n\n\t\t// INFO:\n\t\t// all buffers are created using this pattern\n\t\t// create a WebGL buffer\n\t\t// attach it to context\n\t\t// figure out how many parts it has to an entry\n\t\t// fill it with empty data to reserve the memory\n\t\t// attach the empty data to the GPU\n\t\t// track the sizes on the buffer object\n\n\t\t// INFO:\n\t\t// a single buffer may be optimal in some situations and would be approached like this,\n\t\t// currently not implemented due to lack of need and potential complications with drawCover\n\n\t\t// var vertexBuffer = this._vertexBuffer = gl.createBuffer();\n\t\t// gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n\t\t// groupSize = 2 + 2 + 1 + 1; //x/y, u/v, index, alpha\n\t\t// var vertexData = this._vertexData = new Float32Array(groupCount * groupSize);\n\t\t// for (i=0; i<vertexData.length; i+=groupSize) {\n\t\t// \tvertexData[i+0] = vertexData[i+1] = 0;\n\t\t// \tvertexData[i+2] = vertexData[i+3] = 0.5;\n\t\t// \tvertexData[i+4] = 0;\n\t\t// \tvertexData[i+5] = 1;\n\t\t// }\n\t\t// vertexBuffer.itemSize = groupSize;\n\t\t// vertexBuffer.numItems = groupCount;\n\t\t// TODO bechmark and test using unified buffer\n\n\t\t// the actual position information\n\t\tvar vertexPositionBuffer = this._vertexPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n\t\tgroupSize = 2;\n\t\tvar vertices = this._vertices = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=vertices.length; i<l; i+=groupSize) { vertices[i] = vertices[i+1] = 0; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, vertices, gl.DYNAMIC_DRAW);\n\t\tvertexPositionBuffer.itemSize = groupSize;\n\t\tvertexPositionBuffer.numItems = groupCount;\n\n\t\t// where on the texture it gets its information\n\t\tvar uvPositionBuffer = this._uvPositionBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, uvPositionBuffer);\n\t\tgroupSize = 2;\n\t\tvar uvs = this._uvs = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=uvs.length; i<l; i+=groupSize) { uvs[i] = uvs[i+1] = 0; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, uvs, gl.DYNAMIC_DRAW);\n\t\tuvPositionBuffer.itemSize = groupSize;\n\t\tuvPositionBuffer.numItems = groupCount;\n\n\t\t// what texture it should use\n\t\tvar textureIndexBuffer = this._textureIndexBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, textureIndexBuffer);\n\t\tgroupSize = 1;\n\t\tvar indices = this._indices = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=indices.length; i<l; i++) { indices[i] = 0; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, indices, gl.DYNAMIC_DRAW);\n\t\ttextureIndexBuffer.itemSize = groupSize;\n\t\ttextureIndexBuffer.numItems = groupCount;\n\n\t\t// what alpha it should have\n\t\tvar alphaBuffer = this._alphaBuffer = gl.createBuffer();\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, alphaBuffer);\n\t\tgroupSize = 1;\n\t\tvar alphas = this._alphas = new Float32Array(groupCount * groupSize);\n\t\tfor (i=0, l=alphas.length; i<l; i++) { alphas[i] = 1; }\n\t\tgl.bufferData(gl.ARRAY_BUFFER, alphas, gl.DYNAMIC_DRAW);\n\t\talphaBuffer.itemSize = groupSize;\n\t\talphaBuffer.numItems = groupCount;\n\t};\n\n\t/**\n\t * Do all the setup steps for textures in the system.\n\t * @method _initTextures\n\t * @protected\n\t */\n\tp._initTextures = function () {\n\t\t//TODO: DHG: add a cleanup routine in here in case this happens mid stream\n\n\t\t// reset counters\n\t\tthis._lastTextureInsert = -1;\n\n\t\t// clear containers\n\t\tthis._textureDictionary = [];\n\t\tthis._textureIDs = {};\n\t\tthis._baseTextures = [];\n\t\tthis._batchTextures = [];\n\n\t\t// fill in blanks as it helps the renderer be stable while textures are loading and reduces need for safety code\n\t\tfor (var i=0; i<this._batchTextureCount;i++) {\n\t\t\tvar tex = this.getBaseTexture();\n\t\t\tthis._baseTextures[i] = this._batchTextures[i] = tex;\n\t\t\tif (!tex) {\n\t\t\t\tthrow \"Problems creating basic textures, known causes include using too much VRAM by not releasing WebGL texture instances\";\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Load a specific texture, accounting for potential delay, as it might not be preloaded.\n\t * @method _loadTextureImage\n\t * @param {WebGLRenderingContext} gl\n\t * @param {Image} image Actual image to be loaded\n\t * @return {WebGLTexture} The resulting Texture object\n\t * @protected\n\t */\n\tp._loadTextureImage = function (gl, image) {\n\t\tvar src = image.src;\n\n\t\tif (!src) {\n\t\t\t// one time canvas property setup\n\t\t\timage._isCanvas = true;\n\t\t\tsrc = image.src = \"canvas_\" + this._lastTrackedCanvas++;\n\t\t}\n\n\t\t// put the texture into our storage system\n\t\tvar storeID = this._textureIDs[src];\n\t\tif (storeID === undefined) {\n\t\t\tstoreID = this._textureIDs[src] = this._textureDictionary.length;\n\t\t}\n\t\tif (this._textureDictionary[storeID] === undefined) {\n\t\t\tthis._textureDictionary[storeID] = this.getBaseTexture();\n\t\t}\n\n\t\tvar texture = this._textureDictionary[storeID];\n\n\t\tif (texture) {\n\t\t\t// get texture params all set up\n\t\t\ttexture._batchID = this._batchID;\n\t\t\ttexture._storeID = storeID;\n\t\t\ttexture._imageData = image;\n\t\t\tthis._insertTextureInBatch(gl, texture);\n\n\t\t\t// get the data into the texture or wait for it to load\n\t\t\timage._storeID = storeID;\n\t\t\tif (image.complete || image.naturalWidth || image._isCanvas) {\t// is it already loaded\n\t\t\t\tthis._updateTextureImageData(gl, image);\n\t\t\t} else  {\n\t\t\t\timage.addEventListener(\"load\", this._updateTextureImageData.bind(this, gl, image));\n\t\t\t}\n\t\t} else {\n\t\t\t// we really really should have a texture, try to recover the error by using a saved empty texture so we don't crash\n\t\t\tvar msg = \"Problem creating desired texture, known causes include using too much VRAM by not releasing WebGL texture instances\";\n\t\t\t(console.error && console.error(msg)) || console.log(msg);\n\n\t\t\ttexture = this._baseTextures[0];\n\t\t\ttexture._batchID = this._batchID;\n\t\t\ttexture._storeID = -1;\n\t\t\ttexture._imageData = texture;\n\t\t\tthis._insertTextureInBatch(gl, texture);\n\t\t}\n\n\t\treturn texture;\n\t};\n\n\t/**\n\t * Necessary to upload the actual image data to the GPU. Without this the texture will be blank. Called automatically\n\t * in most cases due to loading and caching APIs. Flagging an image source with `_invalid = true` will trigger this\n\t * next time the image is rendered.\n\t * @param {WebGLRenderingContext} gl\n\t * @param {Image | Canvas} image The image data to be uploaded\n\t * @protected\n\t */\n\tp._updateTextureImageData = function (gl, image) {\n\t\t// the bitwise & is intentional, cheap exponent 2 check\n\t\tvar isNPOT = (image.width & image.width-1) || (image.height & image.height-1);\n\t\tvar texture = this._textureDictionary[image._storeID];\n\n\t\tgl.activeTexture(gl.TEXTURE0 + texture._activeIndex);\n\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\n\t\ttexture.isPOT = !isNPOT;\n\t\tthis.setTextureParams(gl, texture.isPOT);\n\n\t\ttry {\n\t\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\t\t} catch(e) {\n\t\t\tvar errString = \"\\nAn error has occurred. This is most likely due to security restrictions on WebGL images with local or cross-domain origins\";\n\t\t\tif(console.error) {\n\t\t\t\t//TODO: LM: I recommend putting this into a log function internally, since you do it so often, and each is implemented differently.\n\t\t\t\tconsole.error(errString);\n\t\t\t\tconsole.error(e);\n\t\t\t} else if (console) {\n\t\t\t\tconsole.log(errString);\n\t\t\t\tconsole.log(e);\n\t\t\t}\n\t\t}\n\n\t\timage._invalid = false;\n\n\t\ttexture._w = image.width;\n\t\ttexture._h = image.height;\n\n\t\tif (this.vocalDebug) {\n\t\t\tif (isNPOT) {\n\t\t\t\tconsole.warn(\"NPOT(Non Power of Two) Texture: \"+ image.src);\n\t\t\t}\n\t\t\tif (image.width > gl.MAX_TEXTURE_SIZE || image.height > gl.MAX_TEXTURE_SIZE){\n\t\t\t\tconsole && console.error(\"Oversized Texture: \"+ image.width+\"x\"+image.height +\" vs \"+ gl.MAX_TEXTURE_SIZE +\"max\");\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Adds the texture to a spot in the current batch, forcing a draw if no spots are free.\n\t * @method _insertTextureInBatch\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {WebGLTexture} texture The texture to be inserted.\n\t * @protected\n\t */\n\tp._insertTextureInBatch = function (gl, texture) {\n\t\t// if it wasn't used last batch\n\t\tif (this._batchTextures[texture._activeIndex] !== texture) {\n\t\t\t// we've got to find it a a spot.\n\t\t\tvar found = -1;\n\t\t\tvar start = (this._lastTextureInsert+1) % this._batchTextureCount;\n\t\t\tvar look = start;\n\t\t\tdo {\n\t\t\t\tif (this._batchTextures[look]._batchID != this._batchID && !this._slotBlacklist[look]) {\n\t\t\t\t\tfound = look;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlook = (look+1) % this._batchTextureCount;\n\t\t\t} while (look !== start);\n\n\t\t\t// we couldn't find anywhere for it go, meaning we're maxed out\n\t\t\tif (found === -1) {\n\t\t\t\tthis.batchReason = \"textureOverflow\";\n\t\t\t\tthis._drawBuffers(gl);\t\t// <------------------------------------------------------------------------\n\t\t\t\tthis.batchCardCount = 0;\n\t\t\t\tfound = start;\n\t\t\t}\n\n\t\t\t// lets put it into that spot\n\t\t\tthis._batchTextures[found] = texture;\n\t\t\ttexture._activeIndex = found;\n\t\t\tvar image = texture._imageData;\n\t\t\tif (image && image._invalid && texture._drawID !== undefined) {\n\t\t\t\tthis._updateTextureImageData(gl, image);\n\t\t\t} else {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + found);\n\t\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\t\t\tthis.setTextureParams(gl);\n\t\t\t}\n\t\t\tthis._lastTextureInsert = found;\n\t\t} else {\n\t\t\tvar image = texture._imageData;\n\t\t\tif (texture._storeID != undefined && image && image._invalid) {\n\t\t\t\tthis._updateTextureImageData(gl, image);\n\t\t\t}\n\t\t}\n\n\t\ttexture._drawID = this._drawID;\n\t\ttexture._batchID = this._batchID;\n\t};\n\n\t/**\n\t * Remove and clean the texture, expects a texture and is inflexible. Mostly for internal use, recommended to call \n\t * {{#crossLink \"StageGL/releaseTexture\"}}{{/crossLink}} instead as it will call this with the correct texture object(s).\n\t * Note: Testing shows this may not happen immediately, have to wait frames for WebGL to have actually adjust memory.\n\t * @method _killTextureObject\n\t * @param {Texture} tex The texture to be cleaned out\n\t * @protected\n\t */\n\tp._killTextureObject = function (tex) {\n\t\tif (!tex) { return; }\n\t\tvar gl = this._webGLContext;\n\n\t\t// remove linkage\n\t\tif (tex._storeID !== undefined && tex._storeID >= 0) {\n\t\t\tthis._textureDictionary[tex._storeID] = undefined;\n\t\t\tfor (var n in this._textureIDs) {\n\t\t\t\tif (this._textureIDs[n] == tex._storeID) { delete this._textureIDs[n]; }\n\t\t\t}\n\t\t\tif(tex._imageData) { tex._imageData._storeID = undefined; }\n\t\t\ttex._imageData = tex._storeID = undefined;\n\t\t}\n\n\t\t// make sure to drop it out of an active slot\n\t\tif (tex._activeIndex !== undefined && this._batchTextures[tex._activeIndex] === tex) {\n\t\t\tthis._batchTextures[tex._activeIndex] = this._baseTextures[tex._activeIndex];\n\t\t}\n\n\t\t// remove buffers if present\n\t\ttry {\n\t\t\tif (tex._frameBuffer) { gl.deleteFramebuffer(tex._frameBuffer); }\n\t\t\ttex._frameBuffer = undefined;\n\t\t} catch(e) {\n\t\t\t/* suppress delete errors because it's already gone or didn't need deleting probably */\n\t\t\tif (this.vocalDebug) { console.log(e); }\n\t\t}\n\n\t\t// remove entry\n\t\ttry {\n\t\t\tgl.deleteTexture(tex);\n\t\t} catch(e) {\n\t\t\t/* suppress delete errors because it's already gone or didn't need deleting probably */\n\t\t\tif (this.vocalDebug) { console.log(e); }\n\t\t}\n\t};\n\n\t/**\n\t * Store or restore current batch textures into a backup array\n\t * @method _backupBatchTextures\n\t * @param {Boolean} restore Perform a restore instead of a store.\n\t * @param {Array} [target=this._backupTextures] Where to perform the backup, defaults to internal backup.\n\t * @protected\n\t */\n\tp._backupBatchTextures = function (restore, target) {\n\t\tvar gl = this._webGLContext;\n\n\t\tif (!this._backupTextures) { this._backupTextures = []; }\n\t\tif (target === undefined) { target = this._backupTextures; }\n\n\t\tfor (var i=0; i<this._batchTextureCount; i++) {\n\t\t\tgl.activeTexture(gl.TEXTURE0 + i);\n\t\t\tif (restore) {\n\t\t\t\tthis._batchTextures[i] = target[i];\n\t\t\t} else {\n\t\t\t\ttarget[i] = this._batchTextures[i];\n\t\t\t\tthis._batchTextures[i] = this._baseTextures[i];\n\t\t\t}\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, this._batchTextures[i]);\n\t\t\tthis.setTextureParams(gl, this._batchTextures[i].isPOT);\n\t\t}\n\n\t\tif (restore && target === this._backupTextures) { this._backupTextures = []; }\n\t};\n\n\t/**\n\t * Begin the drawing process for a regular render.\n\t * @method _batchDraw\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {Stage || Container} sceneGraph {{#crossLink \"Container\"}}{{/crossLink}} object with all that needs to rendered, preferably a Stage.\n\t * @param {Boolean} ignoreCache\n\t * @protected\n\t */\n\tp._batchDraw = function (sceneGraph, gl, ignoreCache) {\n\t\tif (this._isDrawing > 0) {\n\t\t\tthis._drawBuffers(gl);\n\t\t}\n\t\tthis._isDrawing++;\n\t\tthis._drawID++;\n\n\t\tthis.batchCardCount = 0;\n\t\tthis.depth = 0;\n\n\t\tthis._appendToBatchGroup(sceneGraph, gl, new createjs.Matrix2D(), this.alpha, ignoreCache);\n\n\t\tthis.batchReason = \"drawFinish\";\n\t\tthis._drawBuffers(gl);\t\t\t\t\t\t\t\t// <--------------------------------------------------------\n\t\tthis._isDrawing--;\n\t};\n\n\t/**\n\t * Perform the drawing process to fill a specific cache texture, including applying filters.\n\t * @method _cacheDraw\n\t * @param {DisplayObject} target The object we're drawing into the cache. For example, used for drawing the cache\n\t * (to prevent it from simply drawing an existing cache back into itself).\n\t * @param {Array} filters The filters we're drawing into cache.\n\t * @param {BitmapCache} manager The BitmapCache instance looking after the cache\n\t * @protected\n\t */\n\tp._cacheDraw = function (gl, target, filters, manager) {\n\t\t/*\n\t\tImplicitly there are 4 modes to this function: filtered-sameContext, filtered-uniqueContext, sameContext, uniqueContext.\n\t\tEach situation must be handled slightly differently as 'sameContext' or 'uniqueContext' define how the output works,\n\t\tone drawing directly into the main context and the other drawing into a stored renderTexture respectively.\n\t\tWhen the draw is a 'filtered' draw, the filters are applied sequentially and will draw into saved textures repeatedly.\n\t\tOnce the final filter is done the final output is treated depending upon whether it is a same or unique context.\n\t\tThe internal complexity comes from reducing over-draw, shared code, and issues like textures needing to be flipped\n\t\tsometimes when written to render textures.\n\t\t*/\n\t\tvar renderTexture;\n\t\tvar shaderBackup = this._activeShader;\n\t\tvar blackListBackup = this._slotBlacklist;\n\t\tvar lastTextureSlot = this._maxTextureSlots-1;\n\t\tvar wBackup = this._viewportWidth, hBackup = this._viewportHeight;\n\n\t\t// protect the last slot so that we have somewhere to bind the renderTextures so it doesn't get upset\n\t\tthis.protectTextureSlot(lastTextureSlot, true);\n\n\t\t// create offset container for drawing item\n\t\tvar mtx = target.getMatrix();\n\t\tmtx = mtx.clone();\n\t\tmtx.scale(1/manager.scale, 1/manager.scale);\n\t\tmtx = mtx.invert();\n\t\tmtx.translate(-manager.offX/manager.scale*target.scaleX, -manager.offY/manager.scale*target.scaleY);\n\t\tvar container = this._cacheContainer;\n\t\tcontainer.children = [target];\n\t\tcontainer.transformMatrix = mtx;\n\n\t\tthis._backupBatchTextures(false);\n\n\t\tif (filters && filters.length) {\n\t\t\tthis._drawFilters(target, filters, manager);\n\t\t} else {\n\t\t\t// is this for another stage or mine?\n\t\t\tif (this.isCacheControlled) {\n\t\t\t\t// draw item to canvas\t\t\t\tI -> C\n\t\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\t\tthis._batchDraw(container, gl, true);\n\t\t\t} else {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\t\t\ttarget.cacheCanvas = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\t\t\t\trenderTexture = target.cacheCanvas;\n\n\t\t\t\t// draw item to render texture\t\tI -> T\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\t\t\t\tthis.updateViewport(manager._drawWidth, manager._drawHeight);\n\t\t\t\tthis._projectionMatrix = this._projectionMatrixFlip;\n\t\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\t\tthis._batchDraw(container, gl, true);\n\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\t\tthis.updateViewport(wBackup, hBackup);\n\t\t\t}\n\t\t}\n\n\t\tthis._backupBatchTextures(true);\n\n\t\tthis.protectTextureSlot(lastTextureSlot, false);\n\t\tthis._activeShader = shaderBackup;\n\t\tthis._slotBlacklist = blackListBackup;\n\t};\n\n\t/**\n\t * Sub portion of _cacheDraw, split off for readability. Do not call independently.\n\t * @method _drawFilters\n\t * @param {DisplayObject} target The object we're drawing with a filter.\n\t * @param {Array} filters The filters we're drawing into cache.\n\t * @param {BitmapCache} manager The BitmapCache instance looking after the cache\n\t */\n\tp._drawFilters = function (target, filters, manager) {\n\t\tvar gl = this._webGLContext;\n\t\tvar renderTexture;\n\t\tvar lastTextureSlot = this._maxTextureSlots-1;\n\t\tvar wBackup = this._viewportWidth, hBackup = this._viewportHeight;\n\n\t\tvar container = this._cacheContainer;\n\t\tvar filterCount = filters.length;\n\n\t\t// we don't know which texture slot we're dealing with previously and we need one out of the way\n\t\t// once we're using that slot activate it so when we make and bind our RenderTexture it's safe there\n\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\trenderTexture = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\n\t\t// draw item to render texture\t\tI -> T\n\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\t\tthis.updateViewport(manager._drawWidth, manager._drawHeight);\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\tthis._batchDraw(container, gl, true);\n\n\t\t// bind the result texture to slot 0 as all filters and cover draws assume original content is in slot 0\n\t\tgl.activeTexture(gl.TEXTURE0);\n\t\tgl.bindTexture(gl.TEXTURE_2D, renderTexture);\n\t\tthis.setTextureParams(gl);\n\n\t\tvar flipY = false;\n\t\tvar i = 0, filter = filters[i];\n\t\tdo { // this is safe because we wouldn't be in apply filters without a filter count of at least 1\n\n\t\t\t// swap to correct shader\n\t\t\tthis._activeShader = this.getFilterShader(filter);\n\t\t\tif (!this._activeShader) { continue; }\n\n\t\t\t// now the old result is stored in slot 0, make a new render texture\n\t\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\t\trenderTexture = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\n\t\t\t// draw result to render texture\tR -> T\n\t\t\tgl.viewport(0, 0, manager._drawWidth, manager._drawHeight);\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\tthis._drawCover(gl, flipY);\n\n\t\t\t// bind the result texture to slot 0 as all filters and cover draws assume original content is in slot 0\n\t\t\tgl.activeTexture(gl.TEXTURE0);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, renderTexture);\n\t\t\tthis.setTextureParams(gl);\n\n\t\t\t// use flipping to keep things upright, things already cancel out on a single filter\n\t\t\t// this needs to be here as multiPass is not accurate to _this_ frame until after shader acquisition\n\t\t\tif (filterCount > 1 || filters[0]._multiPass) {\n\t\t\t\tflipY = !flipY;\n\t\t\t}\n\n\t\t\t// work through the multipass if it's there, otherwise move on\n\t\t\tfilter = filter._multiPass !== null ? filter._multiPass : filters[++i];\n\t\t} while (filter);\n\n\t\t// is this for another stage or mine\n\t\tif (this.isCacheControlled) {\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tthis.updateViewport(wBackup, hBackup);\n\n\t\t\t// draw result to canvas\t\t\tR -> C\n\t\t\tthis._activeShader = this.getFilterShader(this);\n\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\tthis._drawCover(gl, flipY);\n\t\t} else {\n\t\t\t//TODO: DHG: this is less than ideal. A flipped initial render for this circumstance might help. Adjust the perspective matrix?\n\t\t\tif (flipY) {\n\t\t\t\tgl.activeTexture(gl.TEXTURE0 + lastTextureSlot);\n\t\t\t\trenderTexture = this.getTargetRenderTexture(target, manager._drawWidth, manager._drawHeight);\n\t\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, renderTexture._frameBuffer);\n\n\t\t\t\tthis._activeShader = this.getFilterShader(this);\n\t\t\t\tgl.viewport(0, 0, manager._drawWidth, manager._drawHeight);\n\t\t\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\t\t\tthis._drawCover(gl, !flipY);\n\t\t\t}\n\t\t\tgl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\t\t\tthis.updateViewport(wBackup, hBackup);\n\n\t\t\t// make sure the last texture is the active thing to draw\n\t\t\ttarget.cacheCanvas = renderTexture;\n\t\t}\n\t};\n\n\t/**\n\t * Add all the contents of a container to the pending buffers, called recursively on each container. This may\n\t * trigger a draw if a buffer runs out of space. This is the main workforce of the render loop.\n\t * @method _appendToBatchGroup\n\t * @param {Container} container The {{#crossLink \"Container\"}}{{/crossLink}} that contains everything to be drawn.\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {Matrix2D} concatMtx The effective (concatenated) transformation matrix when beginning this container\n\t * @param {Number} concatAlpha The effective (concatenated) alpha when beginning this container\n\t * @param {Boolean} ignoreCache Don't use an element's cache during this draw\n\t * @protected\n\t */\n\tp._appendToBatchGroup = function (container, gl, concatMtx, concatAlpha, ignoreCache) {\n\t\t// sort out shared properties\n\t\tif (!container._glMtx) { container._glMtx = new createjs.Matrix2D(); }\n\t\tvar cMtx = container._glMtx;\n\t\tcMtx.copy(concatMtx);\n\t\tif (container.transformMatrix) {\n\t\t\tcMtx.appendMatrix(container.transformMatrix);\n\t\t} else {\n\t\t\tcMtx.appendTransform(\n\t\t\t\tcontainer.x, container.y,\n\t\t\t\tcontainer.scaleX, container.scaleY,\n\t\t\t\tcontainer.rotation, container.skewX, container.skewY,\n\t\t\t\tcontainer.regX, container.regY\n\t\t\t);\n\t\t}\n\n\t\t// sub components of figuring out the position an object holds\n\t\tvar subL, subT, subR, subB;\n\n\t\t// actually apply its data to the buffers\n\t\tvar l = container.children.length;\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tvar item = container.children[i];\n\n\t\t\tif (!(item.visible && concatAlpha)) { continue; }\n\t\t\tif (!item.cacheCanvas || ignoreCache) {\n\t\t\t\tif (item._updateState){\n\t\t\t\t\titem._updateState();\n\t\t\t\t}\n\t\t\t\tif (item.children) {\n\t\t\t\t\tthis._appendToBatchGroup(item, gl, cMtx, item.alpha * concatAlpha);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// check for overflowing batch, if yes then force a render\n\t\t\t// TODO: DHG: consider making this polygon count dependant for things like vector draws\n\t\t\tif (this.batchCardCount+1 > this._maxCardsPerBatch) {\n\t\t\t\tthis.batchReason = \"vertexOverflow\";\n\t\t\t\tthis._drawBuffers(gl);\t\t\t\t\t// <------------------------------------------------------------\n\t\t\t\tthis.batchCardCount = 0;\n\t\t\t}\n\n\t\t\t// keep track of concatenated position\n\t\t\tif (!item._glMtx) { item._glMtx = new createjs.Matrix2D(); }\n\t\t\tvar iMtx = item._glMtx;\n\t\t\tiMtx.copy(cMtx);\n\t\t\tif (item.transformMatrix) {\n\t\t\t\tiMtx.appendMatrix(item.transformMatrix);\n\t\t\t} else {\n\t\t\t\tiMtx.appendTransform(\n\t\t\t\t\titem.x, item.y,\n\t\t\t\t\titem.scaleX, item.scaleY,\n\t\t\t\t\titem.rotation, item.skewX, item.skewY,\n\t\t\t\t\titem.regX, item.regY\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvar uvRect, texIndex, image, frame, texture, src;\n\t\t\tvar useCache = item.cacheCanvas && !ignoreCache;\n\n\t\t\tif (item._webGLRenderStyle === 2 || useCache) {\t\t\t// BITMAP / Cached Canvas\n\t\t\t\timage = (ignoreCache?false:item.cacheCanvas) || item.image;\n\t\t\t} else if (item._webGLRenderStyle === 1) {\t\t\t\t\t\t\t\t\t\t\t// SPRITE\n\t\t\t\tframe = item.spriteSheet.getFrame(item.currentFrame);\t//TODO: Faster way?\n\t\t\t\tif (frame === null) { continue; }\n\t\t\t\timage = frame.image;\n\t\t\t} else {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// MISC (DOM objects render themselves later)\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar uvs = this._uvs;\n\t\t\tvar vertices = this._vertices;\n\t\t\tvar texI = this._indices;\n\t\t\tvar alphas = this._alphas;\n\n\t\t\t// calculate texture\n\t\t\tif (!image) { continue; }\n\t\t\tif (image._storeID === undefined) {\n\t\t\t\t// this texture is new to us so load it and add it to the batch\n\t\t\t\ttexture = this._loadTextureImage(gl, image);\n\t\t\t\tthis._insertTextureInBatch(gl, texture);\n\t\t\t} else {\n\t\t\t\t// fetch the texture (render textures know how to look themselves up to simplify this logic)\n\t\t\t\ttexture = this._textureDictionary[image._storeID];\n\t\t\t\tif (!texture){\n\t\t\t\t\tif (this.vocalDebug){ console.log(\"Texture should not be looked up while not being stored.\"); }\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// put it in the batch if needed\n\t\t\t\tif (texture._batchID !== this._batchID) {\n\t\t\t\t\tthis._insertTextureInBatch(gl, texture);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttexIndex = texture._activeIndex;\n\n\t\t\tif (item._webGLRenderStyle === 2 || useCache) {\t\t\t// BITMAP / Cached Canvas\n\t\t\t\tif (!useCache && item.sourceRect) {\n\t\t\t\t\t// calculate uvs\n\t\t\t\t\tif (!item._uvRect) { item._uvRect = {}; }\n\t\t\t\t\tsrc = item.sourceRect;\n\t\t\t\t\tuvRect = item._uvRect;\n\t\t\t\t\tuvRect.t = (src.y)/image.height;\n\t\t\t\t\tuvRect.l = (src.x)/image.width;\n\t\t\t\t\tuvRect.b = (src.y + src.height)/image.height;\n\t\t\t\t\tuvRect.r = (src.x + src.width)/image.width;\n\n\t\t\t\t\t// calculate vertices\n\t\t\t\t\tsubL = 0;\t\t\t\t\t\t\tsubT = 0;\n\t\t\t\t\tsubR = src.width+subL;\t\t\t\tsubB = src.height+subT;\n\t\t\t\t} else {\n\t\t\t\t\t// calculate uvs\n\t\t\t\t\tuvRect = StageGL.UV_RECT;\n\t\t\t\t\t// calculate vertices\n\t\t\t\t\tif (useCache) {\n\t\t\t\t\t\tsrc = item.bitmapCache;\n\t\t\t\t\t\tsubL = src.x+(src._filterOffX/src.scale);\tsubT = src.y+(src._filterOffY/src.scale);\n\t\t\t\t\t\tsubR = (src._drawWidth/src.scale)+subL;\t\tsubB = (src._drawHeight/src.scale)+subT;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsubL = 0;\t\t\t\t\t\tsubT = 0;\n\t\t\t\t\t\tsubR = image.width+subL;\t\tsubB = image.height+subT;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (item._webGLRenderStyle === 1) {\t\t\t\t\t\t\t\t\t\t\t// SPRITE\n\t\t\t\tvar rect = frame.rect;\n\n\t\t\t\t// calculate uvs\n\t\t\t\tuvRect = frame.uvRect;\n\t\t\t\tif (!uvRect) {\n\t\t\t\t\tuvRect = StageGL.buildUVRects(item.spriteSheet, item.currentFrame, false);\n\t\t\t\t}\n\n\t\t\t\t// calculate vertices\n\t\t\t\tsubL = -frame.regX;\t\t\t\t\t\t\t\tsubT = -frame.regY;\n\t\t\t\tsubR = rect.width-frame.regX;\t\t\t\t\tsubB = rect.height-frame.regY;\n\t\t\t}\n\n\t\t\t// These must be calculated here else a forced draw might happen after they're set\n\t\t\tvar offV1 = this.batchCardCount*StageGL.INDICIES_PER_CARD;\t\t// offset for 1 component vectors\n\t\t\tvar offV2 = offV1*2;\t\t\t\t\t\t\t\t\t\t\t// offset for 2 component vectors\n\n\t\t\t//DHG: See Matrix2D.transformPoint for why this math specifically\n\t\t\t// apply vertices\n\t\t\tvertices[offV2] =\t\tsubL *iMtx.a + subT *iMtx.c +iMtx.tx;\t\tvertices[offV2+1] =\t\tsubL *iMtx.b + subT *iMtx.d +iMtx.ty;\n\t\t\tvertices[offV2+2] =\t\tsubL *iMtx.a + subB *iMtx.c +iMtx.tx;\t\tvertices[offV2+3] =\t\tsubL *iMtx.b + subB *iMtx.d +iMtx.ty;\n\t\t\tvertices[offV2+4] =\t\tsubR *iMtx.a + subT *iMtx.c +iMtx.tx;\t\tvertices[offV2+5] =\t\tsubR *iMtx.b + subT *iMtx.d +iMtx.ty;\n\t\t\tvertices[offV2+6] =\t\tvertices[offV2+2];\t\t\t\t\t\t\tvertices[offV2+7] =\t\tvertices[offV2+3];\n\t\t\tvertices[offV2+8] =\t\tvertices[offV2+4];\t\t\t\t\t\t\tvertices[offV2+9] =\t\tvertices[offV2+5];\n\t\t\tvertices[offV2+10] =\tsubR *iMtx.a + subB *iMtx.c +iMtx.tx;\t\tvertices[offV2+11] =\tsubR *iMtx.b + subB *iMtx.d +iMtx.ty;\n\n\t\t\t// apply uvs\n\t\t\tuvs[offV2] =\tuvRect.l;\t\t\tuvs[offV2+1] =\tuvRect.t;\n\t\t\tuvs[offV2+2] =\tuvRect.l;\t\t\tuvs[offV2+3] =\tuvRect.b;\n\t\t\tuvs[offV2+4] =\tuvRect.r;\t\t\tuvs[offV2+5] =\tuvRect.t;\n\t\t\tuvs[offV2+6] =\tuvRect.l;\t\t\tuvs[offV2+7] =\tuvRect.b;\n\t\t\tuvs[offV2+8] =\tuvRect.r;\t\t\tuvs[offV2+9] =\tuvRect.t;\n\t\t\tuvs[offV2+10] =\tuvRect.r;\t\t\tuvs[offV2+11] =\tuvRect.b;\n\n\t\t\t// apply texture\n\t\t\ttexI[offV1] = texI[offV1+1] = texI[offV1+2] = texI[offV1+3] = texI[offV1+4] = texI[offV1+5] = texIndex;\n\n\t\t\t// apply alpha\n\t\t\talphas[offV1] = alphas[offV1+1] = alphas[offV1+2] = alphas[offV1+3] = alphas[offV1+4] = alphas[offV1+5] = item.alpha * concatAlpha;\n\n\t\t\tthis.batchCardCount++;\n\t\t}\n\t};\n\n\t/**\n\t * Draws all the currently defined cards in the buffer to the render surface.\n\t * @method _drawBuffers\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @protected\n\t */\n\tp._drawBuffers = function (gl) {\n\t\tif (this.batchCardCount <= 0) { return; }\t// prevents error logs on stages filled with un-renederable content.\n\n\t\tif (this.vocalDebug) {\n\t\t\tconsole.log(\"Draw[\"+ this._drawID +\":\"+ this._batchID +\"] : \"+ this.batchReason);\n\t\t}\n\t\tvar shaderProgram = this._activeShader;\n\t\tvar vertexPositionBuffer = this._vertexPositionBuffer;\n\t\tvar textureIndexBuffer = this._textureIndexBuffer;\n\t\tvar uvPositionBuffer = this._uvPositionBuffer;\n\t\tvar alphaBuffer = this._alphaBuffer;\n\n\t\tgl.useProgram(shaderProgram);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, vertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._vertices);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, textureIndexBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.textureIndexAttribute, textureIndexBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._indices);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, uvPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.uvPositionAttribute, uvPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._uvs);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, alphaBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.alphaAttribute, alphaBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, this._alphas);\n\n\t\tgl.uniformMatrix4fv(shaderProgram.pMatrixUniform, gl.FALSE, this._projectionMatrix);\n\n\t\tfor (var i = 0; i < this._batchTextureCount; i++) {\n\t\t\tvar texture = this._batchTextures[i];\n\t\t\tgl.activeTexture(gl.TEXTURE0 + i);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, texture);\n\t\t\tthis.setTextureParams(gl, texture.isPOT);\n\t\t}\n\n\t\tgl.drawArrays(gl.TRIANGLES, 0, this.batchCardCount*StageGL.INDICIES_PER_CARD);\n\t\tthis._batchID++;\n\t};\n\n\t/**\n\t * Draws a card that covers the entire render surface. Mainly used for filters.\n\t * @method _drawBuffers\n\t * @param {WebGLRenderingContext} gl The canvas WebGL context object to draw into.\n\t * @param {Boolean} flipY Covers are used for things like RenderTextures and because of 3D vs Canvas space this can\n\t * end up meaning the `y` space sometimes requires flipping in the render.\n\t * @protected\n\t */\n\tp._drawCover = function (gl, flipY) {\n\t\tif (this._isDrawing > 0) {\n\t\t\tthis._drawBuffers(gl);\n\t\t}\n\n\t\tif (this.vocalDebug) {\n\t\t\tconsole.log(\"Draw[\"+ this._drawID +\":\"+ this._batchID +\"] : \"+ \"Cover\");\n\t\t}\n\t\tvar shaderProgram = this._activeShader;\n\t\tvar vertexPositionBuffer = this._vertexPositionBuffer;\n\t\tvar uvPositionBuffer = this._uvPositionBuffer;\n\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\n\t\tgl.useProgram(shaderProgram);\n\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, vertexPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, vertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, StageGL.COVER_VERT);\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, uvPositionBuffer);\n\t\tgl.vertexAttribPointer(shaderProgram.uvPositionAttribute, uvPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);\n\t\tgl.bufferSubData(gl.ARRAY_BUFFER, 0, flipY?StageGL.COVER_UV_FLIP:StageGL.COVER_UV);\n\n\t\tgl.uniform1i(shaderProgram.samplerUniform, 0);\n\t\tgl.uniform1f(shaderProgram.uprightUniform, flipY?0:1);\n\n\t\tgl.drawArrays(gl.TRIANGLES, 0, StageGL.INDICIES_PER_CARD);\n\t};\n\n\tcreatejs.StageGL = createjs.promote(StageGL, \"Stage\");\n}());\n\n//##############################################################################\n// Bitmap.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\n\t/**\n\t * A Bitmap represents an Image, Canvas, or Video in the display list. A Bitmap can be instantiated using an existing\n\t * HTML element, or a string.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t * \tvar bitmap = new createjs.Bitmap(\"imagePath.jpg\");\n\t *\n\t * <strong>Notes:</strong>\n\t * <ol>\n\t * \t<li>When using a video source that may loop or seek, use a {{#crossLink \"VideoBuffer\"}}{{/crossLink}} object to\n\t * \t prevent blinking / flashing.\n\t * \t<li>When a string path or image tag that is not yet loaded is used, the stage may need to be redrawn before it\n\t * \t will be displayed.</li>\n\t * \t<li>Bitmaps with an SVG source currently will not respect an alpha value other than 0 or 1. To get around this,\n\t * \tthe Bitmap can be cached.</li>\n\t * \t<li>Bitmaps with an SVG source will taint the canvas with cross-origin data, which prevents interactivity. This\n\t * \thappens in all browsers except recent Firefox builds.</li>\n\t * \t<li>Images loaded cross-origin will throw cross-origin security errors when interacted with using a mouse, using\n\t * \tmethods such as `getObjectUnderPoint`, or using filters, or caching. You can get around this by setting\n\t * \t`crossOrigin` flags on your images before passing them to EaselJS, eg: `img.crossOrigin=\"Anonymous\";`</li>\n\t * </ol>\n\t *\n\t * @class Bitmap\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {CanvasImageSource | String | Object} imageOrUri The source image to display. This can be a CanvasImageSource\n\t * (image, video, canvas), an object with a `getImage` method that returns a CanvasImageSource, or a string URL to an image.\n\t * If the latter, a new Image instance with the URL as its src will be used.\n\t **/\n\tfunction Bitmap(imageOrUri) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The source image to display. This can be a CanvasImageSource\n\t\t * (image, video, canvas), an object with a `getImage` method that returns a CanvasImageSource, or a string URL to an image.\n\t\t * If the latter, a new Image instance with the URL as its src will be used.\n\t\t * @property image\n\t\t * @type CanvasImageSource | Object\n\t\t **/\n\t\tif (typeof imageOrUri == \"string\") {\n\t\t\tthis.image = document.createElement(\"img\");\n\t\t\tthis.image.src = imageOrUri;\n\t\t} else {\n\t\t\tthis.image = imageOrUri;\n\t\t}\n\t\n\t\t/**\n\t\t * Specifies an area of the source image to draw. If omitted, the whole image will be drawn.\n\t\t * Notes:\n\t\t * <ul>\n\t\t *     <li>that video sources must have a width / height set to work correctly with `sourceRect`</li>\n\t\t *     <li>Cached objects will ignore the `sourceRect` property</li>\n\t\t * </ul>\n\t\t * @property sourceRect\n\t\t * @type Rectangle\n\t\t * @default null\n\t\t */\n\t\tthis.sourceRect = null;\n\n\t// private properties:\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tthis._webGLRenderStyle = createjs.DisplayObject._StageGL_BITMAP;\n\t}\n\tvar p = createjs.extend(Bitmap, createjs.DisplayObject);\n\t\n\t\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Bitmap; // TODO: deprecated.\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar image = this.image;\n\t\tvar hasContent = this.cacheCanvas || (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t *\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tvar img = this.image, rect = this.sourceRect;\n\t\tif (img.getImage) { img = img.getImage(); }\n\t\tif (!img) { return true; }\n\t\tif (rect) {\n\t\t\t// some browsers choke on out of bound values, so we'll fix them:\n\t\t\tvar x1 = rect.x, y1 = rect.y, x2 = x1 + rect.width, y2 = y1 + rect.height, x = 0, y = 0, w = img.width, h = img.height;\n\t\t\tif (x1 < 0) { x -= x1; x1 = 0; }\n\t\t\tif (x2 > w) { x2 = w; }\n\t\t\tif (y1 < 0) { y -= y1; y1 = 0; }\n\t\t\tif (y2 > h) { y2 = h; }\n\t\t\tctx.drawImage(img, x1, y1, x2-x1, y2-y1, x, y, x2-x1, y2-y1);\n\t\t} else {\n\t\t\tctx.drawImage(img, 0, 0);\n\t\t}\n\t\treturn true;\n\t};\n\t\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method cache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method updateCache\n\t **/\n\t\n\t/**\n\t * Because the content of a Bitmap is already in a simple format, cache is unnecessary for Bitmap instances.\n\t * You should <b>not</b> cache Bitmap instances as it can degrade performance.\n\t *\n\t * <strong>However: If you want to use a filter on a Bitmap, you <em>MUST</em> cache it, or it will not work.</strong>\n\t * To see the API for caching, please visit the DisplayObject {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tvar image = this.image, o = this.sourceRect || image;\n\t\tvar hasContent = (image && (image.naturalWidth || image.getContext || image.readyState >= 2));\n\t\treturn hasContent ? this._rectangle.setValues(0, 0, o.width, o.height) : null;\n\t};\n\t\n\t/**\n\t * Returns a clone of the Bitmap instance.\n\t * @method clone\n\t * @param {Boolean} node Whether the underlying dom element should be cloned as well.\n\t * @return {Bitmap} a clone of the Bitmap instance.\n\t **/\n\tp.clone = function(node) {\n\t\tvar image = this.image;\n\t\tif(image && node){ image = image.cloneNode(); }\n\t\tvar o = new Bitmap(image);\n\t\tif (this.sourceRect) { o.sourceRect = this.sourceRect.clone(); }\n\t\tthis._cloneProps(o);\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Bitmap (name=\"+  this.name +\")]\";\n\t};\n\n\t\n\tcreatejs.Bitmap = createjs.promote(Bitmap, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Sprite.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays a frame or sequence of frames (ie. an animation) from a SpriteSheet instance. A sprite sheet is a series of\n\t * images (usually animation frames) combined into a single image. For example, an animation consisting of 8 100x100\n\t * images could be combined into a 400x200 sprite sheet (4 frames across by 2 high). You can display individual frames,\n\t * play frames as an animation, and even sequence animations together.\n\t *\n\t * See the {{#crossLink \"SpriteSheet\"}}{{/crossLink}} class for more information on setting up frames and animations.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var instance = new createjs.Sprite(spriteSheet);\n\t *      instance.gotoAndStop(\"frameName\");\n\t *\n\t * Until {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} or {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} is called,\n\t * only the first defined frame defined in the sprite sheet will be displayed.\n\t *\n\t * @class Sprite\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to play back. This includes the source image(s), frame\n\t * dimensions, and frame data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t * @param {String|Number} [frameOrAnimation] The frame number or animation to play initially.\n\t **/\n\tfunction Sprite(spriteSheet, frameOrAnimation) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The frame index that will be drawn when draw is called. Note that with some {{#crossLink \"SpriteSheet\"}}{{/crossLink}}\n\t\t * definitions, this will advance non-sequentially. This will always be an integer value.\n\t\t * @property currentFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * Returns the name of the currently playing animation.\n\t\t * @property currentAnimation\n\t\t * @type {String}\n\t\t * @final\n\t\t * @readonly\n\t\t **/\n\t\tthis.currentAnimation = null;\n\t\n\t\t/**\n\t\t * Prevents the animation from advancing each tick automatically. For example, you could create a sprite\n\t\t * sheet of icons, set paused to true, and display the appropriate icon by setting <code>currentFrame</code>.\n\t\t * @property paused\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis.paused = true;\n\t\n\t\t/**\n\t\t * The SpriteSheet instance to play back. This includes the source image, frame dimensions, and frame\n\t\t * data. See {{#crossLink \"SpriteSheet\"}}{{/crossLink}} for more information.\n\t\t * @property spriteSheet\n\t\t * @type {SpriteSheet}\n\t\t * @readonly\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * Specifies the current frame index within the currently playing animation. When playing normally, this will increase\n\t\t * from 0 to n-1, where n is the number of frames in the current animation.\n\t\t *\n\t\t * This could be a non-integer value if\n\t\t * using time-based playback (see {{#crossLink \"Sprite/framerate\"}}{{/crossLink}}, or if the animation's speed is\n\t\t * not an integer.\n\t\t * @property currentAnimationFrame\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.currentAnimationFrame = 0;\n\t\n\t\t/**\n\t\t * By default Sprite instances advance one frame per tick. Specifying a framerate for the Sprite (or its related\n\t\t * SpriteSheet) will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a Sprite with a framerate of 10 is placed on a Stage being updated at 40fps, then the Sprite will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.framerate = 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * Current animation object.\n\t\t * @property _animation\n\t\t * @protected\n\t\t * @type {Object}\n\t\t * @default null\n\t\t **/\n\t\tthis._animation = null;\n\t\n\t\t/**\n\t\t * Current frame index.\n\t\t * @property _currentFrame\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis._currentFrame = null;\n\t\t\n\t\t/**\n\t\t * Skips the next auto advance. Used by gotoAndPlay to avoid immediately jumping to the next frame\n\t\t * @property _skipAdvance\n\t\t * @protected\n\t\t * @type {Boolean}\n\t\t * @default false\n\t\t **/\n\t\tthis._skipAdvance = false;\n\n\t\t/**\n\t\t * Docced in superclass.\n\t\t */\n\t\tthis._webGLRenderStyle = createjs.DisplayObject._StageGL_SPRITE;\n\n\t\tif (frameOrAnimation != null) { this.gotoAndPlay(frameOrAnimation); }\n\t}\n\tvar p = createjs.extend(Sprite, createjs.DisplayObject);\n\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = Sprite; // TODO: Deprecated. This is for backwards support of Flash/Animate spritesheet export.\n\n\n// events:\n\t/**\n\t * Dispatched when an animation reaches its ends.\n\t * @event animationend\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {String} name The name of the animation that just ended.\n\t * @param {String} next The name of the next animation that will be played, or null. This will be the same as name if the animation is looping.\n\t * @since 0.6.0\n\t */\n\t \n\t/**\n\t * Dispatched any time the current frame changes. For example, this could be due to automatic advancement on a tick,\n\t * or calling gotoAndPlay() or gotoAndStop().\n\t * @event change\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t */\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || this.spriteSheet.complete;\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._normalizeFrame();\n\t\tvar o = this.spriteSheet.getFrame(this._currentFrame|0);\n\t\tif (!o) { return false; }\n\t\tvar rect = o.rect;\n\t\tif (rect.width && rect.height) { ctx.drawImage(o.image, rect.x, rect.y, rect.width, rect.height, -o.regX, -o.regY, rect.width, rect.height); }\n\t\treturn true;\n\t};\n\n\t//Note, the doc sections below document using the specified APIs (from DisplayObject)  from\n\t//Bitmap. This is why they have no method implementations.\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method cache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method updateCache\n\t **/\n\n\t/**\n\t * Because the content of a Sprite is already in a raster format, cache is unnecessary for Sprite instances.\n\t * You should not cache Sprite instances as it can degrade performance.\n\t * @method uncache\n\t **/\n\n\t/**\n\t * Play (unpause) the current animation. The Sprite will be paused if either {{#crossLink \"Sprite/stop\"}}{{/crossLink}}\n\t * or {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} is called. Single frame animations will remain\n\t * unchanged.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\n\t/**\n\t * Stop playing a running animation. The Sprite will be playing if {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}\n\t * is called. Note that calling {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}} or {{#crossLink \"Sprite/play\"}}{{/crossLink}}\n\t * will resume playback.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\n\t/**\n\t * Sets paused to false and plays the specified animation name, named frame, or frame number.\n\t * @method gotoAndPlay\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and begin playing.\n\t **/\n\tp.gotoAndPlay = function(frameOrAnimation) {\n\t\tthis.paused = false;\n\t\tthis._skipAdvance = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Sets paused to true and seeks to the specified animation name, named frame, or frame number.\n\t * @method gotoAndStop\n\t * @param {String|Number} frameOrAnimation The frame number or animation name that the playhead should move to\n\t * and stop.\n\t **/\n\tp.gotoAndStop = function(frameOrAnimation) {\n\t\tthis.paused = true;\n\t\tthis._goto(frameOrAnimation);\n\t};\n\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set on the Sprite\n\t * or its SpriteSheet.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\tvar fps = this.framerate || this.spriteSheet.framerate;\n\t\tvar t = (fps && time != null) ? time/(1000/fps) : 1;\n\t\tthis._normalizeFrame(t);\n\t};\n\t\n\t/**\n\t * Returns a {{#crossLink \"Rectangle\"}}{{/crossLink}} instance defining the bounds of the current frame relative to\n\t * the origin. For example, a 90 x 70 frame with <code>regX=50</code> and <code>regY=40</code> would return a\n\t * rectangle with [x=-50, y=-40, width=90, height=70]. This ignores transformations on the display object.\n\t *\n\t * Also see the SpriteSheet {{#crossLink \"SpriteSheet/getFrameBounds\"}}{{/crossLink}} method.\n\t * @method getBounds\n\t * @return {Rectangle} A Rectangle instance. Returns null if the frame does not exist, or the image is not fully\n\t * loaded.\n\t **/\n\tp.getBounds = function() {\n\t\t// TODO: should this normalizeFrame?\n\t\treturn this.DisplayObject_getBounds() || this.spriteSheet.getFrameBounds(this.currentFrame, this._rectangle);\n\t};\n\n\t/**\n\t * Returns a clone of the Sprite instance. Note that the same SpriteSheet is shared between cloned\n\t * instances.\n\t * @method clone\n\t * @return {Sprite} a clone of the Sprite instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Sprite(this.spriteSheet));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Sprite (name=\"+  this.name +\")]\";\n\t};\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Sprite} o\n\t * @return {Sprite} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.currentFrame = this.currentFrame;\n\t\to.currentAnimation = this.currentAnimation;\n\t\to.paused = this.paused;\n\t\to.currentAnimationFrame = this.currentAnimationFrame;\n\t\to.framerate = this.framerate;\n\t\t\n\t\to._animation = this._animation;\n\t\to._currentFrame = this._currentFrame;\n\t\to._skipAdvance = this._skipAdvance;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * Advances the <code>currentFrame</code> if paused is not true. This is called automatically when the {{#crossLink \"Stage\"}}{{/crossLink}}\n\t * ticks.\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * @protected\n\t * @method _tick\n\t **/\n\tp._tick = function(evtObj) {\n\t\tif (!this.paused) {\n\t\t\tif (!this._skipAdvance) { this.advance(evtObj&&evtObj.delta); }\n\t\t\tthis._skipAdvance = false;\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\n\n\t/**\n\t * Normalizes the current frame, advancing animations and dispatching callbacks as appropriate.\n\t * @protected\n\t * @method _normalizeFrame\n\t **/\n\tp._normalizeFrame = function(frameDelta) {\n\t\tframeDelta = frameDelta || 0;\n\t\tvar animation = this._animation;\n\t\tvar paused = this.paused;\n\t\tvar frame = this._currentFrame;\n\t\tvar l;\n\t\t\n\t\tif (animation) {\n\t\t\tvar speed = animation.speed || 1;\n\t\t\tvar animFrame = this.currentAnimationFrame;\n\t\t\tl = animation.frames.length;\n\t\t\tif (animFrame + frameDelta * speed >= l) {\n\t\t\t\tvar next = animation.next;\n\t\t\t\tif (this._dispatchAnimationEnd(animation, frame, paused, next, l - 1)) {\n\t\t\t\t\t// something changed in the event stack, so we shouldn't make any more changes here.\n\t\t\t\t\treturn;\n\t\t\t\t} else if (next) {\n\t\t\t\t\t// sequence. Automatically calls _normalizeFrame again with the remaining frames.\n\t\t\t\t\treturn this._goto(next, frameDelta - (l - animFrame) / speed);\n\t\t\t\t} else {\n\t\t\t\t\t// end.\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t\tanimFrame = animation.frames.length - 1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tanimFrame += frameDelta * speed;\n\t\t\t}\n\t\t\tthis.currentAnimationFrame = animFrame;\n\t\t\tthis._currentFrame = animation.frames[animFrame | 0]\n\t\t} else {\n\t\t\tframe = (this._currentFrame += frameDelta);\n\t\t\tl = this.spriteSheet.getNumFrames();\n\t\t\tif (frame >= l && l > 0) {\n\t\t\t\tif (!this._dispatchAnimationEnd(animation, frame, paused, l - 1)) {\n\t\t\t\t\t// looped.\n\t\t\t\t\tif ((this._currentFrame -= l) >= l) { return this._normalizeFrame(); }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tframe = this._currentFrame | 0;\n\t\tif (this.currentFrame != frame) {\n\t\t\tthis.currentFrame = frame;\n\t\t\tthis.dispatchEvent(\"change\");\n\t\t}\n\t};\n\n\t/**\n\t * Dispatches the \"animationend\" event. Returns true if a handler changed the animation (ex. calling {{#crossLink \"Sprite/stop\"}}{{/crossLink}},\n\t * {{#crossLink \"Sprite/gotoAndPlay\"}}{{/crossLink}}, etc.)\n\t * @property _dispatchAnimationEnd\n\t * @private\n\t * @type {Function}\n\t **/\n\tp._dispatchAnimationEnd = function(animation, frame, paused, next, end) {\n\t\tvar name = animation ? animation.name : null;\n\t\tif (this.hasEventListener(\"animationend\")) {\n\t\t\tvar evt = new createjs.Event(\"animationend\");\n\t\t\tevt.name = name;\n\t\t\tevt.next = next;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t\t// did the animation get changed in the event stack?:\n\t\tvar changed = (this._animation != animation || this._currentFrame != frame);\n\t\t// if the animation hasn't changed, but the sprite was paused, then we want to stick to the last frame:\n\t\tif (!changed && !paused && this.paused) { this.currentAnimationFrame = end; changed = true; }\n\t\treturn changed;\n\t};\n\n\t/**\n\t * Moves the playhead to the specified frame number or animation.\n\t * @method _goto\n\t * @param {String|Number} frameOrAnimation The frame number or animation that the playhead should move to.\n\t * @param {Boolean} [frame] The frame of the animation to go to. Defaults to 0.\n\t * @protected\n\t **/\n\tp._goto = function(frameOrAnimation, frame) {\n\t\tthis.currentAnimationFrame = 0;\n\t\tif (isNaN(frameOrAnimation)) {\n\t\t\tvar data = this.spriteSheet.getAnimation(frameOrAnimation);\n\t\t\tif (data) {\n\t\t\t\tthis._animation = data;\n\t\t\t\tthis.currentAnimation = frameOrAnimation;\n\t\t\t\tthis._normalizeFrame(frame);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.currentAnimation = this._animation = null;\n\t\t\tthis._currentFrame = frameOrAnimation;\n\t\t\tthis._normalizeFrame();\n\t\t}\n\t};\n\n\n\tcreatejs.Sprite = createjs.promote(Sprite, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Shape.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * A Shape allows you to display vector art in the display list. It composites a {{#crossLink \"Graphics\"}}{{/crossLink}}\n\t * instance which exposes all of the vector drawing methods. The Graphics instance can be shared between multiple Shape\n\t * instances to display the same vector graphics with different positions or transforms.\n\t *\n\t * If the vector art will not\n\t * change between draws, you may want to use the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method to reduce the\n\t * rendering cost.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var graphics = new createjs.Graphics().beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *      var shape = new createjs.Shape(graphics);\n\t *\n\t *      //Alternatively use can also use the graphics property of the Shape class to renderer the same as above.\n\t *      var shape = new createjs.Shape();\n\t *      shape.graphics.beginFill(\"#ff0000\").drawRect(0, 0, 100, 100);\n\t *\n\t * @class Shape\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {Graphics} graphics Optional. The graphics instance to display. If null, a new Graphics instance will be created.\n\t **/\n\tfunction Shape(graphics) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The graphics instance to display.\n\t\t * @property graphics\n\t\t * @type Graphics\n\t\t **/\n\t\tthis.graphics = graphics ? graphics : new createjs.Graphics();\n\t}\n\tvar p = createjs.extend(Shape, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the Shape would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the Shape would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.graphics && !this.graphics.isEmpty());\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Shape into the specified context ignoring its visible, alpha, shadow, and transform. Returns true if\n\t * the draw was handled (useful for overriding functionality).\n\t *\n\t * <i>NOTE: This method is mainly for internal use, though it may be useful for advanced uses.</i>\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} [ignoreCache=false] Indicates whether the draw operation should ignore any current cache. For example,\n\t * used for drawing the cache (to prevent it from simply drawing an existing cache back into itself).\n\t * @return {Boolean}\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis.graphics.draw(ctx, this);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns a clone of this Shape. Some properties that are specific to this instance's current context are reverted to\n\t * their defaults (for example .parent).\n\t * @method clone\n\t * @param {Boolean} recursive If true, this Shape's {{#crossLink \"Graphics\"}}{{/crossLink}} instance will also be\n\t * cloned. If false, the Graphics instance will be shared with the new Shape.\n\t **/\n\tp.clone = function(recursive) {\n\t\tvar g = (recursive && this.graphics) ? this.graphics.clone() : this.graphics;\n\t\treturn  this._cloneProps(new Shape(g));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Shape (name=\"+  this.name +\")]\";\n\t};\n\n\n\tcreatejs.Shape = createjs.promote(Shape, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Text.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Display one or more lines of dynamic text (not user editable) in the display list. Line wrapping support (using the\n\t * lineWidth) is very basic, wrapping on spaces and tabs only. Note that as an alternative to Text, you can position HTML\n\t * text above or below the canvas relative to items in the display list using the {{#crossLink \"DisplayObject/localToGlobal\"}}{{/crossLink}}\n\t * method, or using {{#crossLink \"DOMElement\"}}{{/crossLink}}.\n\t *\n\t * <b>Please note that Text does not support HTML text, and can only display one font style at a time.</b> To use\n\t * multiple font styles, you will need to create multiple text instances, and position them manually.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      var text = new createjs.Text(\"Hello World\", \"20px Arial\", \"#ff7700\");\n\t *      text.x = 100;\n\t *      text.textBaseline = \"alphabetic\";\n\t *\n\t * CreateJS Text supports web fonts (the same rules as Canvas). The font must be loaded and supported by the browser\n\t * before it can be displayed.\n\t *\n\t * <strong>Note:</strong> Text can be expensive to generate, so cache instances where possible. Be aware that not all\n\t * browsers will render Text exactly the same.\n\t * @class Text\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {String} [text] The text to display.\n\t * @param {String} [font] The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold\n\t * 36px Arial\").\n\t * @param {String} [color] The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex.\n\t * \"#F00\", \"red\", or \"#FF0000\").\n\t **/\n\tfunction Text(text, font, color) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t **/\n\t\tthis.text = text;\n\t\n\t\t/**\n\t\t * The font style to use. Any valid value for the CSS font attribute is acceptable (ex. \"bold 36px Arial\").\n\t\t * @property font\n\t\t * @type String\n\t\t **/\n\t\tthis.font = font;\n\t\n\t\t/**\n\t\t * The color to draw the text in. Any valid value for the CSS color attribute is acceptable (ex. \"#F00\"). Default is \"#000\".\n\t\t * It will also accept valid canvas fillStyle values.\n\t\t * @property color\n\t\t * @type String\n\t\t **/\n\t\tthis.color = color;\n\t\n\t\t/**\n\t\t * The horizontal text alignment. Any of \"start\", \"end\", \"left\", \"right\", and \"center\". For detailed\n\t\t * information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"left\".\n\t\t * @property textAlign\n\t\t * @type String\n\t\t **/\n\t\tthis.textAlign = \"left\";\n\t\n\t\t/**\n\t\t * The vertical alignment point on the font. Any of \"top\", \"hanging\", \"middle\", \"alphabetic\", \"ideographic\", or\n\t\t * \"bottom\". For detailed information view the <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>. Default is \"top\".\n\t\t * @property textBaseline\n\t\t * @type String\n\t\t*/\n\t\tthis.textBaseline = \"top\";\n\t\n\t\t/**\n\t\t * The maximum width to draw the text. If maxWidth is specified (not null), the text will be condensed or\n\t\t * shrunk to make it fit in this width. For detailed information view the\n\t\t * <a href=\"http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#text-styles\">\n\t\t * whatwg spec</a>.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t*/\n\t\tthis.maxWidth = null;\n\t\n\t\t/**\n\t\t * If greater than 0, the text will be drawn as a stroke (outline) of the specified width.\n\t\t * @property outline\n\t\t * @type Number\n\t\t **/\n\t\tthis.outline = 0;\n\t\n\t\t/**\n\t\t * Indicates the line height (vertical distance between baselines) for multi-line text. If null or 0,\n\t\t * the value of getMeasuredLineHeight is used.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * Indicates the maximum width for a line of text before it is wrapped to multiple lines. If null,\n\t\t * the text will not be wrapped.\n\t\t * @property lineWidth\n\t\t * @type Number\n\t\t **/\n\t\tthis.lineWidth = null;\n\t}\n\tvar p = createjs.extend(Text, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t\n// static properties:\n\t/**\n\t * @property _workingContext\n\t * @type CanvasRenderingContext2D\n\t * @private\n\t **/\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\n\tif (canvas.getContext) { Text._workingContext = canvas.getContext(\"2d\"); canvas.width = canvas.height = 1; }\n\t\n\t\n// constants:\n\t/**\n\t * Lookup table for the ratio to offset bounds x calculations based on the textAlign property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.H_OFFSETS = {start: 0, left: 0, center: -0.5, end: -1, right: -1};\n\t\n\t/**\n\t * Lookup table for the ratio to offset bounds y calculations based on the textBaseline property.\n\t * @property H_OFFSETS\n\t * @type Object\n\t * @protected\n\t * @static\n\t **/\n\tText.V_OFFSETS = {top: 0, hanging: -0.01, middle: -0.4, alphabetic: -0.8, ideographic: -0.85, bottom: -1};\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.text != null && this.text !== \"\");\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0 && hasContent);\n\t};\n\n\t/**\n\t * Draws the Text into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\n\t\tvar col = this.color || \"#000\";\n\t\tif (this.outline) { ctx.strokeStyle = col; ctx.lineWidth = this.outline*1; }\n\t\telse { ctx.fillStyle = col; }\n\t\t\n\t\tthis._drawText(this._prepContext(ctx));\n\t\treturn true;\n\t};\n\n\t/**\n\t * Returns the measured, untransformed width of the text without wrapping. Use getBounds for a more robust value.\n\t * @method getMeasuredWidth\n\t * @return {Number} The measured, untransformed width of the text.\n\t **/\n\tp.getMeasuredWidth = function() {\n\t\treturn this._getMeasuredWidth(this.text);\n\t};\n\n\t/**\n\t * Returns an approximate line height of the text, ignoring the lineHeight property. This is based on the measured\n\t * width of a \"M\" character multiplied by 1.2, which provides an approximate line height for most fonts.\n\t * @method getMeasuredLineHeight\n\t * @return {Number} an approximate line height of the text, ignoring the lineHeight property. This is\n\t * based on the measured width of a \"M\" character multiplied by 1.2, which approximates em for most fonts.\n\t **/\n\tp.getMeasuredLineHeight = function() {\n\t\treturn this._getMeasuredWidth(\"M\")*1.2;\n\t};\n\n\t/**\n\t * Returns the approximate height of multi-line text by multiplying the number of lines against either the\n\t * <code>lineHeight</code> (if specified) or {{#crossLink \"Text/getMeasuredLineHeight\"}}{{/crossLink}}. Note that\n\t * this operation requires the text flowing logic to run, which has an associated CPU cost.\n\t * @method getMeasuredHeight\n\t * @return {Number} The approximate height of the untransformed multi-line text.\n\t **/\n\tp.getMeasuredHeight = function() {\n\t\treturn this._drawText(null,{}).height;\n\t};\n\n\t/**\n\t * Docced in superclass.\n\t */\n\tp.getBounds = function() {\n\t\tvar rect = this.DisplayObject_getBounds();\n\t\tif (rect) { return rect; }\n\t\tif (this.text == null || this.text === \"\") { return null; }\n\t\tvar o = this._drawText(null, {});\n\t\tvar w = (this.maxWidth && this.maxWidth < o.width) ? this.maxWidth : o.width;\n\t\tvar x = w * Text.H_OFFSETS[this.textAlign||\"left\"];\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\tvar y = lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._rectangle.setValues(x, y, w, o.height);\n\t};\n\t\n\t/**\n\t * Returns an object with width, height, and lines properties. The width and height are the visual width and height\n\t * of the drawn text. The lines property contains an array of strings, one for\n\t * each line of text that will be drawn, accounting for line breaks and wrapping. These strings have trailing\n\t * whitespace removed.\n\t * @method getMetrics\n\t * @return {Object} An object with width, height, and lines properties.\n\t **/\n\tp.getMetrics = function() {\n\t\tvar o = {lines:[]};\n\t\to.lineHeight = this.lineHeight || this.getMeasuredLineHeight();\n\t\to.vOffset = o.lineHeight * Text.V_OFFSETS[this.textBaseline||\"top\"];\n\t\treturn this._drawText(null, o, o.lines);\n\t};\n\n\t/**\n\t * Returns a clone of the Text instance.\n\t * @method clone\n\t * @return {Text} a clone of the Text instance.\n\t **/\n\tp.clone = function() {\n\t\treturn this._cloneProps(new Text(this.text, this.font, this.color));\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Text (text=\"+  (this.text.length > 20 ? this.text.substr(0, 17)+\"...\" : this.text) +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _cloneProps\n\t * @param {Text} o\n\t * @protected\n\t * @return {Text} o\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.DisplayObject__cloneProps(o);\n\t\to.textAlign = this.textAlign;\n\t\to.textBaseline = this.textBaseline;\n\t\to.maxWidth = this.maxWidth;\n\t\to.outline = this.outline;\n\t\to.lineHeight = this.lineHeight;\n\t\to.lineWidth = this.lineWidth;\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _getWorkingContext\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @return {CanvasRenderingContext2D}\n\t * @protected\n\t **/\n\tp._prepContext = function(ctx) {\n\t\tctx.font = this.font||\"10px sans-serif\";\n\t\tctx.textAlign = this.textAlign||\"left\";\n\t\tctx.textBaseline = this.textBaseline||\"top\";\n\t\tctx.lineJoin = \"miter\";\n\t\tctx.miterLimit = 2.5;\n\t\treturn ctx;\n\t};\n\n\t/**\n\t * Draws multiline text.\n\t * @method _drawText\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {Object} o\n\t * @param {Array} lines\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._drawText = function(ctx, o, lines) {\n\t\tvar paint = !!ctx;\n\t\tif (!paint) {\n\t\t\tctx = Text._workingContext;\n\t\t\tctx.save();\n\t\t\tthis._prepContext(ctx);\n\t\t}\n\t\tvar lineHeight = this.lineHeight||this.getMeasuredLineHeight();\n\t\t\n\t\tvar maxW = 0, count = 0;\n\t\tvar hardLines = String(this.text).split(/(?:\\r\\n|\\r|\\n)/);\n\t\tfor (var i=0, l=hardLines.length; i<l; i++) {\n\t\t\tvar str = hardLines[i];\n\t\t\tvar w = null;\n\t\t\t\n\t\t\tif (this.lineWidth != null && (w = ctx.measureText(str).width) > this.lineWidth) {\n\t\t\t\t// text wrapping:\n\t\t\t\tvar words = str.split(/(\\s)/);\n\t\t\t\tstr = words[0];\n\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\n\t\t\t\tfor (var j=1, jl=words.length; j<jl; j+=2) {\n\t\t\t\t\t// Line needs to wrap:\n\t\t\t\t\tvar wordW = ctx.measureText(words[j] + words[j+1]).width;\n\t\t\t\t\tif (w + wordW > this.lineWidth) {\n\t\t\t\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\t\t\t\tif (lines) { lines.push(str); }\n\t\t\t\t\t\tif (w > maxW) { maxW = w; }\n\t\t\t\t\t\tstr = words[j+1];\n\t\t\t\t\t\tw = ctx.measureText(str).width;\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstr += words[j] + words[j+1];\n\t\t\t\t\t\tw += wordW;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (paint) { this._drawTextLine(ctx, str, count*lineHeight); }\n\t\t\tif (lines) { lines.push(str); }\n\t\t\tif (o && w == null) { w = ctx.measureText(str).width; }\n\t\t\tif (w > maxW) { maxW = w; }\n\t\t\tcount++;\n\t\t}\n\t\t\n\t\tif (o) {\n\t\t\to.width = maxW;\n\t\t\to.height = count*lineHeight;\n\t\t}\n\t\tif (!paint) { ctx.restore(); }\n\t\treturn o;\n\t};\n\n\t/**\n\t * @method _drawTextLine\n\t * @param {CanvasRenderingContext2D} ctx\n\t * @param {String} text\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tp._drawTextLine = function(ctx, text, y) {\n\t\t// Chrome 17 will fail to draw the text if the last param is included but null, so we feed it a large value instead:\n\t\tif (this.outline) { ctx.strokeText(text, 0, y, this.maxWidth||0xFFFF); }\n\t\telse { ctx.fillText(text, 0, y, this.maxWidth||0xFFFF); }\n\t};\n\t\n\t\n\t/**\n\t * @method _getMeasuredWidth\n\t * @param {String} text\n\t * @protected\n\t **/\n\tp._getMeasuredWidth = function(text) {\n\t\tvar ctx = Text._workingContext;\n\t\tctx.save();\n\t\tvar w = this._prepContext(ctx).measureText(text).width;\n\t\tctx.restore();\n\t\treturn w;\n\t};\n\n\n\tcreatejs.Text = createjs.promote(Text, \"DisplayObject\");\n}());\n\n//##############################################################################\n// BitmapText.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Displays text using bitmap glyphs defined in a sprite sheet. Multi-line text is supported using new line characters,\n\t * but automatic wrapping is not supported. See the {{#crossLink \"BitmapText/spriteSheet:property\"}}{{/crossLink}}\n\t * property for more information on defining glyphs.\n\t *\n\t * <strong>Important:</strong> While BitmapText extends Container, it is not designed to be used as one.\n\t * As such, methods like addChild and removeChild are disabled.\n\t *\n\t *\n\t * @class BitmapText\n\t * @extends DisplayObject\n\t * @param {String} [text=\"\"] The text to display.\n\t * @param {SpriteSheet} [spriteSheet=null] The spritesheet that defines the character glyphs.\n\t * @constructor\n\t **/\n\tfunction BitmapText(text, spriteSheet) {\n\t\tthis.Container_constructor();\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The text to display.\n\t\t * @property text\n\t\t * @type String\n\t\t * @default \"\"\n\t\t **/\n\t\tthis.text = text||\"\";\n\t\t\n\t\t/**\n\t\t * A SpriteSheet instance that defines the glyphs for this bitmap text. Each glyph/character\n\t\t * should have a single frame animation defined in the sprite sheet named the same as\n\t\t * corresponding character. For example, the following animation definition:\n\t\t *\n\t\t * \t\t\"A\": {frames: [0]}\n\t\t *\n\t\t * would indicate that the frame at index 0 of the spritesheet should be drawn for the \"A\" character. The short form\n\t\t * is also acceptable:\n\t\t * \n\t\t * \t\t\"A\": 0\n\t\t *\n\t\t * Note that if a character in the text is not found in the sprite sheet, it will also\n\t\t * try to use the alternate case (upper or lower).\n\t\t *\n\t\t * See SpriteSheet for more information on defining sprite sheet data.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t * @default null\n\t\t **/\n\t\tthis.spriteSheet = spriteSheet;\n\t\n\t\t/**\n\t\t * The height of each line of text. If 0, then it will use a line height calculated\n\t\t * by checking for the height of the \"1\", \"T\", or \"L\" character (in that order). If\n\t\t * those characters are not defined, it will use the height of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property lineHeight\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.lineHeight = 0;\n\t\n\t\t/**\n\t\t * This spacing (in pixels) will be added after each character in the output.\n\t\t * @property letterSpacing\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.letterSpacing = 0;\n\t\n\t\t/**\n\t\t * If a space character is not defined in the sprite sheet, then empty pixels equal to\n\t\t * spaceWidth will be inserted instead. If 0, then it will use a value calculated\n\t\t * by checking for the width of the \"1\", \"l\", \"E\", or \"A\" character (in that order). If\n\t\t * those characters are not defined, it will use the width of the first frame of the\n\t\t * sprite sheet.\n\t\t * @property spaceWidth\n\t\t * @type Number\n\t\t * @default 0\n\t\t **/\n\t\tthis.spaceWidth = 0;\n\t\t\n\t\t\n\t// private properties:\n\t \t/**\n\t\t * @property _oldProps\n\t\t * @type Object\n\t\t * @protected\n\t\t **/\n\t\tthis._oldProps = {text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0};\n\n\t\t/**\n\t\t * Used to track the object which this class attached listeners to, helps optimize listener attachment.\n\t\t * @property _oldStage\n\t\t * @type Stage\n\t\t * @protected\n\t\t */\n\t\tthis._oldStage = null;\n\t\t/**\n\t\t * The event listener proxy triggered drawing draw for special circumstances.\n\t\t * @property _drawAction\n\t\t * @type function\n\t\t * @protected\n\t\t */\n\t\tthis._drawAction = null;\n\t}\n\tvar p = createjs.extend(BitmapText, createjs.Container);\n\n// static properties:\n\t/**\n\t * BitmapText uses Sprite instances to draw text. To reduce the creation and destruction of instances (and thus garbage collection), it maintains\n\t * an internal object pool of sprite instances to reuse. Increasing this value can cause more sprites to be\n\t * retained, slightly increasing memory use, but reducing instantiation.\n\t * @property maxPoolSize\n\t * @type Number\n\t * @static\n\t * @default 100\n\t **/\n\tBitmapText.maxPoolSize = 100;\n\t\n\t/**\n\t * Sprite object pool.\n\t * @type {Array}\n\t * @static\n\t * @private\n\t */\n\tBitmapText._spritePool = [];\n\n\t\n// public methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return; }\n\t\tthis._updateState();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t};\n\t\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp.getBounds = function() {\n\t\tthis._updateText();\n\t\treturn this.Container_getBounds();\n\t};\n\t\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\tvar hasContent = this.cacheCanvas || (this.spriteSheet && this.spriteSheet.complete && this.text);\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX !== 0 && this.scaleY !== 0 && hasContent);\n\t};\n\t\n\tp.clone = function() {\n\t\treturn this._cloneProps(new BitmapText(this.text, this.spriteSheet));\n\t};\n\t\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method addChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChild\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeChildAt\n\t **/\n\t/**\n\t * <strong>Disabled in BitmapText.</strong>\n\t * @method removeAllChildren\n\t **/\n\tp.addChild = p.addChildAt = p.removeChild = p.removeChildAt = p.removeAllChildren = function() {};\n\n\n// private methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp._updateState = function() {\n\t\tthis._updateText();\n\t};\n\n \t/**\n\t * @method _cloneProps\n\t * @param {BitmapText} o\n\t * @return {BitmapText} o\n\t * @protected\n\t **/\n\tp._cloneProps = function(o) {\n\t\tthis.Container__cloneProps(o);\n\t\to.lineHeight = this.lineHeight;\n\t\to.letterSpacing = this.letterSpacing;\n\t\to.spaceWidth = this.spaceWidth;\n\t\treturn o;\n\t};\n\t\n\t/**\n\t * @method _getFrameIndex\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getFrameIndex = function(character, spriteSheet) {\n\t\tvar c, o = spriteSheet.getAnimation(character);\n\t\tif (!o) {\n\t\t\t(character != (c = character.toUpperCase())) || (character != (c = character.toLowerCase())) || (c=null);\n\t\t\tif (c) { o = spriteSheet.getAnimation(c); }\n\t\t}\n\t\treturn o && o.frames[0];\n\t};\n\t\n\t/**\n\t * @method _getFrame\n\t * @param {String} character\n\t * @param {SpriteSheet} spriteSheet\n\t * @return {Object}\n\t * @protected\n\t **/\n\tp._getFrame = function(character, spriteSheet) {\n\t\tvar index = this._getFrameIndex(character, spriteSheet);\n\t\treturn index == null ? index : spriteSheet.getFrame(index);\n\t};\n\n\t/**\n\t * @method _getLineHeight\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getLineHeight = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"T\",ss) || this._getFrame(\"L\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.height : 1;\n\t};\n\n\t/**\n\t * @method _getSpaceWidth\n\t * @param {SpriteSheet} ss\n\t * @return {Number}\n\t * @protected\n\t **/\n\tp._getSpaceWidth = function(ss) {\n\t\tvar frame = this._getFrame(\"1\",ss) || this._getFrame(\"l\",ss) || this._getFrame(\"e\",ss) || this._getFrame(\"a\",ss) || ss.getFrame(0);\n\t\treturn frame ? frame.rect.width : 1;\n\t};\n\n\t/**\n\t * @method _updateText\n\t * @protected\n\t **/\n\tp._updateText = function() {\n\t\tvar x=0, y=0, o=this._oldProps, change=false, spaceW=this.spaceWidth, lineH=this.lineHeight, ss=this.spriteSheet;\n\t\tvar pool=BitmapText._spritePool, kids=this.children, childIndex=0, numKids=kids.length, sprite;\n\t\t\n\t\tfor (var n in o) {\n\t\t\tif (o[n] != this[n]) {\n\t\t\t\to[n] = this[n];\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t}\n\t\tif (!change) { return; }\n\t\t\n\t\tvar hasSpace = !!this._getFrame(\" \", ss);\n\t\tif (!hasSpace && !spaceW) { spaceW = this._getSpaceWidth(ss); }\n\t\tif (!lineH) { lineH = this._getLineHeight(ss); }\n\t\t\n\t\tfor(var i=0, l=this.text.length; i<l; i++) {\n\t\t\tvar character = this.text.charAt(i);\n\t\t\tif (character == \" \" && !hasSpace) {\n\t\t\t\tx += spaceW;\n\t\t\t\tcontinue;\n\t\t\t} else if (character==\"\\n\" || character==\"\\r\") {\n\t\t\t\tif (character==\"\\r\" && this.text.charAt(i+1) == \"\\n\") { i++; } // crlf\n\t\t\t\tx = 0;\n\t\t\t\ty += lineH;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar index = this._getFrameIndex(character, ss);\n\t\t\tif (index == null) { continue; }\n\t\t\t\n\t\t\tif (childIndex < numKids) {\n\t\t\t\tsprite = kids[childIndex];\n\t\t\t} else {\n\t\t\t\tkids.push(sprite = pool.length ? pool.pop() : new createjs.Sprite());\n\t\t\t\tsprite.parent = this;\n\t\t\t\tnumKids++;\n\t\t\t}\n\t\t\tsprite.spriteSheet = ss;\n\t\t\tsprite.gotoAndStop(index);\n\t\t\tsprite.x = x;\n\t\t\tsprite.y = y;\n\t\t\tchildIndex++;\n\t\t\t\n\t\t\tx += sprite.getBounds().width + this.letterSpacing;\n\t\t}\n\t\twhile (numKids > childIndex) {\n\t\t\t // faster than removeChild.\n\t\t\tpool.push(sprite = kids.pop());\n\t\t\tsprite.parent = null;\n\t\t\tnumKids--;\n\t\t}\n\t\tif (pool.length > BitmapText.maxPoolSize) { pool.length = BitmapText.maxPoolSize; }\n\t};\n\n\n\tcreatejs.BitmapText = createjs.promote(BitmapText, \"Container\");\n}());\n\n//##############################################################################\n// MovieClip.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The MovieClip class associates a TweenJS Timeline with an EaselJS {{#crossLink \"Container\"}}{{/crossLink}}. It allows\n\t * you to create objects which encapsulate timeline animations, state changes, and synched actions. The MovieClip\n\t * class has been included in the EaselJS minified file since 0.7.0.\n\t *\n\t * Currently MovieClip only works properly if it is tick based (as opposed to time based) though some concessions have\n\t * been made to support time-based timelines in the future.\n\t *\n\t * <h4>Example</h4>\n\t * This example animates two shapes back and forth. The grey shape starts on the left, but we jump to a mid-point in\n\t * the animation using {{#crossLink \"MovieClip/gotoAndPlay\"}}{{/crossLink}}.\n\t *\n\t *      var stage = new createjs.Stage(\"canvas\");\n\t *      createjs.Ticker.addEventListener(\"tick\", stage);\n\t *\n\t *      var mc = new createjs.MovieClip({loop:-1, labels:{myLabel:20}});\n\t *      stage.addChild(mc);\n\t *\n\t *      var child1 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#999999\")\n\t *              .drawCircle(30,30,30));\n\t *      var child2 = new createjs.Shape(\n\t *          new createjs.Graphics().beginFill(\"#5a9cfb\")\n\t *              .drawCircle(30,30,30));\n\t *\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child1)\n\t *              .to({x:0}).to({x:60}, 50).to({x:0}, 50));\n\t *      mc.timeline.addTween(\n\t *          createjs.Tween.get(child2)\n\t *              .to({x:60}).to({x:0}, 50).to({x:60}, 50));\n\t *\n\t *      mc.gotoAndPlay(\"start\");\n\t *\n\t * It is recommended to use <code>tween.to()</code> to animate and set properties (use no duration to have it set\n\t * immediately), and the <code>tween.wait()</code> method to create delays between animations. Note that using the\n\t * <code>tween.set()</code> method to affect properties will likely not provide the desired result.\n\t *\n\t * @class MovieClip\n\t * @main MovieClip\n\t * @param {Object} [props] The configuration properties to apply to this instance (ex. `{mode:MovieClip.SYNCHED}`).\n\t * Supported props for the MovieClip are listed below. These props are set on the corresponding instance properties except where\n\t * specified.<UL>\n\t *    <LI> `mode`</LI>\n\t *    <LI> `startPosition`</LI>\n\t *    <LI> `frameBounds`</LI>\n\t * </UL>\n\t * \n\t * This object will also be passed into the Timeline instance associated with this MovieClip. See the documentation\n\t * for Timeline for a list of supported props (ex. `paused`, `labels`, `loop`, `reversed`, etc.)\n\t * @extends Container\n\t * @constructor\n\t **/\n\tfunction MovieClip(props) {\n\t\tthis.Container_constructor();\n\t\t!MovieClip.inited&&MovieClip.init(); // static init\n\t\t\n\t\tvar mode, startPosition, loop, labels;\n\t\t\n\t\t// handle old params (mode, startPosition, loop, labels):\n\t\t// TODO: deprecated param handling:\n\t\tif (props instanceof String || arguments.length > 1) {\n\t\t\tmode = props;\n\t\t\tstartPosition = arguments[1];\n\t\t\tloop = arguments[2];\n\t\t\tlabels = arguments[3];\n\t\t\tif (loop == null) { loop = -1; }\n\t\t\tprops = null;\n\t\t} else if (props) {\n\t\t\tmode = props.mode;\n\t\t\tstartPosition = props.startPosition;\n\t\t\tloop = props.loop;\n\t\t\tlabels = props.labels;\n\t\t}\n\t\tif (!props) { props = {labels:labels}; }\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * Controls how this MovieClip advances its time. Must be one of 0 (INDEPENDENT), 1 (SINGLE_FRAME), or 2 (SYNCHED).\n\t\t * See each constant for a description of the behaviour.\n\t\t * @property mode\n\t\t * @type String\n\t\t * @default null\n\t\t **/\n\t\tthis.mode = mode||MovieClip.INDEPENDENT;\n\t\n\t\t/**\n\t\t * Specifies what the first frame to play in this movieclip, or the only frame to display if mode is SINGLE_FRAME.\n\t\t * @property startPosition\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.startPosition = startPosition||0;\n\t\n\t\t/**\n\t\t * Specifies how many times this MovieClip should loop. A value of -1 indicates it should loop indefinitely. A value of\n\t\t * 1 would cause it to loop once (ie. play a total of twice).\n\t\t * @property loop\n\t\t * @type Number\n\t\t * @default -1\n\t\t */\n\t\tthis.loop = loop === true ? -1 : (loop || 0);\n\t\n\t\t/**\n\t\t * The current frame of the movieclip.\n\t\t * @property currentFrame\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @readonly\n\t\t */\n\t\tthis.currentFrame = 0;\n\t\n\t\t/**\n\t\t * If true, the MovieClip's position will not advance when ticked.\n\t\t * @property paused\n\t\t * @type Boolean\n\t\t * @default false\n\t\t */\n\t\tthis.paused = props.paused||false;\n\t\n\t\t/**\n\t\t * If true, actions in this MovieClip's tweens will be run when the playhead advances.\n\t\t * @property actionsEnabled\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.actionsEnabled = true;\n\t\n\t\t/**\n\t\t * If true, the MovieClip will automatically be reset to its first frame whenever the timeline adds\n\t\t * it back onto the display list. This only applies to MovieClip instances with mode=INDEPENDENT.\n\t\t * <br><br>\n\t\t * For example, if you had a character animation with a \"body\" child MovieClip instance\n\t\t * with different costumes on each frame, you could set body.autoReset = false, so that\n\t\t * you can manually change the frame it is on, without worrying that it will be reset\n\t\t * automatically.\n\t\t * @property autoReset\n\t\t * @type Boolean\n\t\t * @default true\n\t\t */\n\t\tthis.autoReset = true;\n\t\t\n\t\t/**\n\t\t * An array of bounds for each frame in the MovieClip. This is mainly intended for tool output.\n\t\t * @property frameBounds\n\t\t * @type Array\n\t\t * @default null\n\t\t */\n\t\tthis.frameBounds = this.frameBounds||props.frameBounds; // frameBounds are set on the prototype in Animate.\n\t\t\n\t\t/**\n\t\t * By default MovieClip instances advance one frame per tick. Specifying a framerate for the MovieClip\n\t\t * will cause it to advance based on elapsed time between ticks as appropriate to maintain the target\n\t\t * framerate.\n\t\t *\n\t\t * For example, if a MovieClip with a framerate of 10 is placed on a Stage being updated at 40fps, then the MovieClip will\n\t\t * advance roughly one frame every 4 ticks. This will not be exact, because the time between each tick will\n\t\t * vary slightly between frames.\n\t\t *\n\t\t * This feature is dependent on the tick event object (or an object with an appropriate \"delta\" property) being\n\t\t * passed into {{#crossLink \"Stage/update\"}}{{/crossLink}}.\n\t\t * @property framerate\n\t\t * @type {Number}\n\t\t * @default null\n\t\t **/\n\t\tthis.framerate = null;\n\t\t\n\t\t// set up the needed props for Timeline:\n\t\tprops.useTicks = props.paused = true;\n\t\t\n\t\t/**\n\t\t * The TweenJS Timeline that is associated with this MovieClip. This is created automatically when the MovieClip\n\t\t * instance is initialized. Animations are created by adding <a href=\"http://tweenjs.com\">TweenJS</a> Tween\n\t\t * instances to the timeline.\n\t\t *\n\t\t * <h4>Example</h4>\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({x:0}).to({x:100}, 30);\n\t\t *      var mc = new createjs.MovieClip();\n\t\t *      mc.timeline.addTween(tween);\n\t\t *\n\t\t * Elements can be added and removed from the timeline by toggling an \"_off\" property\n\t\t * using the <code>tweenInstance.to()</code> method. Note that using <code>Tween.set</code> is not recommended to\n\t\t * create MovieClip animations. The following example will toggle the target off on frame 0, and then back on for\n\t\t * frame 1. You can use the \"visible\" property to achieve the same effect.\n\t\t *\n\t\t *      var tween = createjs.Tween.get(target).to({_off:false})\n\t\t *          .wait(1).to({_off:true})\n\t\t *          .wait(1).to({_off:false});\n\t\t *\n\t\t * @property timeline\n\t\t * @type Timeline\n\t\t * @default null\n\t\t */\n\t\tthis.timeline = new createjs.Timeline(props);\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _synchOffset\n\t\t * @type Number\n\t\t * @default 0\n\t\t * @private\n\t\t */\n\t\tthis._synchOffset = 0;\n\t\n\t\t/**\n\t\t * @property _rawPosition\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @private\n\t\t */\n\t\tthis._rawPosition = -1; // TODO: evaluate using a ._reset Boolean prop instead of -1.\n\t\t\n\t\t/**\n\t\t * @property _bound_resolveState\n\t\t * @type Function\n\t\t * @private\n\t\t */\n\t\tthis._bound_resolveState = this._resolveState.bind(this);\n\t\n\t\n\t\t/**\n\t\t * The time remaining from the previous tick, only applicable when .framerate is set.\n\t\t * @property _t\n\t\t * @type Number\n\t\t * @private\n\t\t */\n\t\tthis._t = 0;\n\t\n\t\t/**\n\t\t * List of display objects that are actively being managed by the MovieClip.\n\t\t * @property _managed\n\t\t * @type Object\n\t\t * @private\n\t\t */\n\t\tthis._managed = {};\n\t}\n\tvar p = createjs.extend(MovieClip, createjs.Container);\n\n\n// constants:\n\t/**\n\t * The MovieClip will advance independently of its parent, even if its parent is paused.\n\t * This is the default mode.\n\t * @property INDEPENDENT\n\t * @static\n\t * @type String\n\t * @default \"independent\"\n\t * @readonly\n\t **/\n\tMovieClip.INDEPENDENT = \"independent\";\n\n\t/**\n\t * The MovieClip will only display a single frame (as determined by the startPosition property).\n\t * @property SINGLE_FRAME\n\t * @static\n\t * @type String\n\t * @default \"single\"\n\t * @readonly\n\t **/\n\tMovieClip.SINGLE_FRAME = \"single\";\n\n\t/**\n\t * The MovieClip will be advanced only when its parent advances and will be synched to the position of\n\t * the parent MovieClip.\n\t * @property SYNCHED\n\t * @static\n\t * @type String\n\t * @default \"synched\"\n\t * @readonly\n\t **/\n\tMovieClip.SYNCHED = \"synched\";\n\t\n\t\n// static properties:\n\tMovieClip.inited = false;\n\t\n\t\n// static methods:\n\tMovieClip.init = function() {\n\t\tif (MovieClip.inited) { return; }\n\t\t// plugins introduce some overhead to Tween, so we only install this if an MC is instantiated.\n\t\tMovieClipPlugin.install();\n\t\tMovieClip.inited = true;\n\t};\n\t\n\t\n// getter / setters:\n\t/**\n\t * Use the {{#crossLink \"MovieClip/labels:property\"}}{{/crossLink}} property instead.\n\t * @method _getLabels\n\t * @protected\n\t * @return {Array}\n\t **/\n\tp._getLabels = function() {\n\t\treturn this.timeline.getLabels();\n\t};\n\t// MovieClip.getLabels is @deprecated. Remove for 1.1+\n\tp.getLabels = createjs.deprecate(p._getLabels, \"MovieClip.getLabels\");\n\n\t/**\n\t * Use the {{#crossLink \"MovieClip/currentLabel:property\"}}{{/crossLink}} property instead.\n\t * @method _getCurrentLabel\n\t * @protected\n\t * @return {String}\n\t **/\n\tp._getCurrentLabel = function() {\n\t\treturn this.timeline.currentLabel;\n\t};\n\t// MovieClip.getCurrentLabel is @deprecated. Remove for 1.1+\n\tp.getCurrentLabel = createjs.deprecate(p._getCurrentLabel, \"MovieClip.getCurrentLabel\");\n\n\t/**\n\t * Use the {{#crossLink \"MovieClip/duration:property\"}}{{/crossLink}} property instead.\n\t * @method _getDuration\n\t * @protected\n\t * @return {Number}\n\t **/\n\tp._getDuration = function() {\n\t\treturn this.timeline.duration;\n\t};\n\t// MovieClip.getDuration is @deprecated. Remove for 1.1+\n\tp.getDuration = createjs.deprecate(p._getDuration, \"MovieClip.getDuration\");\n\n\t/**\n\t * Returns an array of objects with label and position (aka frame) properties, sorted by position.\n\t * @property labels\n\t * @type {Array}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the name of the label on or immediately before the current frame.\n\t * @property currentLabel\n\t * @type {String}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks.\n\t * @property totalFrames\n\t * @type {Number}\n\t * @readonly\n\t **/\n\t\n\t/**\n\t * Returns the duration of this MovieClip in seconds or ticks.\n\t * @property duration\n\t * @type {Number}\n\t * @readonly\n\t **/\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tlabels: { get: p._getLabels },\n\t\t\tcurrentLabel: { get: p._getCurrentLabel },\n\t\t\ttotalFrames: { get: p._getDuration },\n\t\t\tduration: { get: p._getDuration }\n\t\t\t// TODO: can we just proxy .currentFrame to tl.position as well? Ditto for .loop (or just remove entirely).\n\t\t});\n\t} catch (e) {}\n\n\n// public methods:\n\t/**\n\t * Constructor alias for backwards compatibility. This method will be removed in future versions.\n\t * Subclasses should be updated to use {{#crossLink \"Utility Methods/extends\"}}{{/crossLink}}.\n\t * @method initialize\n\t * @deprecated in favour of `createjs.promote()`\n\t **/\n\tp.initialize = MovieClip; // TODO: Deprecated. This is for backwards support of Adobe Flash/Animate\n\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t **/\n\tp.isVisible = function() {\n\t\t// children are placed in draw, so we can't determine if we have content.\n\t\treturn !!(this.visible && this.alpha > 0 && this.scaleX != 0 && this.scaleY != 0);\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t **/\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// draw to cache first:\n\t\tif (this.DisplayObject_draw(ctx, ignoreCache)) { return true; }\n\t\tthis._updateState();\n\t\tthis.Container_draw(ctx, ignoreCache);\n\t\treturn true;\n\t};\n\n\t/**\n\t * Sets paused to false.\n\t * @method play\n\t **/\n\tp.play = function() {\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * Sets paused to true.\n\t * @method stop\n\t **/\n\tp.stop = function() {\n\t\tthis.paused = true;\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to false.\n\t * @method gotoAndPlay\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t **/\n\tp.gotoAndPlay = function(positionOrLabel) {\n\t\tthis.paused = false;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances this movie clip to the specified position or label and sets paused to true.\n\t * @method gotoAndStop\n\t * @param {String|Number} positionOrLabel The animation or frame name to go to.\n\t **/\n\tp.gotoAndStop = function(positionOrLabel) {\n\t\tthis.paused = true;\n\t\tthis._goto(positionOrLabel);\n\t};\n\t\n\t/**\n\t * Advances the playhead. This occurs automatically each tick by default.\n\t * @param [time] {Number} The amount of time in ms to advance by. Only applicable if framerate is set.\n\t * @method advance\n\t*/\n\tp.advance = function(time) {\n\t\tvar independent = MovieClip.INDEPENDENT;\n\t\tif (this.mode !== independent) { return; } // update happens in draw for synched clips\n\t\t\n\t\t// if this MC doesn't have a framerate, hunt ancestors for one:\n\t\tvar o=this, fps = o.framerate;\n\t\twhile ((o = o.parent) && fps === null) { if (o.mode === independent) { fps = o._framerate; } }\n\t\tthis._framerate = fps;\n\t\t\n\t\tif (this.paused) { return; }\n\t\t\n\t\t// calculate how many frames to advance:\n\t\tvar t = (fps !== null && fps !== -1 && time !== null) ? time/(1000/fps) + this._t : 1;\n\t\tvar frames = t|0;\n\t\tthis._t = t-frames; // leftover time, save to add to next advance.\n\t\t\n\t\twhile (frames--) { this._updateTimeline(this._rawPosition+1, false); }\n\t};\n\t\n\t/**\n\t * MovieClip instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\t// TODO: add support for this? Need to clone the Timeline & retarget tweens - pretty complex.\n\t\tthrow(\"MovieClip cannot be cloned.\");\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[MovieClip (name=\"+  this.name +\")]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * Docced in superclass.\n\t **/\n\tp._updateState = function() {\n\t\tif (this._rawPosition === -1 || this.mode !== MovieClip.INDEPENDENT) { this._updateTimeline(-1); }\n\t};\n\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t **/\n\tp._tick = function(evtObj) {\n\t\tthis.advance(evtObj&&evtObj.delta);\n\t\tthis.Container__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _goto\n\t * @param {String|Number} positionOrLabel The animation name or frame number to go to.\n\t * @protected\n\t **/\n\tp._goto = function(positionOrLabel) {\n\t\tvar pos = this.timeline.resolve(positionOrLabel);\n\t\tif (pos == null) { return; }\n\t\tthis._t = 0;\n\t\tthis._updateTimeline(pos, true);\n\t};\n\t\n\t/**\n\t * @method _reset\n\t * @private\n\t **/\n\tp._reset = function() {\n\t\tthis._rawPosition = -1;\n\t\tthis._t = this.currentFrame = 0;\n\t\tthis.paused = false;\n\t};\n\t\n\t/**\n\t * @method _updateTimeline\n\t * @param {Boolean} jump Indicates whether this update is due to jumping (via gotoAndXX) to a new position.\n\t * @protected\n\t **/\n\tp._updateTimeline = function(rawPosition, jump) {\n\t\tvar synced = this.mode !== MovieClip.INDEPENDENT, tl = this.timeline;\n\t\tif (synced) { rawPosition = this.startPosition + (this.mode===MovieClip.SINGLE_FRAME?0:this._synchOffset); }\n\t\tif (rawPosition < 0) { rawPosition = 0; }\n\t\tif (this._rawPosition === rawPosition && !synced) { return; }\n\t\tthis._rawPosition = rawPosition;\n\t\t\n\t\t// update timeline position, ignoring actions if this is a graphic.\n\t\ttl.loop = this.loop; // TODO: should we maintain this on MovieClip, or just have it on timeline?\n\t\ttl.setPosition(rawPosition, synced || !this.actionsEnabled, jump, this._bound_resolveState);\n\t};\n\t\n\t/**\n\t * Renders position 0 without running actions or updating _rawPosition.\n\t * Primarily used by Animate CC to build out the first frame in the constructor of MC symbols.\n\t * NOTE: not tested when run after the MC advances past the first frame.\n\t * @method _renderFirstFrame\n\t * @protected\n\t **/\n\tp._renderFirstFrame = function() {\n\t\tvar tl = this.timeline, pos = tl.rawPosition;\n\t\ttl.setPosition(0, true, true, this._bound_resolveState);\n\t\ttl.rawPosition = pos;\n\t};\n\t\n\t/**\n\t * Runs via a callback after timeline property updates and before actions.\n\t * @method _resolveState\n\t * @protected\n\t **/\n\tp._resolveState = function() {\n\t\tvar tl = this.timeline;\n\t\tthis.currentFrame = tl.position;\n\t\t\n\t\tfor (var n in this._managed) { this._managed[n] = 1; }\n\n\t\tvar tweens = tl.tweens;\n\t\tfor (var i=0, l=tweens.length; i<l; i++) {\n\t\t\tvar tween = tweens[i],  target = tween.target;\n\t\t\tif (target === this || tween.passive) { continue; } // TODO: this assumes the actions tween from Animate has `this` as the target. There's likely a better approach.\n\t\t\tvar offset = tween._stepPosition;\n\n\t\t\tif (target instanceof createjs.DisplayObject) {\n\t\t\t\t// motion tween.\n\t\t\t\tthis._addManagedChild(target, offset);\n\t\t\t} else {\n\t\t\t\t// state tween.\n\t\t\t\tthis._setState(target.state, offset);\n\t\t\t}\n\t\t}\n\n\t\tvar kids = this.children;\n\t\tfor (i=kids.length-1; i>=0; i--) {\n\t\t\tvar id = kids[i].id;\n\t\t\tif (this._managed[id] === 1) {\n\t\t\t\tthis.removeChildAt(i);\n\t\t\t\tdelete(this._managed[id]);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _setState\n\t * @param {Array} state\n\t * @param {Number} offset\n\t * @protected\n\t **/\n\tp._setState = function(state, offset) {\n\t\tif (!state) { return; }\n\t\tfor (var i=state.length-1;i>=0;i--) {\n\t\t\tvar o = state[i];\n\t\t\tvar target = o.t;\n\t\t\tvar props = o.p;\n\t\t\tfor (var n in props) { target[n] = props[n]; }\n\t\t\tthis._addManagedChild(target, offset);\n\t\t}\n\t};\n\n\t/**\n\t * Adds a child to the timeline, and sets it up as a managed child.\n\t * @method _addManagedChild\n\t * @param {MovieClip} child The child MovieClip to manage\n\t * @param {Number} offset\n\t * @private\n\t **/\n\tp._addManagedChild = function(child, offset) {\n\t\tif (child._off) { return; }\n\t\tthis.addChildAt(child,0);\n\n\t\tif (child instanceof MovieClip) {\n\t\t\tchild._synchOffset = offset;\n\t\t\t// TODO: this does not precisely match Adobe Flash/Animate, which loses track of the clip if it is renamed or removed from the timeline, which causes it to reset.\n\t\t\t// TODO: should also reset when MovieClip loops, though that will be a bit tricky to detect.\n\t\t\tif (child.mode === MovieClip.INDEPENDENT && child.autoReset && (!this._managed[child.id])) { child._reset(); }\n\t\t}\n\t\tthis._managed[child.id] = 2;\n\t};\n\t\n\t/**\n\t * @method _getBounds\n\t * @param {Matrix2D} matrix\n\t * @param {Boolean} ignoreTransform\n\t * @return {Rectangle}\n\t * @protected\n\t **/\n\tp._getBounds = function(matrix, ignoreTransform) {\n\t\tvar bounds = this.DisplayObject_getBounds();\n\t\tif (!bounds) {\n\t\t\tif (this.frameBounds) { bounds = this._rectangle.copy(this.frameBounds[this.currentFrame]); }\n\t\t}\n\t\tif (bounds) { return this._transformBounds(bounds, matrix, ignoreTransform); }\n\t\treturn this.Container__getBounds(matrix, ignoreTransform);\n\t};\n\n\n\tcreatejs.MovieClip = createjs.promote(MovieClip, \"Container\");\n\n\n\n// MovieClipPlugin for TweenJS:\n\t/**\n\t * This plugin works with <a href=\"http://tweenjs.com\" target=\"_blank\">TweenJS</a> to prevent the startPosition\n\t * property from tweening.\n\t * @private\n\t * @class MovieClipPlugin\n\t * @constructor\n\t **/\n\tfunction MovieClipPlugin() {\n\t\tthrow(\"MovieClipPlugin cannot be instantiated.\")\n\t}\n\t\n\t/**\n\t * @property priority\n\t * @type {Number}\n\t * @static\n\t * @readonly\n\t **/\n\tMovieClipPlugin.priority = 100; // very high priority, should run first\n\t\n\t/**\n\t * @property ID\n\t * @type {String}\n\t * @static\n\t * @readonly\n\t **/\n\tMovieClipPlugin.ID = \"MovieClip\";\n\n\t/**\n\t * @method install\n\t * @static\n\t **/\n\tMovieClipPlugin.install = function() {\n\t\tcreatejs.Tween._installPlugin(MovieClipPlugin);\n\t};\n\t\n\t/**\n\t * @method init\n\t * @param {Tween} tween\n\t * @param {String} prop\n\t * @param {*} value\n\t * @static\n\t **/\n\tMovieClipPlugin.init = function(tween, prop, value) {\n\t\tif (prop === \"startPosition\" && tween.target instanceof MovieClip) { tween._addPlugin(MovieClipPlugin); }\n\t};\n\t\n\t/**\n\t * @method step\n\t * @param {Tween} tween\n\t * @param {TweenStep} step\n\t * @param {Object} props\n\t * @static\n\t **/\n\tMovieClipPlugin.step = function(tween, step, props) {};\n\n\t/**\n\t * @method change\n\t * @param {Tween} tween\n\t * @param {TweenStep} step\n\t * @param {*} value\n\t * @param {Number} ratio\n\t * @param {Object} end\n\t * @return {*}\n\t * @static\n\t */\n\tMovieClipPlugin.change = function(tween, step, prop, value, ratio, end) {\n\t\tif (prop === \"startPosition\") { return (ratio === 1 ? step.props[prop] : step.prev.props[prop]); }\n\t};\n\n}());\n\n//##############################################################################\n// SpriteSheetUtils.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\r\n\r\n(function() {\r\n\t\"use strict\";\r\n\t\r\n\t\r\n// constructor:\r\n\t/**\r\n\t * The SpriteSheetUtils class is a collection of static methods for working with {{#crossLink \"SpriteSheet\"}}{{/crossLink}}s.\r\n\t * A sprite sheet is a series of images (usually animation frames) combined into a single image on a regular grid. For\r\n\t * example, an animation consisting of 8 100x100 images could be combined into a 400x200 sprite sheet (4 frames across\r\n\t * by 2 high). The SpriteSheetUtils class uses a static interface and should not be instantiated.\r\n\t * @class SpriteSheetUtils\r\n\t * @static\r\n\t **/\r\n\tfunction SpriteSheetUtils() {\r\n\t\tthrow \"SpriteSheetUtils cannot be instantiated\";\r\n\t}\r\n\r\n\r\n// private static properties:\r\n\t/**\r\n\t * @property _workingCanvas\r\n\t * @static\r\n\t * @type HTMLCanvasElement | Object\r\n\t * @protected\r\n\t*/\r\n\t/**\r\n\t * @property _workingContext\r\n\t * @static\r\n\t * @type CanvasRenderingContext2D\r\n\t * @protected\r\n\t*/\r\n\tvar canvas = (createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));\r\n\tif (canvas.getContext) {\r\n\t\tSpriteSheetUtils._workingCanvas = canvas;\r\n\t\tSpriteSheetUtils._workingContext = canvas.getContext(\"2d\");\r\n\t\tcanvas.width = canvas.height = 1;\r\n\t}\r\n\r\n\r\n// public static methods:\r\n\t/**\r\n\t * Returns a single frame of the specified sprite sheet as a new PNG image. An example of when this may be useful is\r\n\t * to use a spritesheet frame as the source for a bitmap fill.\r\n\t *\r\n\t * <strong>WARNING:</strong> In almost all cases it is better to display a single frame using a {{#crossLink \"Sprite\"}}{{/crossLink}}\r\n\t * with a {{#crossLink \"Sprite/gotoAndStop\"}}{{/crossLink}} call than it is to slice out a frame using this\r\n\t * method and display it with a Bitmap instance. You can also crop an image using the {{#crossLink \"Bitmap/sourceRect\"}}{{/crossLink}}\r\n\t * property of {{#crossLink \"Bitmap\"}}{{/crossLink}}.\r\n\t *\r\n\t * The extractFrame method may cause cross-domain warnings since it accesses pixels directly on the canvas.\r\n\t * @method extractFrame\r\n\t * @static\r\n\t * @param {SpriteSheet} spriteSheet The SpriteSheet instance to extract a frame from.\r\n\t * @param {Number|String} frameOrAnimation The frame number or animation name to extract. If an animation\r\n\t * name is specified, only the first frame of the animation will be extracted.\r\n\t * @return {HTMLImageElement} a single frame of the specified sprite sheet as a new PNG image.\r\n\t*/\r\n\tSpriteSheetUtils.extractFrame = function(spriteSheet, frameOrAnimation) {\r\n\t\tif (isNaN(frameOrAnimation)) {\r\n\t\t\tframeOrAnimation = spriteSheet.getAnimation(frameOrAnimation).frames[0];\r\n\t\t}\r\n\t\tvar data = spriteSheet.getFrame(frameOrAnimation);\r\n\t\tif (!data) { return null; }\r\n\t\tvar r = data.rect;\r\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\r\n\t\tcanvas.width = r.width;\r\n\t\tcanvas.height = r.height;\r\n\t\tSpriteSheetUtils._workingContext.drawImage(data.image, r.x, r.y, r.width, r.height, 0, 0, r.width, r.height);\r\n\t\tvar img = document.createElement(\"img\");\r\n\t\timg.src = canvas.toDataURL(\"image/png\");\r\n\t\treturn img;\r\n\t};\r\n\r\n\t// SpriteSheetUtils.addFlippedFrames is @deprecated. Remove for 1.1+\r\n\tSpriteSheetUtils.addFlippedFrames = createjs.deprecate(null, \"SpriteSheetUtils.addFlippedFrames\");\r\n\r\n\t// SpriteSheetUtils.addFlippedFrames is @deprecated. Remove for 1.1+\r\n\tSpriteSheetUtils.mergeAlpha = createjs.deprecate(null, \"SpriteSheetUtils.mergeAlpha\");\r\n\r\n\t\r\n// private static methods:\r\n\tSpriteSheetUtils._flip = function(spriteSheet, count, h, v) {\r\n\t\tvar imgs = spriteSheet._images;\r\n\t\tvar canvas = SpriteSheetUtils._workingCanvas;\r\n\t\tvar ctx = SpriteSheetUtils._workingContext;\r\n\t\tvar il = imgs.length/count;\r\n\t\tfor (var i=0;i<il;i++) {\r\n\t\t\tvar src = imgs[i];\r\n\t\t\tsrc.__tmp = i; // a bit hacky, but faster than doing indexOf below.\r\n\t\t\tctx.setTransform(1,0,0,1,0,0);\r\n\t\t\tctx.clearRect(0,0,canvas.width+1,canvas.height+1);\r\n\t\t\tcanvas.width = src.width;\r\n\t\t\tcanvas.height = src.height;\r\n\t\t\tctx.setTransform(h?-1:1, 0, 0, v?-1:1, h?src.width:0, v?src.height:0);\r\n\t\t\tctx.drawImage(src,0,0);\r\n\t\t\tvar img = document.createElement(\"img\");\r\n\t\t\timg.src = canvas.toDataURL(\"image/png\");\r\n\t\t\t// work around a strange bug in Safari:\r\n\t\t\timg.width = (src.width||src.naturalWidth);\r\n\t\t\timg.height = (src.height||src.naturalHeight);\r\n\t\t\timgs.push(img);\r\n\t\t}\r\n\r\n\t\tvar frames = spriteSheet._frames;\r\n\t\tvar fl = frames.length/count;\r\n\t\tfor (i=0;i<fl;i++) {\r\n\t\t\tsrc = frames[i];\r\n\t\t\tvar rect = src.rect.clone();\r\n\t\t\timg = imgs[src.image.__tmp+il*count];\r\n\r\n\t\t\tvar frame = {image:img,rect:rect,regX:src.regX,regY:src.regY};\r\n\t\t\tif (h) {\r\n\t\t\t\trect.x = (img.width||img.naturalWidth)-rect.x-rect.width; // update rect\r\n\t\t\t\tframe.regX = rect.width-src.regX; // update registration point\r\n\t\t\t}\r\n\t\t\tif (v) {\r\n\t\t\t\trect.y = (img.height||img.naturalHeight)-rect.y-rect.height;  // update rect\r\n\t\t\t\tframe.regY = rect.height-src.regY; // update registration point\r\n\t\t\t}\r\n\t\t\tframes.push(frame);\r\n\t\t}\r\n\r\n\t\tvar sfx = \"_\"+(h?\"h\":\"\")+(v?\"v\":\"\");\r\n\t\tvar names = spriteSheet._animations;\r\n\t\tvar data = spriteSheet._data;\r\n\t\tvar al = names.length/count;\r\n\t\tfor (i=0;i<al;i++) {\r\n\t\t\tvar name = names[i];\r\n\t\t\tsrc = data[name];\r\n\t\t\tvar anim = {name:name+sfx,speed:src.speed,next:src.next,frames:[]};\r\n\t\t\tif (src.next) { anim.next += sfx; }\r\n\t\t\tframes = src.frames;\r\n\t\t\tfor (var j=0,l=frames.length;j<l;j++) {\r\n\t\t\t\tanim.frames.push(frames[j]+fl*count);\r\n\t\t\t}\r\n\t\t\tdata[anim.name] = anim;\r\n\t\t\tnames.push(anim.name);\r\n\t\t}\r\n\t};\r\n\r\n\r\n\tcreatejs.SpriteSheetUtils = SpriteSheetUtils;\r\n}());\n\n//##############################################################################\n// SpriteSheetBuilder.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The SpriteSheetBuilder allows you to generate {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances at run time\n\t * from any display object. This can allow you to maintain your assets as vector graphics (for low file size), and\n\t * render them at run time as SpriteSheets for better performance.\n\t *\n\t * SpriteSheets can be built either synchronously, or asynchronously, so that large SpriteSheets can be generated\n\t * without locking the UI.\n\t *\n\t * Note that the \"images\" used in the generated SpriteSheet are actually canvas elements, and that they will be\n\t * sized to the nearest power of 2 up to the value of {{#crossLink \"SpriteSheetBuilder/maxWidth:property\"}}{{/crossLink}}\n\t * or {{#crossLink \"SpriteSheetBuilder/maxHeight:property\"}}{{/crossLink}}.\n\t * @class SpriteSheetBuilder\n\t * @param {Number} [framerate=0] The {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} of\n\t * {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are created.\n\t * @extends EventDispatcher\n\t * @constructor\n\t **/\n\tfunction SpriteSheetBuilder(framerate) {\n\t\tthis.EventDispatcher_constructor();\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The maximum width for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxWidth\n\t\t * @type Number\n\t\t * @default 2048\n\t\t*/\n\t\tthis.maxWidth = 2048;\n\t\n\t\t/**\n\t\t * The maximum height for the images (not individual frames) in the generated SpriteSheet. It is recommended to\n\t\t * use a power of 2 for this value (ex. 1024, 2048, 4096). If the frames cannot all fit within the max\n\t\t * dimensions, then additional images will be created as needed.\n\t\t * @property maxHeight\n\t\t * @type Number\n\t\t * @default 2048\n\t\t **/\n\t\tthis.maxHeight = 2048;\n\t\n\t\t/**\n\t\t * The SpriteSheet that was generated. This will be null before a build is completed successfully.\n\t\t * @property spriteSheet\n\t\t * @type SpriteSheet\n\t\t **/\n\t\tthis.spriteSheet = null;\n\t\n\t\t/**\n\t\t * The scale to apply when drawing all frames to the SpriteSheet. This is multiplied against any scale specified\n\t\t * in the addFrame call. This can be used, for example, to generate a SpriteSheet at run time that is tailored\n\t\t * to the a specific device resolution (ex. tablet vs mobile).\n\t\t * @property scale\n\t\t * @type Number\n\t\t * @default 1\n\t\t **/\n\t\tthis.scale = 1;\n\t\n\t\t/**\n\t\t* The padding to use between frames. This is helpful to preserve antialiasing on drawn vector content.\n\t\t* @property padding\n\t\t* @type Number\n\t\t* @default 1\n\t\t**/\n\t\tthis.padding = 1;\n\t\n\t\t/**\n\t\t * A number from 0.01 to 0.99 that indicates what percentage of time the builder can use. This can be\n\t\t * thought of as the number of seconds per second the builder will use. For example, with a timeSlice value of 0.3,\n\t\t * the builder will run 20 times per second, using approximately 15ms per build (30% of available time, or 0.3s per second).\n\t\t * Defaults to 0.3.\n\t\t * @property timeSlice\n\t\t * @type Number\n\t\t * @default 0.3\n\t\t **/\n\t\tthis.timeSlice = 0.3;\n\t\n\t\t/**\n\t\t * A value between 0 and 1 that indicates the progress of a build, or -1 if a build has not\n\t\t * been initiated.\n\t\t * @property progress\n\t\t * @type Number\n\t\t * @default -1\n\t\t * @readonly\n\t\t */\n\t\tthis.progress = -1;\n\n\t\t/**\n\t\t * A {{#crossLink \"SpriteSheet/framerate:property\"}}{{/crossLink}} value that will be passed to new {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instances that are\n\t\t * created. If no framerate is specified (or it is 0), then SpriteSheets will use the {{#crossLink \"Ticker\"}}{{/crossLink}}\n\t\t * framerate.\n\t\t * @property framerate\n\t\t * @type Number\n\t\t * @default 0\n\t\t */\n\t\tthis.framerate = framerate || 0;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _frames\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._frames = [];\n\t\n\t\t/**\n\t\t * @property _animations\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._animations = {};\n\t\n\t\t/**\n\t\t * @property _data\n\t\t * @protected\n\t\t * @type Array\n\t\t **/\n\t\tthis._data = null;\n\t\n\t\t/**\n\t\t * @property _nextFrameIndex\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._nextFrameIndex = 0;\n\t\n\t\t/**\n\t\t * @property _index\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._index = 0;\n\t\n\t\t/**\n\t\t * @property _timerID\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._timerID = null;\n\t\n\t\t/**\n\t\t * @property _scale\n\t\t * @protected\n\t\t * @type Number\n\t\t **/\n\t\tthis._scale = 1;\n\t}\n\tvar p = createjs.extend(SpriteSheetBuilder, createjs.EventDispatcher);\n\n// constants:\n\tSpriteSheetBuilder.ERR_DIMENSIONS = \"frame dimensions exceed max spritesheet dimensions\";\n\tSpriteSheetBuilder.ERR_RUNNING = \"a build is already running\";\n\n// events:\n\t/**\n\t * Dispatched when a build completes.\n\t * @event complete\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @since 0.6.0\n\t */\n\n\t/**\n\t * Dispatched when an asynchronous build has progress.\n\t * @event progress\n\t * @param {Object} target The object that dispatched the event.\n\t * @param {String} type The event type.\n\t * @param {Number} progress The current progress value (0-1).\n\t * @since 0.6.0\n\t */\n\n\n// public methods:\n\t/**\n\t * Adds a frame to the {{#crossLink \"SpriteSheet\"}}{{/crossLink}}. Note that the frame will not be drawn until you\n\t * call {{#crossLink \"SpriteSheetBuilder/build\"}}{{/crossLink}} method. The optional setup params allow you to have\n\t * a function run immediately before the draw occurs. For example, this allows you to add a single source multiple\n\t * times, but manipulate it or its children to change it to generate different frames.\n\t *\n\t * Note that the source's transformations (x, y, scale, rotate, alpha) will be ignored, except for regX/Y. To apply\n\t * transforms to a source object and have them captured in the SpriteSheet, simply place it into a {{#crossLink \"Container\"}}{{/crossLink}}\n\t * and pass in the Container as the source.\n\t * @method addFrame\n\t * @param {DisplayObject} source The source {{#crossLink \"DisplayObject\"}}{{/crossLink}}  to draw as the frame.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the\n\t * source to draw to the frame. If not specified, it will look for a `getBounds` method, bounds property, or\n\t * `nominalBounds` property on the source to use. If one is not found, the frame will be skipped.\n\t * @param {Number} [scale=1] Optional. The scale to draw this frame at. Default is 1.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing this frame. It will be called with two parameters: the source, and setupData.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @return {Number} The index of the frame that was just added, or null if a sourceRect could not be determined.\n\t **/\n\tp.addFrame = function(source, sourceRect, scale, setupFunction, setupData) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect) { return null; }\n\t\tscale = scale||1;\n\t\treturn this._frames.push({source:source, sourceRect:rect, scale:scale, funct:setupFunction, data:setupData, index:this._frames.length, height:rect.height*scale})-1;\n\t};\n\n\t/**\n\t * Adds an animation that will be included in the created {{#crossLink \"SpriteSheet\"}}{{/crossLink}}.\n\t * @method addAnimation\n\t * @param {String} name The name for the animation.\n\t * @param {Array} frames An array of frame indexes that comprise the animation. Ex. [3,6,5] would describe an animation\n\t * that played frame indexes 3, 6, and 5 in that order.\n\t * @param {String} [next] Specifies the name of the animation to continue to after this animation ends. You can\n\t * also pass false to have the animation stop when it ends. By default it will loop to the start of the same animation.\n\t * @param {Number} [speed] Specifies a frame advance speed for this animation. For example, a value of 0.5 would\n\t * cause the animation to advance every second tick. Note that earlier versions used `frequency` instead, which had\n\t * the opposite effect.\n\t **/\n\tp.addAnimation = function(name, frames, next, speed) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._animations[name] = {frames:frames, next:next, speed:speed};\n\t};\n\n\t/**\n\t * This will take a {{#crossLink \"MovieClip\"}}{{/crossLink}} instance, and add its frames and labels to this\n\t * builder. Labels will be added as an animation running from the label index to the next label. For example, if\n\t * there is a label named \"foo\" at frame 0 and a label named \"bar\" at frame 10, in a MovieClip with 15 frames, it\n\t * will add an animation named \"foo\" that runs from frame index 0 to 9, and an animation named \"bar\" that runs from\n\t * frame index 10 to 14.\n\t *\n\t * Note that this will iterate through the full MovieClip with {{#crossLink \"MovieClip/actionsEnabled:property\"}}{{/crossLink}}\n\t * set to `false`, ending on the last frame.\n\t * @method addMovieClip\n\t * @param {MovieClip} source The source MovieClip instance to add to the SpriteSheet.\n\t * @param {Rectangle} [sourceRect] A {{#crossLink \"Rectangle\"}}{{/crossLink}} defining the portion of the source to\n\t * draw to the frame. If not specified, it will look for a {{#crossLink \"DisplayObject/getBounds\"}}{{/crossLink}}\n\t * method, `frameBounds` Array, `bounds` property, or `nominalBounds` property on the source to use. If one is not\n\t * found, the MovieClip will be skipped.\n\t * @param {Number} [scale=1] The scale to draw the movie clip at.\n\t * @param {Function} [setupFunction] A function to call immediately before drawing each frame. It will be called\n\t * with three parameters: the source, setupData, and the frame index.\n\t * @param {Object} [setupData] Arbitrary setup data to pass to setupFunction as the second parameter.\n\t * @param {Function} [labelFunction] This method will be called for each MovieClip label that is added with four\n\t * parameters: the label name, the source MovieClip instance, the starting frame index (in the movieclip timeline)\n\t * and the end index. It must return a new name for the label/animation, or `false` to exclude the label.\n\t **/\n\tp.addMovieClip = function(source, sourceRect, scale, setupFunction, setupData, labelFunction) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tvar rects = source.frameBounds;\n\t\tvar rect = sourceRect||source.bounds||source.nominalBounds;\n\t\tif (!rect&&source.getBounds) { rect = source.getBounds(); }\n\t\tif (!rect && !rects) { return; }\n\n\t\tvar i, l, baseFrameIndex = this._frames.length;\n\t\tvar duration = source.timeline.duration;\n\t\tfor (i=0; i<duration; i++) {\n\t\t\tvar r = (rects&&rects[i]) ? rects[i] : rect;\n\t\t\tthis.addFrame(source, r, scale, this._setupMovieClipFrame, {i:i, f:setupFunction, d:setupData});\n\t\t}\n\t\tvar labels = source.timeline._labels;\n\t\tvar lbls = [];\n\t\tfor (var n in labels) {\n\t\t\tlbls.push({index:labels[n], label:n});\n\t\t}\n\t\tif (lbls.length) {\n\t\t\tlbls.sort(function(a,b){ return a.index-b.index; });\n\t\t\tfor (i=0,l=lbls.length; i<l; i++) {\n\t\t\t\tvar label = lbls[i].label;\n\t\t\t\tvar start = baseFrameIndex+lbls[i].index;\n\t\t\t\tvar end = baseFrameIndex+((i == l-1) ? duration : lbls[i+1].index);\n\t\t\t\tvar frames = [];\n\t\t\t\tfor (var j=start; j<end; j++) { frames.push(j); }\n\t\t\t\tif (labelFunction) {\n\t\t\t\t\tlabel = labelFunction(label, source, start, end);\n\t\t\t\t\tif (!label) { continue; }\n\t\t\t\t}\n\t\t\t\tthis.addAnimation(label, frames, true); // for now, this loops all animations.\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames.\n\t * @method build\n\t * @return {SpriteSheet} The created SpriteSheet instance, or null if a build is already running or an error\n\t * occurred.\n\t **/\n\tp.build = function() {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis._startBuild();\n\t\twhile (this._drawNext()) {}\n\t\tthis._endBuild();\n\t\treturn this.spriteSheet;\n\t};\n\n\t/**\n\t * Asynchronously builds a {{#crossLink \"SpriteSheet\"}}{{/crossLink}} instance based on the current frames. It will\n\t * run 20 times per second, using an amount of time defined by `timeSlice`. When it is complete it will call the\n\t * specified callback.\n\t * @method buildAsync\n\t * @param {Number} [timeSlice] Sets the timeSlice property on this instance.\n\t **/\n\tp.buildAsync = function(timeSlice) {\n\t\tif (this._data) { throw SpriteSheetBuilder.ERR_RUNNING; }\n\t\tthis.timeSlice = timeSlice;\n\t\tthis._startBuild();\n\t\tvar _this = this;\n\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50);\n\t};\n\n\t/**\n\t * Stops the current asynchronous build.\n\t * @method stopAsync\n\t **/\n\tp.stopAsync = function() {\n\t\tclearTimeout(this._timerID);\n\t\tthis._data = null;\n\t};\n\n\t/**\n\t * SpriteSheetBuilder instances cannot be cloned.\n\t * @method clone\n\t **/\n\tp.clone = function() {\n\t\tthrow(\"SpriteSheetBuilder cannot be cloned.\");\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[SpriteSheetBuilder]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _startBuild\n\t * @protected\n\t **/\n\tp._startBuild = function() {\n\t\tvar pad = this.padding||0;\n\t\tthis.progress = 0;\n\t\tthis.spriteSheet = null;\n\t\tthis._index = 0;\n\t\tthis._scale = this.scale;\n\t\tvar dataFrames = [];\n\t\tthis._data = {\n\t\t\timages: [],\n\t\t\tframes: dataFrames,\n\t\t\tframerate: this.framerate,\n\t\t\tanimations: this._animations // TODO: should we \"clone\" _animations in case someone adds more animations after a build?\n\t\t};\n\n\t\tvar frames = this._frames.slice();\n\t\tframes.sort(function(a,b) { return (a.height<=b.height) ? -1 : 1; });\n\n\t\tif (frames[frames.length-1].height+pad*2 > this.maxHeight) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\tvar y=0, x=0;\n\t\tvar img = 0;\n\t\twhile (frames.length) {\n\t\t\tvar o = this._fillRow(frames, y, img, dataFrames, pad);\n\t\t\tif (o.w > x) { x = o.w; }\n\t\t\ty += o.h;\n\t\t\tif (!o.h || !frames.length) {\n\t\t\t\tvar canvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\t\tcanvas.width = this._getSize(x,this.maxWidth);\n\t\t\t\tcanvas.height = this._getSize(y,this.maxHeight);\n\t\t\t\tthis._data.images[img] = canvas;\n\t\t\t\tif (!o.h) {\n\t\t\t\t\tx=y=0;\n\t\t\t\t\timg++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\t/**\n\t * @method _setupMovieClipFrame\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._setupMovieClipFrame = function(source, data) {\n\t\tvar ae = source.actionsEnabled;\n\t\tsource.actionsEnabled = false;\n\t\tsource.gotoAndStop(data.i);\n\t\tsource.actionsEnabled = ae;\n\t\tdata.f&&data.f(source, data.d, data.i);\n\t};\n\n\t/**\n\t * @method _getSize\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._getSize = function(size,max) {\n\t\tvar pow = 4;\n\t\twhile (Math.pow(2,++pow) < size){}\n\t\treturn Math.min(max,Math.pow(2,pow));\n\t};\n\n\t/**\n\t * @method _fillRow\n\t * @param {Array} frames\n\t * @param {Number} y\n\t * @param {HTMLImageElement} img\n\t * @param {Object} dataFrames\n\t * @param {Number} pad\n\t * @protected\n\t * @return {Number} The width & height of the row.\n\t **/\n\tp._fillRow = function(frames, y, img, dataFrames, pad) {\n\t\tvar w = this.maxWidth;\n\t\tvar maxH = this.maxHeight;\n\t\ty += pad;\n\t\tvar h = maxH-y;\n\t\tvar x = pad;\n\t\tvar height = 0;\n\t\tfor (var i=frames.length-1; i>=0; i--) {\n\t\t\tvar frame = frames[i];\n\t\t\tvar sc = this._scale*frame.scale;\n\t\t\tvar rect = frame.sourceRect;\n\t\t\tvar source = frame.source;\n\t\t\tvar rx = Math.floor(sc*rect.x-pad);\n\t\t\tvar ry = Math.floor(sc*rect.y-pad);\n\t\t\tvar rh = Math.ceil(sc*rect.height+pad*2);\n\t\t\tvar rw = Math.ceil(sc*rect.width+pad*2);\n\t\t\tif (rw > w) { throw SpriteSheetBuilder.ERR_DIMENSIONS; }\n\t\t\tif (rh > h || x+rw > w) { continue; }\n\t\t\tframe.img = img;\n\t\t\tframe.rect = new createjs.Rectangle(x,y,rw,rh);\n\t\t\theight = height || rh;\n\t\t\tframes.splice(i,1);\n\t\t\tdataFrames[frame.index] = [x,y,rw,rh,img,Math.round(-rx+sc*source.regX-pad),Math.round(-ry+sc*source.regY-pad)];\n\t\t\tx += rw;\n\t\t}\n\t\treturn {w:x, h:height};\n\t};\n\n\t/**\n\t * @method _endBuild\n\t * @protected\n\t **/\n\tp._endBuild = function() {\n\t\tthis.spriteSheet = new createjs.SpriteSheet(this._data);\n\t\tthis._data = null;\n\t\tthis.progress = 1;\n\t\tthis.dispatchEvent(\"complete\");\n\t};\n\n\t/**\n\t * @method _run\n\t * @protected\n\t **/\n\tp._run = function() {\n\t\tvar ts = Math.max(0.01, Math.min(0.99, this.timeSlice||0.3))*50;\n\t\tvar t = (new Date()).getTime()+ts;\n\t\tvar complete = false;\n\t\twhile (t > (new Date()).getTime()) {\n\t\t\tif (!this._drawNext()) { complete = true; break; }\n\t\t}\n\t\tif (complete) {\n\t\t\tthis._endBuild();\n\t\t} else {\n\t\t\tvar _this = this;\n\t\t\tthis._timerID = setTimeout(function() { _this._run(); }, 50-ts);\n\t\t}\n\t\tvar p = this.progress = this._index/this._frames.length;\n\t\tif (this.hasEventListener(\"progress\")) {\n\t\t\tvar evt = new createjs.Event(\"progress\");\n\t\t\tevt.progress = p;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\t};\n\n\t/**\n\t * @method _drawNext\n\t * @protected\n\t * @return Boolean Returns false if this is the last draw.\n\t **/\n\tp._drawNext = function() {\n\t\tvar frame = this._frames[this._index];\n\t\tvar sc = frame.scale*this._scale;\n\t\tvar rect = frame.rect;\n\t\tvar sourceRect = frame.sourceRect;\n\t\tvar canvas = this._data.images[frame.img];\n\t\tvar ctx = canvas.getContext(\"2d\");\n\t\tframe.funct&&frame.funct(frame.source, frame.data);\n\t\tctx.save();\n\t\tctx.beginPath();\n\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\tctx.clip();\n\t\tctx.translate(Math.ceil(rect.x-sourceRect.x*sc), Math.ceil(rect.y-sourceRect.y*sc));\n\t\tctx.scale(sc,sc);\n\t\tframe.source.draw(ctx); // display object will draw itself.\n\t\tctx.restore();\n\t\treturn (++this._index) < this._frames.length;\n\t};\n\n\n\tcreatejs.SpriteSheetBuilder = createjs.promote(SpriteSheetBuilder, \"EventDispatcher\");\n}());\n\n//##############################################################################\n// DOMElement.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * <b>This class is still experimental, and more advanced use is likely to be buggy. Please report bugs.</b>\n\t *\n\t * A DOMElement allows you to associate a HTMLElement with the display list. It will be transformed\n\t * within the DOM as though it is child of the {{#crossLink \"Container\"}}{{/crossLink}} it is added to. However, it is\n\t * not rendered to canvas, and as such will retain whatever z-index it has relative to the canvas (ie. it will be\n\t * drawn in front of or behind the canvas).\n\t *\n\t * The position of a DOMElement is relative to their parent node in the DOM. It is recommended that\n\t * the DOM Object be added to a div that also contains the canvas so that they share the same position\n\t * on the page.\n\t *\n\t * DOMElement is useful for positioning HTML elements over top of canvas content, and for elements\n\t * that you want to display outside the bounds of the canvas. For example, a tooltip with rich HTML\n\t * content.\n\t *\n\t * <h4>Mouse Interaction</h4>\n\t *\n\t * DOMElement instances are not full EaselJS display objects, and do not participate in EaselJS mouse\n\t * events or support methods like hitTest. To get mouse events from a DOMElement, you must instead add handlers to\n\t * the htmlElement (note, this does not support EventDispatcher)\n\t *\n\t *      var domElement = new createjs.DOMElement(htmlElement);\n\t *      domElement.htmlElement.onclick = function() {\n\t *          console.log(\"clicked\");\n\t *      }\n\t *\n\t * <strong>Important:</strong> This class needs to be notified it is about to be drawn, this will happen automatically\n\t * if you call stage.update, calling stage.draw or disabling tickEnabled will miss important steps and it will render\n\t * stale information.\n\t *\n\t * @class DOMElement\n\t * @extends DisplayObject\n\t * @constructor\n\t * @param {HTMLElement} htmlElement A reference or id for the DOM element to manage.\n\t */\n\tfunction DOMElement(htmlElement) {\n\t\tthis.DisplayObject_constructor();\n\t\t\n\t\tif (typeof(htmlElement)==\"string\") { htmlElement = document.getElementById(htmlElement); }\n\t\tthis.mouseEnabled = false;\n\t\t\n\t\tvar style = htmlElement.style;\n\t\tstyle.position = \"absolute\";\n\t\tstyle.transformOrigin = style.WebkitTransformOrigin = style.msTransformOrigin = style.MozTransformOrigin = style.OTransformOrigin = \"0% 0%\";\n\t\t\n\t\t\n\t// public properties:\n\t\t/**\n\t\t * The DOM object to manage.\n\t\t * @property htmlElement\n\t\t * @type HTMLElement\n\t\t */\n\t\tthis.htmlElement = htmlElement;\n\t\n\t\n\t// private properties:\n\t\t/**\n\t\t * @property _oldMtx\n\t\t * @type Matrix2D\n\t\t * @protected\n\t\t */\n\t\tthis._oldProps = null;\n\n\t\t/**\n\t\t * Used to track the object which this class attached listeners to, helps optimize listener attachment.\n\t\t * @property _oldStage\n\t\t * @type Stage\n\t\t * @protected\n\t\t */\n\t\tthis._oldStage = null;\n\t\t/**\n\t\t * The event listener proxy triggered drawing draw for special circumstances.\n\t\t * @property _drawAction\n\t\t * @type function\n\t\t * @protected\n\t\t */\n\t\tthis._drawAction = null;\n\t}\n\tvar p = createjs.extend(DOMElement, createjs.DisplayObject);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/**\n\t * Returns true or false indicating whether the display object would be visible if drawn to a canvas.\n\t * This does not account for whether it would be visible within the boundaries of the stage.\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method isVisible\n\t * @return {Boolean} Boolean indicating whether the display object would be visible if drawn to a canvas\n\t */\n\tp.isVisible = function() {\n\t\treturn this.htmlElement != null;\n\t};\n\n\t/**\n\t * Draws the display object into the specified context ignoring its visible, alpha, shadow, and transform.\n\t * Returns true if the draw was handled (useful for overriding functionality).\n\t * NOTE: This method is mainly for internal use, though it may be useful for advanced uses.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The canvas 2D context object to draw into.\n\t * @param {Boolean} ignoreCache Indicates whether the draw operation should ignore any current cache.\n\t * For example, used for drawing the cache (to prevent it from simply drawing an existing cache back\n\t * into itself).\n\t * @return {Boolean}\n\t */\n\tp.draw = function(ctx, ignoreCache) {\n\t\t// this relies on the _tick method because draw isn't called if the parent is not visible.\n\t\t// the actual update happens in _handleDrawEnd\n\t\treturn true;\n\t};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method cache\n\t */\n\tp.cache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method uncache\n\t */\n\tp.uncache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method updateCache\n\t */\n\tp.updateCache = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method hitTest\n\t */\n\tp.hitTest = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToGlobal\n\t */\n\tp.localToGlobal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method globalToLocal\n\t */\n\tp.globalToLocal = function() {};\n\n\t/**\n\t * Not applicable to DOMElement.\n\t * @method localToLocal\n\t */\n\tp.localToLocal = function() {};\n\n\t/**\n\t * DOMElement cannot be cloned. Throws an error.\n\t * @method clone\n\t */\n\tp.clone = function() {\n\t\tthrow(\"DOMElement cannot be cloned.\")\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t */\n\tp.toString = function() {\n\t\treturn \"[DOMElement (name=\"+  this.name +\")]\";\n\t};\n\n\t/**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n\t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event click\n\t */\n\n     /**\n     * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t * @event dblClick\n\t */\n\n     /**\n      * Interaction events should be added to `htmlElement`, and not the DOMElement instance, since DOMElement instances\n \t  * are not full EaselJS display objects and do not participate in EaselJS mouse events.\n\t  * @event mousedown\n\t  */\n\n     /**\n      * The HTMLElement can listen for the mouseover event, not the DOMElement instance.\n      * Since DOMElement instances are not full EaselJS display objects and do not participate in EaselJS mouse events.\n      * @event mouseover\n\t  */\n\n     /**\n      * Not applicable to DOMElement.\n\t  * @event tick\n\t  */\n\n\n// private methods:\n\t/**\n\t * @method _tick\n\t * @param {Object} evtObj An event object that will be dispatched to all tick listeners. This object is reused between dispatchers to reduce construction & GC costs.\n\t * function.\n\t * @protected\n\t */\n\tp._tick = function(evtObj) {\n\t\tvar stage = this.stage;\n\t\tif(stage && stage !== this._oldStage) {\n\t\t\tthis._drawAction && stage.off(\"drawend\", this._drawAction);\n\t\t\tthis._drawAction = stage.on(\"drawend\", this._handleDrawEnd, this);\n\t\t\tthis._oldStage = stage;\n\t\t}\n\t\tthis.DisplayObject__tick(evtObj);\n\t};\n\t\n\t/**\n\t * @method _handleDrawEnd\n\t * @param {Event} evt\n\t * @protected\n\t */\n\tp._handleDrawEnd = function(evt) {\n\t\tvar o = this.htmlElement;\n\t\tif (!o) { return; }\n\t\tvar style = o.style;\n\t\t\n\t\tvar props = this.getConcatenatedDisplayProps(this._props), mtx = props.matrix;\n\t\t\n\t\tvar visibility = props.visible ? \"visible\" : \"hidden\";\n\t\tif (visibility != style.visibility) { style.visibility = visibility; }\n\t\tif (!props.visible) { return; }\n\t\t\n\t\tvar oldProps = this._oldProps, oldMtx = oldProps&&oldProps.matrix;\n\t\tvar n = 10000; // precision\n\t\t\n\t\tif (!oldMtx || !oldMtx.equals(mtx)) {\n\t\t\tvar str = \"matrix(\" + (mtx.a*n|0)/n +\",\"+ (mtx.b*n|0)/n +\",\"+ (mtx.c*n|0)/n +\",\"+ (mtx.d*n|0)/n +\",\"+ (mtx.tx+0.5|0);\n\t\t\tstyle.transform = style.WebkitTransform = style.OTransform = style.msTransform = str +\",\"+ (mtx.ty+0.5|0) +\")\";\n\t\t\tstyle.MozTransform = str +\"px,\"+ (mtx.ty+0.5|0) +\"px)\";\n\t\t\tif (!oldProps) { oldProps = this._oldProps = new createjs.DisplayProps(true, null); }\n\t\t\toldProps.matrix.copy(mtx);\n\t\t}\n\t\t\n\t\tif (oldProps.alpha != props.alpha) {\n\t\t\tstyle.opacity = \"\"+(props.alpha*n|0)/n;\n\t\t\toldProps.alpha = props.alpha;\n\t\t}\n\t};\n\n\n\tcreatejs.DOMElement = createjs.promote(DOMElement, \"DisplayObject\");\n}());\n\n//##############################################################################\n// Filter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Base class that all filters should inherit from. Filters need to be applied to objects that have been cached using\n\t * the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} method. If an object changes, please cache it again, or use\n\t * {{#crossLink \"DisplayObject/updateCache\"}}{{/crossLink}}. Note that the filters must be applied before caching.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myInstance.filters = [\n\t *          new createjs.ColorFilter(0, 0, 0, 1, 255, 0, 0),\n\t *          new createjs.BlurFilter(5, 5, 10)\n\t *      ];\n\t *      myInstance.cache(0,0, 100, 100);\n\t *\n\t * Note that each filter can implement a {{#crossLink \"Filter/getBounds\"}}{{/crossLink}} method, which returns the\n\t * margins that need to be applied in order to fully display the filter. For example, the {{#crossLink \"BlurFilter\"}}{{/crossLink}}\n\t * will cause an object to feather outwards, resulting in a margin around the shape.\n\t *\n\t * <h4>EaselJS Filters</h4>\n\t * EaselJS comes with a number of pre-built filters:\n\t * <ul><li>{{#crossLink \"AlphaMapFilter\"}}{{/crossLink}} : Map a greyscale image to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}: Map an image's alpha channel to the alpha channel of a display object</li>\n\t *      <li>{{#crossLink \"BlurFilter\"}}{{/crossLink}}: Apply vertical and horizontal blur to a display object</li>\n\t *      <li>{{#crossLink \"ColorFilter\"}}{{/crossLink}}: Color transform a display object</li>\n\t *      <li>{{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}: Transform an image using a {{#crossLink \"ColorMatrix\"}}{{/crossLink}}</li>\n\t * </ul>\n\t *\n\t * @class Filter\n\t * @constructor\n\t **/\n\tfunction Filter() {\n\t\t/**\n\t\t * A flag stating that this filter uses a context draw mode and cannot be batched into imageData processing.\n\t\t * @property usesContext\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.usesContext = false;\n\n\t\t/**\n\t\t * Another filter that is required to act as part of this filter and created and managed under the hood.\n\t\t * @private\n\t\t * @property _multiPass\n\t\t * @type {Filter}\n\t\t * @default null\n\t\t */\n\t\tthis._multiPass = null;\n\n\t\t/**\n\t\t * Pre-processed template shader code. It will be parsed before being fed in into the shader compiler.\n\t\t * This should be based upon StageGL.SHADER_VERTEX_BODY_REGULAR\n\t\t * @property VTX_SHADER\n\t\t * @virtual\n\t\t * @type {String}\n\t\t * @readonly\n\t\t */\n\t\tthis.VTX_SHADER_BODY = null;\n\n\t\t/**\n\t\t * Pre-processed template shader code. It will be parsed before being fed in into the shader compiler.\n\t\t * This should be based upon StageGL.SHADER_FRAGMENT_BODY_REGULAR\n\t\t * @property FRAG_SHADER\n\t\t * @virtual\n\t\t * @type {String}\n\t\t * @readonly\n\t\t */\n\t\tthis.FRAG_SHADER_BODY = null;\n\t}\n\tvar p = Filter.prototype;\n\n// public methods:\n\t/**\n\t * Provides padding values for this filter. That is, how much the filter will extend the visual bounds of an object it is applied to.\n\t * @method getBounds\n\t * @param {Rectangle} [rect] If specified, the provided Rectangle instance will be expanded by the padding amounts and returned.\n\t * @return {Rectangle} If a `rect` param was provided, it is returned. If not, either a new rectangle with the padding values, or null if no padding is required for this filter.\n\t **/\n\tp.getBounds = function(rect) {\n\t\treturn rect;\n\t};\n\n\t/**\n\t * Assign any unique uniforms or other setup functionality here.\n\t * @method shaderParamSetup\n\t * @virtual\n\t * @param {WebGLContext} gl The context associated with the stage performing the render.\n\t * @param {StageGL} stage The stage instance that will be rendering.\n\t * @param {ShaderProgram} shaderProgram The compiled shader that is going to be used to perform the render.\n\t */\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {};\n\n\t/**\n\t * Applies the filter to the specified context.\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function(ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\t// this is the default behaviour because most filters access pixel data. It is overridden when not needed.\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\t\ttry {\n\t\t\tvar imageData = ctx.getImageData(x, y, width, height);\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._applyFilter(imageData)) {\n\t\t\ttargetCtx.putImageData(imageData, targetX, targetY);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[Filter]\";\n\t};\n\n\t/**\n\t * Returns a clone of this Filter instance.\n\t * @method clone\n\t * @return {Filter} A clone of the current Filter instance.\n\t **/\n\tp.clone = function() {\n\t\treturn new Filter();\n\t};\n\t\n// private methods:\n\t/**\n\t * @method _applyFilter\n\t * @param {ImageData} imageData Target ImageData instance.\n\t * @return {Boolean}\n\t **/\n\tp._applyFilter = function(imageData) { return true; };\n\n\n\tcreatejs.Filter = Filter;\n}());\n\n//##############################################################################\n// BitmapCache.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * The BitmapCache is an internal representation of all the cache properties and logic required in order to \"cache\"\n\t * an object. This information and functionality used to be located on a {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}}\n\t * method in {{#crossLink \"DisplayObject\"}}{{/crossLink}}, but was moved to its own class.\n\t *\n\t * Caching in this context is purely visual, and will render the DisplayObject out into an image to be used instead\n\t * of the object. The actual cache itself is still stored on the target with the {{#crossLink \"DisplayObject/cacheCanvas:property\"}}{{/crossLink}}.\n\t * Working with a singular image like a {{#crossLink \"Bitmap\"}}{{/crossLink}} there is little benefit to performing \n\t * a cache as it is already a single image. Caching is best done on containers containing multiple complex parts that \n\t * do not move often, so that rendering the image instead will improve overall rendering speed. A cached object will \n\t * not visually update until explicitly told to do so with a call to update, much like a Stage. If a cache is being \n\t * updated every frame it is likely not improving rendering performance. Cache are best used when updates will be sparse.\n\t *\n\t * Caching is also a co-requisite for applying filters to prevent expensive filters running constantly without need, \n\t * and to physically enable some effects. The BitmapCache is also responsible for applying filters to objects and \n\t * reads each {{#crossLink \"Filter\"}}{{/crossLink}} due to this relationship. Real-time Filters are not recommended \n\t * performance wise when dealing with a Context2D canvas. For best performance and to still allow for some visual \n\t * effects use a compositeOperation when possible.\n\t * @class BitmapCache\n\t * @constructor\n\t **/\n\tfunction BitmapCache() {\n\n\t\t// public:\n\t\t/**\n\t\t * Width of the cache relative to the target object.\n\t\t * @property width\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t **/\n\t\tthis.width = undefined;\n\n\t\t/**\n\t\t * Height of the cache relative to the target object.\n\t\t * @property height\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t * @todo Should the width and height be protected?\n\t\t **/\n\t\tthis.height = undefined;\n\n\t\t/**\n\t\t * Horizontal position of the cache relative to the target's origin.\n\t\t * @property x\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t **/\n\t\tthis.x = undefined;\n\n\t\t/**\n\t\t * Vertical position of the cache relative to target's origin.\n\t\t * @property y\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default undefined\n\t\t **/\n\t\tthis.y = undefined;\n\n\t\t/**\n\t\t * The internal scale of the cache image, does not affects display size. This is useful to both increase and\n\t\t * decrease render quality. Objects with increased scales are more likely to look good when scaled up or rotated.\n\t\t * Objects with decreased scales can save on rendering performance.\n\t\t * @property scale\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 1\n\t\t **/\n\t\tthis.scale = 1;\n\n\t\t/**\n\t\t * The x offset used for drawing into the cache itself, accounts for both transforms applied.\n\t\t * @property offX\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.offX = 0;\n\n\t\t/**\n\t\t * The y offset used for drawing into the cache itself, accounts for both transforms applied.\n\t\t * @property offY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.offY = 0;\n\n\t\t/**\n\t\t * Track how many times the cache has been updated, mostly used for preventing duplicate cacheURLs.\n\t\t * This can be useful to see if a cache has been updated.\n\t\t * @property cacheID\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis.cacheID = 0;\n\n\t\t// protected:\n\t\t/**\n\t\t * The relative offset of the filter's x position, used for drawing the cache onto its container.\n\t\t * Re-calculated every update call before drawing.\n\t\t * @property _filterOffY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffX = 0;\n\n\t\t/**\n\t\t * The relative offset of the filter's y position, used for drawing the cache onto its container.\n\t\t * Re-calculated every update call before drawing.\n\t\t * @property _filterOffY\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._filterOffY = 0;\n\n\t\t/**\n\t\t * The cacheID when a DataURL was requested.\n\t\t * @property _cacheDataURLID\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._cacheDataURLID = 0;\n\n\t\t/**\n\t\t * The cache's DataURL, generated on-demand using the getter.\n\t\t * @property _cacheDataURL\n\t\t * @protected\n\t\t * @type {String}\n\t\t * @default null\n\t\t **/\n\t\tthis._cacheDataURL = null;\n\n\t\t/**\n\t\t * Internal tracking of final bounding width, approximately width*scale; however, filters can complicate the actual value.\n\t\t * @property _drawWidth\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._drawWidth = 0;\n\n\t\t/**\n\t\t * Internal tracking of final bounding height, approximately height*scale; however, filters can complicate the actual value.\n\t\t * @property _drawHeight\n\t\t * @protected\n\t\t * @type {Number}\n\t\t * @default 0\n\t\t **/\n\t\tthis._drawHeight = 0;\n\t}\n\tvar p = BitmapCache.prototype;\n\n\t/**\n\t * Returns the bounds that surround all applied filters, relies on each filter to describe how it changes bounds.\n\t * @method getFilterBounds\n\t * @param {DisplayObject} target The object to check the filter bounds for.\n\t * @param {Rectangle} [output=null] Optional parameter, if provided then calculated bounds will be applied to that object.\n\t * @return {Rectangle} bounds object representing the bounds with filters.\n\t * @static\n\t **/\n\tBitmapCache.getFilterBounds = function(target, output) {\n\t\tif(!output){ output = new createjs.Rectangle(); }\n\t\tvar filters = target.filters;\n\t\tvar filterCount = filters && filters.length;\n\t\tif (!!filterCount <= 0) { return output; }\n\n\t\tfor(var i=0; i<filterCount; i++) {\n\t\t\tvar f = filters[i];\n\t\t\tif(!f || !f.getBounds){ continue; }\n\t\t\tvar test = f.getBounds();\n\t\t\tif(!test){ continue; }\n\t\t\tif(i==0) {\n\t\t\t\toutput.setValues(test.x, test.y, test.width, test.height);\n\t\t\t} else {\n\t\t\t\toutput.extend(test.x, test.y, test.width, test.height);\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t};\n\n// public methods:\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[BitmapCache]\";\n\t};\n\n\t/**\n\t * Actually create the correct cache surface and properties associated with it. Caching and it's benefits are discussed\n\t * by the {{#crossLink \"DisplayObject/cache\"}}{{/crossLink}} function and this class description. Here are the detailed\n\t * specifics of how to use the options object.\n\t *\n\t * - If options.useGL is set to \"new\" a StageGL is created and contained on this for use when rendering the cache.\n\t * - If options.useGL is set to \"stage\" if the current stage is a StageGL it will be used. If not then it will default to \"new\".\n\t * - If options.useGL is a StageGL instance it will not create one but use the one provided.\n\t * - If options.useGL is undefined a Context 2D cache will be performed.\n\t *\n\t * This means you can use any combination of StageGL and 2D with either, neither, or both the stage and cache being\n\t * WebGL. Using \"new\" with a StageGL display list is highly unrecommended, but still an option. It should be avoided\n\t * due to negative performance reasons and the Image loading limitation noted in the class complications above.\n\t *\n\t * When \"options.useGL\" is set to the parent stage of the target and WebGL, performance is increased by using\n\t * \"RenderTextures\" instead of canvas elements. These are internal Textures on the graphics card stored in the GPU.\n\t * Because they are no longer canvases you cannot perform operations you could with a regular canvas. The benefit\n\t * is that this avoids the slowdown of copying the texture back and forth from the GPU to a Canvas element.\n\t * This means \"stage\" is the recommended option when available.\n\t *\n\t * A StageGL cache does not infer the ability to draw objects a StageGL cannot currently draw, i.e. do not use a\n\t * WebGL context cache when caching a Shape, Text, etc.\n\t * <h4>WebGL cache with a 2D context</h4>\n\t *\n\t *     var stage = new createjs.Stage();\n\t *     var bmp = new createjs.Bitmap(src);\n\t *     bmp.cache(0, 0, bmp.width, bmp.height, 1, {gl: \"new\"});          // no StageGL to use, so make one\n\t *\n\t *     var shape = new createjs.Shape();\n\t *     shape.graphics.clear().fill(\"red\").drawRect(0,0,20,20);\n\t *     shape.cache(0, 0, 20, 20, 1);                             // cannot use WebGL cache\n\t *\n\t * <h4>WebGL cache with a WebGL context</h4>\n\t *\n\t *     var stageGL = new createjs.StageGL();\n\t *     var bmp = new createjs.Bitmap(src);\n\t *     bmp.cache(0, 0, bmp.width, bmp.height, 1, {gl: \"stage\"});       // use our StageGL to cache\n\t *\n\t *     var shape = new createjs.Shape();\n\t *     shape.graphics.clear().fill(\"red\").drawRect(0,0,20,20);\n\t *     shape.cache(0, 0, 20, 20, 1);                             // cannot use WebGL cache\n\t *\n\t * You may wish to create your own StageGL instance to control factors like clear color, transparency, AA, and\n\t * others. If you do, pass a new instance in instead of \"true\", the library will automatically set the\n\t * {{#crossLink \"StageGL/isCacheControlled\"}}{{/crossLink}} to true on your instance. This will trigger it to behave\n\t * correctly, and not assume your main context is WebGL.\n\t *\n\t * @public\n\t * @method BitmapCache.cache\n\t * @param {Number} x The x coordinate origin for the cache region.\n\t * @param {Number} y The y coordinate origin for the cache region.\n\t * @param {Number} width The width of the cache region.\n\t * @param {Number} height The height of the cache region.\n\t * @param {Number} [scale=1] The scale at which the cache will be created. For example, if you cache a vector shape\n\t * using myShape.cache(0,0,100,100,2) then the resulting cacheCanvas will be 200x200 px. This lets you scale and\n\t * rotate cached elements with greater fidelity. Default is 1.\n\t * @param {Object} [options=undefined] Specify additional parameters for the cache logic\n\t * @param {undefined|\"new\"|\"stage\"|StageGL} [options.useGL=undefined] Select whether to use context 2D, or WebGL rendering, and\n\t * whether to make a new stage instance or use an existing one. See above for extensive details on use.\n\t * @for BitmapCache\n\t */\n\t p.define = function(target, x, y, width, height, scale, options) {\n\t\tif(!target){ throw \"No symbol to cache\"; }\n\t\tthis._options = options;\n\t\tthis.target = target;\n\n\t\tthis.width =\t\twidth >= 1 ? width : 1;\n\t\tthis.height =\t\theight >= 1 ? height : 1;\n\t\tthis.x =\t\t\tx || 0;\n\t\tthis.y =\t\t\ty || 0;\n\t\tthis.scale =\t\tscale || 1;\n\n\t\tthis.update();\n\t};\n\n\t/**\n\t * Directly called via {{#crossLink \"DisplayObject/updateCache:method\"}}{{/crossLink}}, but also internally. This\n\t * has the dual responsibility of making sure the surface is ready to be drawn to, and performing the draw. For\n\t * full details of each behaviour, check the protected functions {{#crossLink \"BitmapCache/_updateSurface\"}}{{/crossLink}}\n\t * and {{#crossLink \"BitmapCache/_drawToCache\"}}{{/crossLink}} respectively.\n\t * @method update\n\t * @param {String} [compositeOperation=null] The DisplayObject this cache is linked to.\n\t **/\n\tp.update = function(compositeOperation) {\n\t\tif(!this.target) { throw \"define() must be called before update()\"; }\n\n\t\tvar filterBounds = BitmapCache.getFilterBounds(this.target);\n\t\tvar surface = this.target.cacheCanvas;\n\n\t\tthis._drawWidth = Math.ceil(this.width*this.scale) + filterBounds.width;\n\t\tthis._drawHeight = Math.ceil(this.height*this.scale) + filterBounds.height;\n\n\t\tif(!surface || this._drawWidth != surface.width || this._drawHeight != surface.height) {\n\t\t\tthis._updateSurface();\n\t\t}\n\n\t\tthis._filterOffX = filterBounds.x;\n\t\tthis._filterOffY = filterBounds.y;\n\t\tthis.offX = this.x*this.scale + this._filterOffX;\n\t\tthis.offY = this.y*this.scale + this._filterOffY;\n\n\t\tthis._drawToCache(compositeOperation);\n\n\t\tthis.cacheID = this.cacheID?this.cacheID+1:1;\n\t};\n\n\t/**\n\t * Reset and release all the properties and memory associated with this cache.\n\t * @method release\n\t **/\n\tp.release = function() {\n\t\tif (this._webGLCache) {\n\t\t\t// if it isn't cache controlled clean up after yourself\n\t\t\tif (!this._webGLCache.isCacheControlled) {\n\t\t\t\tif (this.__lastRT){ this.__lastRT = undefined; }\n\t\t\t\tif (this.__rtA){ this._webGLCache._killTextureObject(this.__rtA); }\n\t\t\t\tif (this.__rtB){ this._webGLCache._killTextureObject(this.__rtB); }\n\t\t\t\tif (this.target && this.target.cacheCanvas){ this._webGLCache._killTextureObject(this.target.cacheCanvas); }\n\t\t\t}\n\t\t\t// set the context to none and let the garbage collector get the rest when the canvas itself gets removed\n\t\t\tthis._webGLCache = false;\n\t\t} else {\n\t\t\tvar stage = this.target.stage;\n\t\t\tif (stage instanceof createjs.StageGL){\n\t\t\t\tstage.releaseTexture(this.target.cacheCanvas);\n\t\t\t}\n\t\t}\n\n\t\tthis.target = this.target.cacheCanvas = null;\n\t\tthis.cacheID = this._cacheDataURLID = this._cacheDataURL = undefined;\n\t\tthis.width = this.height = this.x = this.y = this.offX = this.offY = 0;\n\t\tthis.scale = 1;\n\t};\n\n\t/**\n\t * Returns a data URL for the cache, or `null` if this display object is not cached.\n\t * Uses {{#crossLink \"BitmapCache/cacheID:property\"}}{{/crossLink}} to ensure a new data URL is not generated if the\n\t * cache has not changed.\n\t * @method getCacheDataURL\n\t * @return {String} The image data url for the cache.\n\t **/\n\tp.getCacheDataURL = function() {\n\t\tvar cacheCanvas = this.target && this.target.cacheCanvas;\n\t\tif (!cacheCanvas) { return null; }\n\t\tif (this.cacheID != this._cacheDataURLID) {\n\t\t\tthis._cacheDataURLID = this.cacheID;\n\t\t\tthis._cacheDataURL = cacheCanvas.toDataURL?cacheCanvas.toDataURL():null;\t// incase function is\n\t\t}\n\t\treturn this._cacheDataURL;\n\t};\n\n\t/**\n\t * Use context2D drawing commands to display the cache canvas being used.\n\t * @method draw\n\t * @param {CanvasRenderingContext2D} ctx The context to draw into.\n\t * @return {Boolean} Whether the draw was handled successfully.\n\t **/\n\tp.draw = function(ctx) {\n\t\tif(!this.target) { return false; }\n\t\tctx.drawImage(this.target.cacheCanvas,\n\t\t\tthis.x + (this._filterOffX/this.scale),\t\tthis.y + (this._filterOffY/this.scale),\n\t\t\tthis._drawWidth/this.scale,\t\t\t\t\tthis._drawHeight/this.scale\n\t\t);\n\t\treturn true;\n\t};\n\n// private methods:\n\t/**\n\t * Create or resize the invisible canvas/surface that is needed for the display object(s) to draw to,\n\t * and in turn be used in their stead when drawing. The surface is resized to the size defined\n\t * by the width and height, factoring in scaling and filters. Adjust them to adjust the output size.\n\t * @method _updateSurface\n\t * @protected\n\t **/\n\tp._updateSurface = function() {\n\t\tif (!this._options || !this._options.useGL) {\n\t\t\tvar surface = this.target.cacheCanvas;\n\n\t\t\t// create it if it's missing\n\t\t\tif(!surface) {\n\t\t\t\tsurface = this.target.cacheCanvas = createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");\n\t\t\t}\n\n\t\t\t// now size it\n\t\t\tsurface.width = this._drawWidth;\n\t\t\tsurface.height = this._drawHeight;\n\t\t\treturn;\n\t\t}\n\n\t\t// create it if it's missing\n\t\tif (!this._webGLCache) {\n\t\t\tif (this._options.useGL === \"stage\") {\n\t\t\t\tif(!(this.target.stage && this.target.stage.isWebGL)){\n\t\t\t\t\tvar error = \"Cannot use 'stage' for cache because the object's parent stage is \";\n\t\t\t\t\terror += this.target.stage ? \"non WebGL.\" : \"not set, please addChild to the correct stage.\";\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t\tthis.target.cacheCanvas = true; // will be replaced with RenderTexture, temporary positive value for old \"isCached\" checks\n\t\t\t\tthis._webGLCache = this.target.stage;\n\n\t\t\t} else if(this._options.useGL === \"new\") {\n\t\t\t\tthis.target.cacheCanvas = document.createElement(\"canvas\"); // we can turn off autopurge because we wont be making textures here\n\t\t\t\tthis._webGLCache = new createjs.StageGL(this.target.cacheCanvas, {antialias: true, transparent: true, autoPurge: -1});\n\t\t\t\tthis._webGLCache.isCacheControlled = true;\t// use this flag to control stage sizing and final output\n\n\t\t\t} else if(this._options.useGL instanceof createjs.StageGL) {\n\t\t\t\tthis.target.cacheCanvas = true; // will be replaced with RenderTexture, temporary positive value for old \"isCached\" checks\n\t\t\t\tthis._webGLCache = this._options.useGL;\n\t\t\t\tthis._webGLCache.isCacheControlled = true;\t// use this flag to control stage sizing and final output\n\n\t\t\t} else {\n\t\t\t\tthrow \"Invalid option provided to useGL, expected ['stage', 'new', StageGL, undefined], got \"+ this._options.useGL;\n\t\t\t}\n\t\t}\n\n\t\t// now size render surfaces\n\t\tvar surface = this.target.cacheCanvas;\n\t\tvar stageGL = this._webGLCache;\n\n\t\t// if we have a dedicated stage we've gotta size it\n\t\tif (stageGL.isCacheControlled) {\n\t\t\tsurface.width = this._drawWidth;\n\t\t\tsurface.height = this._drawHeight;\n\t\t\tstageGL.updateViewport(this._drawWidth, this._drawHeight);\n\t\t}\n\t\tif (this.target.filters) {\n\t\t\t// with filters we can't tell how many we'll need but the most we'll ever need is two, so make them now\n\t\t\tstageGL.getTargetRenderTexture(this.target, this._drawWidth,this._drawHeight);\n\t\t\tstageGL.getTargetRenderTexture(this.target, this._drawWidth,this._drawHeight);\n\t\t} else {\n\t\t\t// without filters then we only need one RenderTexture, and that's only if its not a dedicated stage\n\t\t\tif (!stageGL.isCacheControlled) {\n\t\t\t\tstageGL.getTargetRenderTexture(this.target, this._drawWidth,this._drawHeight);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Perform the cache draw out for context 2D now that the setup properties have been performed.\n\t * @method _drawToCache\n\t * @protected\n\t **/\n\tp._drawToCache = function(compositeOperation) {\n\t\tvar surface = this.target.cacheCanvas;\n\t\tvar target = this.target;\n\t\tvar webGL = this._webGLCache;\n\n\t\tif (webGL){\n\t\t\t//TODO: auto split blur into an x/y pass\n\t\t\twebGL.cacheDraw(target, target.filters, this);\n\n\t\t\t// we may of swapped around which element the surface is, so we re-fetch it\n\t\t\tsurface = this.target.cacheCanvas;\n\n\t\t\tsurface.width = this._drawWidth;\n\t\t\tsurface.height = this._drawHeight;\n\t\t} else {\n\t\t\tvar ctx = surface.getContext(\"2d\");\n\n\t\t\tif (!compositeOperation) {\n\t\t\t\tctx.clearRect(0, 0, this._drawWidth+1, this._drawHeight+1);\n\t\t\t}\n\n\t\t\tctx.save();\n\t\t\tctx.globalCompositeOperation = compositeOperation;\n\t\t\tctx.setTransform(this.scale,0,0,this.scale, -this._filterOffX,-this._filterOffY);\n\t\t\tctx.translate(-this.x, -this.y);\n\t\t\ttarget.draw(ctx, true);\n\t\t\tctx.restore();\n\n\n\t\t\tif (target.filters && target.filters.length) {\n\t\t\t\tthis._applyFilters(ctx);\n\t\t\t}\n\t\t}\n\t\tsurface._invalid = true;\n\t};\n\n\t/**\n\t * Work through every filter and apply its individual visual transformation.\n\t * @method _applyFilters\n\t * @protected\n\t **/\n\tp._applyFilters = function(ctx) {\n\t\tvar filters = this.target.filters;\n\n\t\tvar w = this._drawWidth;\n\t\tvar h = this._drawHeight;\n\n\t\tvar data;\n\n\t\tvar i = 0, filter = filters[i];\n\t\tdo { // this is safe because we wouldn't be in apply filters without a filter count of at least 1\n\t\t\tif(filter.usesContext){\n\t\t\t\tif(data) {\n\t\t\t\t\tctx.putImageData(data, 0,0);\n\t\t\t\t\tdata = null;\n\t\t\t\t}\n\t\t\t\tfilter.applyFilter(ctx, 0,0, w,h);\n\t\t\t} else {\n\t\t\t\tif(!data) {\n\t\t\t\t\tdata = ctx.getImageData(0,0, w,h);\n\t\t\t\t}\n\t\t\t\tfilter._applyFilter(data);\n\t\t\t}\n\n\t\t\t// work through the multipass if it's there, otherwise move on\n\t\t\tfilter = filter._multiPass !== null ? filter._multiPass : filters[++i];\n\t\t} while (filter);\n\n\t\t//done\n\t\tif(data) {\n\t\t\tctx.putImageData(data, 0,0);\n\t\t}\n\t};\n\n\tcreatejs.BitmapCache = BitmapCache;\n}());\n\n//##############################################################################\n// BlurFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a box blur to DisplayObjects in context 2D and a Gaussian blur in webgl. Note that this filter is fairly\n\t * intensive, particularly if the quality is set higher than 1.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, and then applies a 5 pixel blur to it. It uses the {{#crossLink \"Filter/getBounds\"}}{{/crossLink}}\n\t * method to account for the spread that the blur causes.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var blurFilter = new createjs.BlurFilter(5, 5, 1);\n\t *      shape.filters = [blurFilter];\n\t *      var bounds = blurFilter.getBounds();\n\t *\n\t *      shape.cache(-50+bounds.x, -50+bounds.y, 100+bounds.width, 100+bounds.height);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class BlurFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {Number} [blurX=0] The horizontal blur radius in pixels.\n\t * @param {Number} [blurY=0] The vertical blur radius in pixels.\n\t * @param {Number} [quality=1] The number of blur iterations.\n\t **/\n\tfunction BlurFilter( blurX, blurY, quality) {\n\t\tthis.Filter_constructor();\n\n\t\t// public properties:\n\t\t/**\n\t\t * Horizontal blur radius in pixels\n\t\t * @property blurX\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis._blurX = blurX;\n\t\tthis._blurXTable = [];\n\t\tthis._lastBlurX = null;\n\n\t\t/**\n\t\t * Vertical blur radius in pixels\n\t\t * @property blurY\n\t\t * @default 0\n\t\t * @type Number\n\t\t **/\n\t\tthis._blurY = blurY;\n\t\tthis._blurYTable = [];\n\t\tthis._lastBlurY = null;\n\n\t\t/**\n\t\t * Number of blur iterations. For example, a value of 1 will produce a rough blur. A value of 2 will produce a\n\t\t * smoother blur, but take twice as long to run.\n\t\t * @property quality\n\t\t * @default 1\n\t\t * @type Number\n\t\t **/\n\t\tthis._quality;\n\t\tthis._lastQuality = null;\n\n\t\t/**\n\t\t * This is a template to generate the shader for {{#crossLink FRAG_SHADER_BODY}}{{/crossLink}}\n\t\t */\n\t\tthis.FRAG_SHADER_TEMPLATE = (\n\t\t\t\"uniform float xWeight[{{blurX}}];\" +\n\t\t\t\"uniform float yWeight[{{blurY}}];\" +\n\t\t\t\"uniform vec2 textureOffset;\" +\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = vec4(0.0);\" +\n\n\t\t\t\t\"float xAdj = ({{blurX}}.0-1.0)/2.0;\" +\n\t\t\t\t\"float yAdj = ({{blurY}}.0-1.0)/2.0;\" +\n\t\t\t\t\"vec2 sampleOffset;\" +\n\n\t\t\t\t\"for(int i=0; i<{{blurX}}; i++) {\" +\n\t\t\t\t\t\"for(int j=0; j<{{blurY}}; j++) {\" +\n\t\t\t\t\t\t\"sampleOffset = vRenderCoord + (textureOffset * vec2(float(i)-xAdj, float(j)-yAdj));\" +\n\t\t\t\t\t\t\"color += texture2D(uSampler, sampleOffset) * (xWeight[i] * yWeight[j]);\" +\n\t\t\t\t\t\"}\" +\n\t\t\t\t\"}\" +\n\n\t\t\t\t\"gl_FragColor = color.rgba;\" +\n\t\t\t\"}\"\n\t\t);\n\n\t\t// update the filter using the setters\n\t\tif(isNaN(quality) || quality < 1){ quality = 1; }\n\t\tthis.setQuality(quality|0);\n\t}\n\tvar p = createjs.extend(BlurFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\tp.getBlurX = function() { return this._blurX; };\n\tp.getBlurY = function() { return this._blurY; };\n\tp.setBlurX = function(value) {\n\t\tif(isNaN(value) || value < 0){ value = 0; }\n\t\tthis._blurX = value;\n\t};\n\tp.setBlurY = function(value) {\n\t\tif(isNaN(value) || value < 0){ value = 0; }\n\t\tthis._blurY = value;\n\t};\n\tp.getQuality = function() { return this._quality; };\n\tp.setQuality = function(value) {\n\t\tif(isNaN(value) || value < 0){ value = 0; }\n\t\tthis._quality = value | 0;\n\t};\n\tp._getShader = function() {\n\t\tvar xChange = this._lastBlurX !== this._blurX;\n\t\tvar yChange = this._lastBlurY !== this._blurY;\n\t\tvar qChange = this._lastQuality !== this._quality;\n\t\tif(xChange || yChange || qChange) {\n\t\t\tif(xChange || qChange) { this._blurXTable = this._getTable(this._blurX * this._quality); }\n\t\t\tif(yChange || qChange) { this._blurYTable = this._getTable(this._blurY * this._quality); }\n\t\t\tthis._updateShader();\n\t\t\tthis._lastBlurX = this._blurX;\n\t\t\tthis._lastBlurY = this._blurY;\n\t\t\tthis._lastQuality = this._quality;\n\t\t\treturn undefined; // force a rebuild\n\t\t}\n\t\treturn this._compiledShader;\n\t};\n\tp._setShader = function() { this._compiledShader; };\n\n\ttry {\n\t\tObject.defineProperties(p, {\n\t\t\tblurX: { get: p.getBlurX, set: p.setBlurX },\n\t\t\tblurY: { get: p.getBlurY, set: p.setBlurY },\n\t\t\tquality: { get: p.getQuality, set: p.setQuality },\n\t\t\t_builtShader: { get: p._getShader, set: p._setShader}\n\t\t});\n\t} catch (e) { console.log(e); }\n\n\t/**\n\t * Internal lookup function to create gaussian distribution.\n\t * @method _getTable\n\t * @param {Number} spread How many steps in the curve.\n\t * @return {Array<Number>} An array with Math.ceil(spread*2) entries with appropriately distributed weights.\n\t */\n\tp._getTable = function(spread) {\n\t\tvar EDGE = 4.2;\n\t\tif(spread<=1) { return [1]; }\n\n\t\tvar result = [];\n\t\tvar count = Math.ceil(spread*2);\n\t\tcount += (count%2)?0:1;\n\t\tvar adjust = (count/2)|0;\n\t\tfor(var i = -adjust; i<=adjust; i++) {\n\t\t\tvar x = (i/adjust)*EDGE;\n\t\t\tresult.push(1/Math.sqrt(2*Math.PI) * Math.pow(Math.E, -(Math.pow(x,2)/4)));\n\t\t}\n\t\tvar factor = result.reduce(function(a, b) { return a + b; });\n\t\treturn result.map(function(currentValue, index, array) { return currentValue/factor; });\n\t};\n\n\t/**\n\t * Internal update function to create shader properties.\n\t * @method _updateShader\n\t */\n\tp._updateShader = function() {\n\t\tif(this._blurX === undefined || this._blurY === undefined){ return; }\n\t\tvar result = this.FRAG_SHADER_TEMPLATE;\n\t\tresult = result.replace(/\\{\\{blurX\\}\\}/g, (this._blurXTable.length).toFixed(0));\n\t\tresult = result.replace(/\\{\\{blurY\\}\\}/g, (this._blurYTable.length).toFixed(0));\n\t\tthis.FRAG_SHADER_BODY = result;\n\t};\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\t// load the normalized gaussian weight tables\n\t\tgl.uniform1fv(\n\t\t\tgl.getUniformLocation(shaderProgram, \"xWeight\"),\n\t\t\tthis._blurXTable\n\t\t);\n\t\tgl.uniform1fv(\n\t\t\tgl.getUniformLocation(shaderProgram, \"yWeight\"),\n\t\t\tthis._blurYTable\n\t\t);\n\n\t\t// what is the size of a single pixel in -1, 1 (webGL) space\n\t\tgl.uniform2f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"textureOffset\"),\n\t\t\t2/(stage._viewportWidth*this._quality), 2/(stage._viewportHeight*this._quality)\n\t\t);\n\t};\n\n// constants:\n\t/**\n\t * Array of multiply values for blur calculations.\n\t * @property MUL_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];\n\n\t/**\n\t * Array of shift values for blur calculations.\n\t * @property SHG_TABLE\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tBlurFilter.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];\n\n// public methods:\n\t/** docced in super class **/\n\tp.getBounds = function (rect) {\n\t\tvar x = this.blurX|0, y = this.blurY| 0;\n\t\tif(x <= 0 && y <= 0) { return rect; }\n\t\tvar q = Math.pow(this.quality, 0.2);\n\t\treturn (rect || new createjs.Rectangle()).pad(y*q+1,x*q+1,y*q+1,x*q+1);\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new BlurFilter(this.blurX, this.blurY, this.quality);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[BlurFilter]\";\n\t};\n\n\n// private methods:\n\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\t\tvar radiusX = this._blurX >> 1;\n\t\tif (isNaN(radiusX) || radiusX < 0) return false;\n\t\tvar radiusY = this._blurY >> 1;\n\t\tif (isNaN(radiusY) || radiusY < 0) return false;\n\t\tif (radiusX == 0 && radiusY == 0) return false;\n\n\t\tvar iterations = this.quality;\n\t\tif (isNaN(iterations) || iterations < 1) iterations = 1;\n\t\titerations |= 0;\n\t\tif (iterations > 3) iterations = 3;\n\t\tif (iterations < 1) iterations = 1;\n\n\t\tvar px = imageData.data;\n\t\tvar x=0, y=0, i=0, p=0, yp=0, yi=0, yw=0, r=0, g=0, b=0, a=0, pr=0, pg=0, pb=0, pa=0;\n\n\t\tvar divx = (radiusX + radiusX + 1) | 0;\n\t\tvar divy = (radiusY + radiusY + 1) | 0;\n\t\tvar w = imageData.width | 0;\n\t\tvar h = imageData.height | 0;\n\n\t\tvar w1 = (w - 1) | 0;\n\t\tvar h1 = (h - 1) | 0;\n\t\tvar rxp1 = (radiusX + 1) | 0;\n\t\tvar ryp1 = (radiusY + 1) | 0;\n\n\t\tvar ssx = {r:0,b:0,g:0,a:0};\n\t\tvar sx = ssx;\n\t\tfor ( i = 1; i < divx; i++ )\n\t\t{\n\t\t\tsx = sx.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsx.n = ssx;\n\n\t\tvar ssy = {r:0,b:0,g:0,a:0};\n\t\tvar sy = ssy;\n\t\tfor ( i = 1; i < divy; i++ )\n\t\t{\n\t\t\tsy = sy.n = {r:0,b:0,g:0,a:0};\n\t\t}\n\t\tsy.n = ssy;\n\n\t\tvar si = null;\n\n\n\t\tvar mtx = BlurFilter.MUL_TABLE[radiusX] | 0;\n\t\tvar stx = BlurFilter.SHG_TABLE[radiusX] | 0;\n\t\tvar mty = BlurFilter.MUL_TABLE[radiusY] | 0;\n\t\tvar sty = BlurFilter.SHG_TABLE[radiusY] | 0;\n\n\t\twhile (iterations-- > 0) {\n\n\t\t\tyw = yi = 0;\n\t\t\tvar ms = mtx;\n\t\t\tvar ss = stx;\n\t\t\tfor (y = h; --y > -1;) {\n\t\t\t\tr = rxp1 * (pr = px[(yi) | 0]);\n\t\t\t\tg = rxp1 * (pg = px[(yi + 1) | 0]);\n\t\t\t\tb = rxp1 * (pb = px[(yi + 2) | 0]);\n\t\t\t\ta = rxp1 * (pa = px[(yi + 3) | 0]);\n\n\t\t\t\tsx = ssx;\n\n\t\t\t\tfor( i = rxp1; --i > -1; )\n\t\t\t\t{\n\t\t\t\t\tsx.r = pr;\n\t\t\t\t\tsx.g = pg;\n\t\t\t\t\tsx.b = pb;\n\t\t\t\t\tsx.a = pa;\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tfor( i = 1; i < rxp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tp = (yi + ((w1 < i ? w1 : i) << 2)) | 0;\n\t\t\t\t\tr += ( sx.r = px[p]);\n\t\t\t\t\tg += ( sx.g = px[p+1]);\n\t\t\t\t\tb += ( sx.b = px[p+2]);\n\t\t\t\t\ta += ( sx.a = px[p+3]);\n\n\t\t\t\t\tsx = sx.n;\n\t\t\t\t}\n\n\t\t\t\tsi = ssx;\n\t\t\t\tfor ( x = 0; x < w; x++ )\n\t\t\t\t{\n\t\t\t\t\tpx[yi++] = (r * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (g * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (b * ms) >>> ss;\n\t\t\t\t\tpx[yi++] = (a * ms) >>> ss;\n\n\t\t\t\t\tp = ((yw + ((p = x + radiusX + 1) < w1 ? p : w1)) << 2);\n\n\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\tsi = si.n;\n\n\t\t\t\t}\n\t\t\t\tyw += w;\n\t\t\t}\n\n\t\t\tms = mty;\n\t\t\tss = sty;\n\t\t\tfor (x = 0; x < w; x++) {\n\t\t\t\tyi = (x << 2) | 0;\n\n\t\t\t\tr = (ryp1 * (pr = px[yi])) | 0;\n\t\t\t\tg = (ryp1 * (pg = px[(yi + 1) | 0])) | 0;\n\t\t\t\tb = (ryp1 * (pb = px[(yi + 2) | 0])) | 0;\n\t\t\t\ta = (ryp1 * (pa = px[(yi + 3) | 0])) | 0;\n\n\t\t\t\tsy = ssy;\n\t\t\t\tfor( i = 0; i < ryp1; i++ )\n\t\t\t\t{\n\t\t\t\t\tsy.r = pr;\n\t\t\t\t\tsy.g = pg;\n\t\t\t\t\tsy.b = pb;\n\t\t\t\t\tsy.a = pa;\n\t\t\t\t\tsy = sy.n;\n\t\t\t\t}\n\n\t\t\t\typ = w;\n\n\t\t\t\tfor( i = 1; i <= radiusY; i++ )\n\t\t\t\t{\n\t\t\t\t\tyi = ( yp + x ) << 2;\n\n\t\t\t\t\tr += ( sy.r = px[yi]);\n\t\t\t\t\tg += ( sy.g = px[yi+1]);\n\t\t\t\t\tb += ( sy.b = px[yi+2]);\n\t\t\t\t\ta += ( sy.a = px[yi+3]);\n\n\t\t\t\t\tsy = sy.n;\n\n\t\t\t\t\tif( i < h1 )\n\t\t\t\t\t{\n\t\t\t\t\t\typ += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tyi = x;\n\t\t\t\tsi = ssy;\n\t\t\t\tif ( iterations > 0 )\n\t\t\t\t{\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss );\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor ( y = 0; y < h; y++ )\n\t\t\t\t\t{\n\t\t\t\t\t\tp = yi << 2;\n\t\t\t\t\t\tpx[p+3] = pa =(a * ms) >>> ss;\n\t\t\t\t\t\tif ( pa > 0 )\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpa = 255 / pa;\n\t\t\t\t\t\t\tpx[p]   = ((r * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+1] = ((g * ms) >>> ss ) * pa;\n\t\t\t\t\t\t\tpx[p+2] = ((b * ms) >>> ss ) * pa;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpx[p] = px[p+1] = px[p+2] = 0\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp = ( x + (( ( p = y + ryp1) < h1 ? p : h1 ) * w )) << 2;\n\n\t\t\t\t\t\tr -= si.r - ( si.r = px[p]);\n\t\t\t\t\t\tg -= si.g - ( si.g = px[p+1]);\n\t\t\t\t\t\tb -= si.b - ( si.b = px[p+2]);\n\t\t\t\t\t\ta -= si.a - ( si.a = px[p+3]);\n\n\t\t\t\t\t\tsi = si.n;\n\n\t\t\t\t\t\tyi += w;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn true;\n\t};\n\n\tcreatejs.BlurFilter = createjs.promote(BlurFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMapFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\t\n\t\n// constructor:\n\t/**\n\t * Applies a greyscale alpha map image (or canvas) to the target, such that the alpha channel of the result will\n\t * be copied from the red channel of the map, and the RGB channels will be copied from the target.\n\t *\n\t * Generally, it is recommended that you use {{#crossLink \"AlphaMaskFilter\"}}{{/crossLink}}, because it has much\n\t * better performance.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red->blue box, caches it, and then uses the cache canvas as an alpha map on a 100x100 image.\n\t *\n\t *       var box = new createjs.Shape();\n\t *       box.graphics.beginLinearGradientFill([\"#ff0000\", \"#0000ff\"], [0, 1], 0, 0, 0, 100)\n\t *       box.graphics.drawRect(0, 0, 100, 100);\n\t *       box.cache(0, 0, 100, 100);\n\t *\n\t *       var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *       bmp.filters = [\n\t *           new createjs.AlphaMapFilter(box.cacheCanvas)\n\t *       ];\n\t *       bmp.cache(0, 0, 100, 100);\n\t *       stage.addChild(bmp);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMapFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} alphaMap The greyscale image (or canvas) to use as the alpha value for the\n\t * result. This should be exactly the same dimensions as the target.\n\t **/\n\tfunction AlphaMapFilter(alphaMap) {\n\t\tthis.Filter_constructor();\n\t\n\t// public properties:\n\t\t/**\n\t\t * The greyscale image (or canvas) to use as the alpha value for the result. This should be exactly the same\n\t\t * dimensions as the target.\n\t\t * @property alphaMap\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.alphaMap = alphaMap;\n\t\t\n\t\t\n\t// private properties:\n\t\t/**\n\t\t * @property _alphaMap\n\t\t * @protected\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis._alphaMap = null;\n\t\t\n\t\t/**\n\t\t * @property _mapData\n\t\t * @protected\n\t\t * @type Uint8ClampedArray\n\t\t **/\n\t\tthis._mapData = null;\n\t\tthis._mapTexture = null;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform sampler2D uAlphaSampler;\"+\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\t\t\t\t\"vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);\" +\n\n\t\t\t\t// some image formats can have transparent white rgba(1,1,1, 0) when put on the GPU, this means we need a slight tweak\n\t\t\t\t// using ceil ensure that the colour will be used so long as it exists but pure transparency will be treated black\n\t\t\t\t\"gl_FragColor = vec4(color.rgb, color.a * (alphaMap.r * ceil(alphaMap.a)));\" +\n\t\t\t\"}\"\n\t\t);\n\t}\n\tvar p = createjs.extend(AlphaMapFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tif(!this._mapTexture) { this._mapTexture = gl.createTexture(); }\n\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this._mapTexture);\n\t\tstage.setTextureParams(gl);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.alphaMap);\n\n\t\tgl.uniform1i(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uAlphaSampler\"),\n\t\t\t1\n\t\t);\n\t};\n\n// public methods:\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\tvar o = new AlphaMapFilter(this.alphaMap);\n\t\to._alphaMap = this._alphaMap;\n\t\to._mapData = this._mapData;\n\t\treturn o;\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMapFilter]\";\n\t};\n\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function (imageData) {\n\t\tif (!this.alphaMap) { return true; }\n\t\tif (!this._prepAlphaMap()) { return false; }\n\t\t\n\t\t// TODO: update to support scenarios where the target has different dimensions.\n\t\tvar data = imageData.data;\n\t\tvar map = this._mapData;\n\t\tfor(var i=0, l=data.length; i<l; i += 4) { data[i + 3] = map[i] || 0; }\n\t\t\n\t\treturn true;\n\t};\n\n\t/**\n\t * @method _prepAlphaMap\n\t * @protected\n\t **/\n\tp._prepAlphaMap = function () {\n\t\tif (!this.alphaMap) { return false; }\n\t\tif (this.alphaMap == this._alphaMap && this._mapData) { return true; }\n\n\t\tthis._mapData = null;\n\t\tvar map = this._alphaMap = this.alphaMap;\n\t\tvar canvas = map;\n\t\tvar ctx;\n\t\tif (map instanceof HTMLCanvasElement) {\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t} else {\n\t\t\tcanvas = createjs.createCanvas ? createjs.createCanvas() : document.createElement(\"canvas\");\n\t\t\tcanvas.width = map.width;\n\t\t\tcanvas.height = map.height;\n\t\t\tctx = canvas.getContext(\"2d\");\n\t\t\tctx.drawImage(map, 0, 0);\n\t\t}\n\n\t\ttry {\n\t\t\tvar imgData = ctx.getImageData(0, 0, map.width, map.height);\n\t\t} catch (e) {\n\t\t\t//if (!this.suppressCrossDomainErrors) throw new Error(\"unable to access local image data: \" + e);\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tthis._mapData = imgData.data;\n\t\treturn true;\n\t};\n\n\n\tcreatejs.AlphaMapFilter = createjs.promote(AlphaMapFilter, \"Filter\");\n}());\n\n//##############################################################################\n// AlphaMaskFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function () {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies the alpha from the mask image (or canvas) to the target, such that the alpha channel of the result will\n\t * be derived from the mask, and the RGB channels will be copied from the target. This can be used, for example, to\n\t * apply an alpha mask to a display object. This can also be used to combine a JPG compressed RGB image with a PNG32\n\t * alpha mask, which can result in a much smaller file size than a single PNG32 containing ARGB.\n\t *\n\t * <b>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters correctly.</b>\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a gradient box, then caches it and uses the \"cacheCanvas\" as the alpha mask on a 100x100 image.\n\t *\n\t *      var box = new createjs.Shape();\n\t *      box.graphics.beginLinearGradientFill([\"#000000\", \"rgba(0, 0, 0, 0)\"], [0, 1], 0, 0, 100, 100)\n\t *      box.graphics.drawRect(0, 0, 100, 100);\n\t *      box.cache(0, 0, 100, 100);\n\t *\n\t *      var bmp = new createjs.Bitmap(\"path/to/image.jpg\");\n\t *      bmp.filters = [\n\t *          new createjs.AlphaMaskFilter(box.cacheCanvas)\n\t *      ];\n\t *      bmp.cache(0, 0, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for more information on applying filters.\n\t * @class AlphaMaskFilter\n\t * @extends Filter\n\t * @constructor\n\t * @param {HTMLImageElement|HTMLCanvasElement} mask\n\t **/\n\tfunction AlphaMaskFilter(mask) {\n\t\tthis.Filter_constructor();\n\t\n\t// public properties:\n\t\t/**\n\t\t * The image (or canvas) to use as the mask.\n\t\t * @property mask\n\t\t * @type HTMLImageElement|HTMLCanvasElement\n\t\t **/\n\t\tthis.mask = mask;\n\n\t\t/** docced in super class **/\n\t\tthis.usesContext = true;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform sampler2D uAlphaSampler;\"+\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\t\t\t\t\"vec4 alphaMap = texture2D(uAlphaSampler, vTextureCoord);\" +\n\n\t\t\t\t\"gl_FragColor = vec4(color.rgb, color.a * alphaMap.a);\" +\n\t\t\t\"}\"\n\t\t);\n\t}\n\tvar p = createjs.extend(AlphaMaskFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tif(!this._mapTexture) { this._mapTexture = gl.createTexture(); }\n\n\t\tgl.activeTexture(gl.TEXTURE1);\n\t\tgl.bindTexture(gl.TEXTURE_2D, this._mapTexture);\n\t\tstage.setTextureParams(gl);\n\t\tgl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.mask);\n\n\t\tgl.uniform1i(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uAlphaSampler\"),\n\t\t\t1\n\t\t);\n\t};\n\n// public methods:\n\t/**\n\t * Applies the filter to the specified context.\n\t *\n\t * <strong>IMPORTANT NOTE: This filter currently does not support the targetCtx, or targetX/Y parameters\n\t * correctly.</strong>\n\t * @method applyFilter\n\t * @param {CanvasRenderingContext2D} ctx The 2D context to use as the source.\n\t * @param {Number} x The x position to use for the source rect.\n\t * @param {Number} y The y position to use for the source rect.\n\t * @param {Number} width The width to use for the source rect.\n\t * @param {Number} height The height to use for the source rect.\n\t * @param {CanvasRenderingContext2D} [targetCtx] NOT SUPPORTED IN THIS FILTER. The 2D context to draw the result to. Defaults to the context passed to ctx.\n\t * @param {Number} [targetX] NOT SUPPORTED IN THIS FILTER. The x position to draw the result to. Defaults to the value passed to x.\n\t * @param {Number} [targetY] NOT SUPPORTED IN THIS FILTER. The y position to draw the result to. Defaults to the value passed to y.\n\t * @return {Boolean} If the filter was applied successfully.\n\t **/\n\tp.applyFilter = function (ctx, x, y, width, height, targetCtx, targetX, targetY) {\n\t\tif (!this.mask) { return true; }\n\t\ttargetCtx = targetCtx || ctx;\n\t\tif (targetX == null) { targetX = x; }\n\t\tif (targetY == null) { targetY = y; }\n\n\t\ttargetCtx.save();\n\t\tif (ctx != targetCtx) {\n\t\t\t// TODO: support targetCtx and targetX/Y\n\t\t\t// clearRect, then draw the ctx in?\n\t\t\treturn false;\n\t\t}\n\n\t\ttargetCtx.globalCompositeOperation = \"destination-in\";\n\t\ttargetCtx.drawImage(this.mask, targetX, targetY);\n\t\ttargetCtx.restore();\n\t\treturn true;\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function () {\n\t\treturn new AlphaMaskFilter(this.mask);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function () {\n\t\treturn \"[AlphaMaskFilter]\";\n\t};\n\n\n\tcreatejs.AlphaMaskFilter = createjs.promote(AlphaMaskFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Applies a color transform to DisplayObjects.\n\t *\n\t * <h4>Example</h4>\n\t * This example draws a red circle, and then transforms it to Blue. This is accomplished by multiplying all the channels\n\t * to 0 (except alpha, which is set to 1), and then adding 255 to the blue channel.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      shape.filters = [\n\t *          new createjs.ColorFilter(0,0,0,1, 0,0,255,0)\n\t *      ];\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorFilter\n\t * @param {Number} [redMultiplier=1] The amount to multiply against the red channel. This is a range between 0 and 1.\n\t * @param {Number} [greenMultiplier=1] The amount to multiply against the green channel. This is a range between 0 and 1.\n\t * @param {Number} [blueMultiplier=1] The amount to multiply against the blue channel. This is a range between 0 and 1.\n\t * @param {Number} [alphaMultiplier=1] The amount to multiply against the alpha channel. This is a range between 0 and 1.\n\t * @param {Number} [redOffset=0] The amount to add to the red channel after it has been multiplied. This is a range\n\t * between -255 and 255.\n\t * @param {Number} [greenOffset=0] The amount to add to the green channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [blueOffset=0] The amount to add to the blue channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @param {Number} [alphaOffset=0] The amount to add to the alpha channel after it has been multiplied. This is a range\n\t  * between -255 and 255.\n\t * @constructor\n\t * @extends Filter\n\t **/\n\tfunction ColorFilter(redMultiplier, greenMultiplier, blueMultiplier, alphaMultiplier, redOffset, greenOffset, blueOffset, alphaOffset) {\n\t\tthis.Filter_constructor();\n\n\t// public properties:\n\t\t/**\n\t\t * Red channel multiplier.\n\t\t * @property redMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.redMultiplier = redMultiplier != null ? redMultiplier : 1;\n\t\n\t\t/**\n\t\t * Green channel multiplier.\n\t\t * @property greenMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenMultiplier = greenMultiplier != null ? greenMultiplier : 1;\n\t\n\t\t/**\n\t\t * Blue channel multiplier.\n\t\t * @property blueMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueMultiplier = blueMultiplier != null ? blueMultiplier : 1;\n\t\n\t\t/**\n\t\t * Alpha channel multiplier.\n\t\t * @property alphaMultiplier\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaMultiplier = alphaMultiplier != null ? alphaMultiplier : 1;\n\t\n\t\t/**\n\t\t * Red channel offset (added to value).\n\t\t * @property redOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.redOffset = redOffset || 0;\n\t\n\t\t/**\n\t\t * Green channel offset (added to value).\n\t\t * @property greenOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.greenOffset = greenOffset || 0;\n\t\n\t\t/**\n\t\t * Blue channel offset (added to value).\n\t\t * @property blueOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.blueOffset = blueOffset || 0;\n\t\n\t\t/**\n\t\t * Alpha channel offset (added to value).\n\t\t * @property alphaOffset\n\t\t * @type Number\n\t\t **/\n\t\tthis.alphaOffset = alphaOffset || 0;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform vec4 uColorMultiplier;\" +\n\t\t\t\"uniform vec4 uColorOffset;\" +\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\n\t\t\t\t\"gl_FragColor = (color * uColorMultiplier) + uColorOffset;\" +\n\t\t\t\"}\"\n\t\t);\n\n\t}\n\tvar p = createjs.extend(ColorFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\n// public methods:\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tgl.uniform4f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorMultiplier\"),\n\t\t\tthis.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier\n\t\t);\n\n\t\tgl.uniform4f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorOffset\"),\n\t\t\tthis.redOffset/255, this.greenOffset/255, this.blueOffset/255, this.alphaOffset/255\n\t\t);\n\t};\n\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorFilter(\n\t\t\tthis.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier,\n\t\t\tthis.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset\n\t\t);\n\t};\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) {\n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tdata[i] = data[i]*this.redMultiplier+this.redOffset;\n\t\t\tdata[i+1] = data[i+1]*this.greenMultiplier+this.greenOffset;\n\t\t\tdata[i+2] = data[i+2]*this.blueMultiplier+this.blueOffset;\n\t\t\tdata[i+3] = data[i+3]*this.alphaMultiplier+this.alphaOffset;\n\t\t}\n\t\treturn true;\n\t};\n\n\n\tcreatejs.ColorFilter = createjs.promote(ColorFilter, \"Filter\");\n}());\n\n//##############################################################################\n// ColorMatrix.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Provides helper functions for assembling a matrix for use with the {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}.\n\t * Most methods return the instance to facilitate chained calls.\n\t *\n\t * <h4>Example</h4>\n\t *\n\t *      myColorMatrix.adjustHue(20).adjustBrightness(50);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an example of how to apply filters, or {{#crossLink \"ColorMatrixFilter\"}}{{/crossLink}}\n\t * for an example of how to use ColorMatrix to change a DisplayObject's color.\n\t * @class ColorMatrix\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @constructor\n\t **/\n\tfunction ColorMatrix(brightness, contrast, saturation, hue) {\n\t\tthis.setColor(brightness, contrast, saturation, hue);\n\t}\n\tvar p = ColorMatrix.prototype;\n\n// constants:\n\t/**\n\t * Array of delta values for contrast calculations.\n\t * @property DELTA_INDEX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.DELTA_INDEX = [\n\t\t0,    0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1,  0.11,\n\t\t0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.20, 0.21, 0.22, 0.24,\n\t\t0.25, 0.27, 0.28, 0.30, 0.32, 0.34, 0.36, 0.38, 0.40, 0.42,\n\t\t0.44, 0.46, 0.48, 0.5,  0.53, 0.56, 0.59, 0.62, 0.65, 0.68,\n\t\t0.71, 0.74, 0.77, 0.80, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98,\n\t\t1.0,  1.06, 1.12, 1.18, 1.24, 1.30, 1.36, 1.42, 1.48, 1.54,\n\t\t1.60, 1.66, 1.72, 1.78, 1.84, 1.90, 1.96, 2.0,  2.12, 2.25,\n\t\t2.37, 2.50, 2.62, 2.75, 2.87, 3.0,  3.2,  3.4,  3.6,  3.8,\n\t\t4.0,  4.3,  4.7,  4.9,  5.0,  5.5,  6.0,  6.5,  6.8,  7.0,\n\t\t7.3,  7.5,  7.8,  8.0,  8.4,  8.7,  9.0,  9.4,  9.6,  9.8,\n\t\t10.0\n\t];\n\n\t/**\n\t * Identity matrix values.\n\t * @property IDENTITY_MATRIX\n\t * @type Array\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.IDENTITY_MATRIX = [\n\t\t1,0,0,0,0,\n\t\t0,1,0,0,0,\n\t\t0,0,1,0,0,\n\t\t0,0,0,1,0,\n\t\t0,0,0,0,1\n\t];\n\n\t/**\n\t * The constant length of a color matrix.\n\t * @property LENGTH\n\t * @type Number\n\t * @protected\n\t * @static\n\t **/\n\tColorMatrix.LENGTH = ColorMatrix.IDENTITY_MATRIX.length;\n\n\n// public methods:\n\t/**\n\t * Resets the instance with the specified values.\n\t * @method setColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.setColor = function(brightness,contrast,saturation,hue) {\n\t\treturn this.reset().adjustColor(brightness,contrast,saturation,hue);\n\t};\n\n\t/**\n\t * Resets the matrix to identity values.\n\t * @method reset\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t */\n\tp.reset = function() {\n\t\treturn this.copy(ColorMatrix.IDENTITY_MATRIX);\n\t};\n\n\t/**\n\t * Shortcut method to adjust brightness, contrast, saturation and hue.\n\t * Equivalent to calling adjustHue(hue), adjustContrast(contrast),\n\t * adjustBrightness(brightness), adjustSaturation(saturation), in that order.\n\t * @method adjustColor\n\t * @param {Number} brightness\n\t * @param {Number} contrast\n\t * @param {Number} saturation\n\t * @param {Number} hue\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustColor = function(brightness,contrast,saturation,hue) {\n\t\tthis.adjustHue(hue);\n\t\tthis.adjustContrast(contrast);\n\t\tthis.adjustBrightness(brightness);\n\t\treturn this.adjustSaturation(saturation);\n\t};\n\n\t/**\n\t * Adjusts the brightness of pixel color by adding the specified value to the red, green and blue channels.\n\t * Positive values will make the image brighter, negative values will make it darker.\n\t * @method adjustBrightness\n\t * @param {Number} value A value between -255 & 255 that will be added to the RGB channels.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustBrightness = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,255);\n\t\tthis._multiplyMatrix([\n\t\t\t1,0,0,0,value,\n\t\t\t0,1,0,0,value,\n\t\t\t0,0,1,0,value,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the contrast of pixel color.\n\t * Positive values will increase contrast, negative values will decrease contrast.\n\t * @method adjustContrast\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustContrast = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x;\n\t\tif (value<0) {\n\t\t\tx = 127+value/100*127;\n\t\t} else {\n\t\t\tx = value%1;\n\t\t\tif (x == 0) {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[value];\n\t\t\t} else {\n\t\t\t\tx = ColorMatrix.DELTA_INDEX[(value<<0)]*(1-x)+ColorMatrix.DELTA_INDEX[(value<<0)+1]*x; // use linear interpolation for more granularity.\n\t\t\t}\n\t\t\tx = x*127+127;\n\t\t}\n\t\tthis._multiplyMatrix([\n\t\t\tx/127,0,0,0,0.5*(127-x),\n\t\t\t0,x/127,0,0,0.5*(127-x),\n\t\t\t0,0,x/127,0,0.5*(127-x),\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Adjusts the color saturation of the pixel.\n\t * Positive values will increase saturation, negative values will decrease saturation (trend towards greyscale).\n\t * @method adjustSaturation\n\t * @param {Number} value A value between -100 & 100.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustSaturation = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,100);\n\t\tvar x = 1+((value > 0) ? 3*value/100 : value/100);\n\t\tvar lumR = 0.3086;\n\t\tvar lumG = 0.6094;\n\t\tvar lumB = 0.0820;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR*(1-x)+x,lumG*(1-x),lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x)+x,lumB*(1-x),0,0,\n\t\t\tlumR*(1-x),lumG*(1-x),lumB*(1-x)+x,0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\n\t/**\n\t * Adjusts the hue of the pixel color.\n\t * @method adjustHue\n\t * @param {Number} value A value between -180 & 180.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.adjustHue = function(value) {\n\t\tif (value == 0 || isNaN(value)) { return this; }\n\t\tvalue = this._cleanValue(value,180)/180*Math.PI;\n\t\tvar cosVal = Math.cos(value);\n\t\tvar sinVal = Math.sin(value);\n\t\tvar lumR = 0.213;\n\t\tvar lumG = 0.715;\n\t\tvar lumB = 0.072;\n\t\tthis._multiplyMatrix([\n\t\t\tlumR+cosVal*(1-lumR)+sinVal*(-lumR),lumG+cosVal*(-lumG)+sinVal*(-lumG),lumB+cosVal*(-lumB)+sinVal*(1-lumB),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(0.143),lumG+cosVal*(1-lumG)+sinVal*(0.140),lumB+cosVal*(-lumB)+sinVal*(-0.283),0,0,\n\t\t\tlumR+cosVal*(-lumR)+sinVal*(-(1-lumR)),lumG+cosVal*(-lumG)+sinVal*(lumG),lumB+cosVal*(1-lumB)+sinVal*(lumB),0,0,\n\t\t\t0,0,0,1,0,\n\t\t\t0,0,0,0,1\n\t\t]);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Concatenates (multiplies) the specified matrix with this one.\n\t * @method concat\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.concat = function(matrix) {\n\t\tmatrix = this._fixMatrix(matrix);\n\t\tif (matrix.length != ColorMatrix.LENGTH) { return this; }\n\t\tthis._multiplyMatrix(matrix);\n\t\treturn this;\n\t};\n\n\t/**\n\t * Returns a clone of this ColorMatrix.\n\t * @method clone\n\t * @return {ColorMatrix} A clone of this ColorMatrix.\n\t **/\n\tp.clone = function() {\n\t\treturn (new ColorMatrix()).copy(this);\n\t};\n\n\t/**\n\t * Return a length 25 (5x5) array instance containing this matrix's values.\n\t * @method toArray\n\t * @return {Array} An array holding this matrix's values.\n\t **/\n\tp.toArray = function() {\n\t\tvar arr = [];\n\t\tfor (var i= 0, l=ColorMatrix.LENGTH; i<l; i++) {\n\t\t\tarr[i] = this[i];\n\t\t}\n\t\treturn arr;\n\t};\n\n\t/**\n\t * Copy the specified matrix's values to this matrix.\n\t * @method copy\n\t * @param {Array} matrix An array or ColorMatrix instance.\n\t * @return {ColorMatrix} The ColorMatrix instance the method is called on (useful for chaining calls.)\n\t * @chainable\n\t **/\n\tp.copy = function(matrix) {\n\t\tvar l = ColorMatrix.LENGTH;\n\t\tfor (var i=0;i<l;i++) {\n\t\t\tthis[i] = matrix[i];\n\t\t}\n\t\treturn this;\n\t};\n\t\n\t/**\n\t * Returns a string representation of this object.\n\t * @method toString\n\t * @return {String} a string representation of the instance.\n\t **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrix]\";\n\t};\n\n\n// private methods:\n\t/**\n\t * @method _multiplyMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._multiplyMatrix = function(matrix) {\n\t\tvar i, j, k, col = [];\n\n\t\tfor (i=0;i<5;i++) {\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tcol[j] = this[j+i*5];\n\t\t\t}\n\t\t\tfor (j=0;j<5;j++) {\n\t\t\t\tvar val=0;\n\t\t\t\tfor (k=0;k<5;k++) {\n\t\t\t\t\tval += matrix[j+k*5]*col[k];\n\t\t\t\t}\n\t\t\t\tthis[j+i*5] = val;\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * Make sure values are within the specified range, hue has a limit of 180, brightness is 255, others are 100.\n\t * @method _cleanValue\n\t * @param {Number} value The raw number\n\t * @param {Number} limit The maximum that the number can be. The minimum is the limit * -1.\n\t * @protected\n\t **/\n\tp._cleanValue = function(value, limit) {\n\t\treturn Math.min(limit,Math.max(-limit,value));\n\t};\n\n\t/**\n\t * Makes sure matrixes are 5x5 (25 long).\n\t * @method _fixMatrix\n\t * @param {Array} matrix\n\t * @protected\n\t **/\n\tp._fixMatrix = function(matrix) {\n\t\tif (matrix instanceof ColorMatrix) { matrix = matrix.toArray(); }\n\t\tif (matrix.length < ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,matrix.length).concat(ColorMatrix.IDENTITY_MATRIX.slice(matrix.length,ColorMatrix.LENGTH));\n\t\t} else if (matrix.length > ColorMatrix.LENGTH) {\n\t\t\tmatrix = matrix.slice(0,ColorMatrix.LENGTH);\n\t\t}\n\t\treturn matrix;\n\t};\n\n\n\tcreatejs.ColorMatrix = ColorMatrix;\n}());\n\n//##############################################################################\n// ColorMatrixFilter.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n\t * Allows you to carry out complex color operations such as modifying saturation, brightness, or inverting. See the\n\t * {{#crossLink \"ColorMatrix\"}}{{/crossLink}} for more information on changing colors. For an easier color transform,\n\t * consider the {{#crossLink \"ColorFilter\"}}{{/crossLink}}.\n\t *\n\t * <h4>Example</h4>\n\t * This example creates a red circle, inverts its hue, and then saturates it to brighten it up.\n\t *\n\t *      var shape = new createjs.Shape().set({x:100,y:100});\n\t *      shape.graphics.beginFill(\"#ff0000\").drawCircle(0,0,50);\n\t *\n\t *      var matrix = new createjs.ColorMatrix().adjustHue(180).adjustSaturation(100);\n\t *      shape.filters = [\n\t *          new createjs.ColorMatrixFilter(matrix)\n\t *      ];\n\t *\n\t *      shape.cache(-50, -50, 100, 100);\n\t *\n\t * See {{#crossLink \"Filter\"}}{{/crossLink}} for an more information on applying filters.\n\t * @class ColorMatrixFilter\n\t * @constructor\n\t * @extends Filter\n\t * @param {Array | ColorMatrix} matrix A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t * class.\n\t **/\n\tfunction ColorMatrixFilter(matrix) {\n\t\tthis.Filter_constructor();\n\n\t// public properties:\n\t\t/**\n\t\t * A 4x5 matrix describing the color operation to perform. See also the {{#crossLink \"ColorMatrix\"}}{{/crossLink}}\n\t\t * @property matrix\n\t\t * @type Array | ColorMatrix\n\t\t **/\n\t\tthis.matrix = matrix;\n\n\t\tthis.FRAG_SHADER_BODY = (\n\t\t\t\"uniform mat4 uColorMatrix;\" +\n\t\t\t\"uniform vec4 uColorMatrixOffset;\" +\n\n\t\t\t\"void main(void) {\" +\n\t\t\t\t\"vec4 color = texture2D(uSampler, vRenderCoord);\" +\n\n\t\t\t\t\"mat4 m = uColorMatrix;\" +\n\t\t\t\t\"vec4 newColor = vec4(0,0,0,0);\" +\n\t\t\t\t\"newColor.r = color.r*m[0][0] + color.g*m[0][1] + color.b*m[0][2] + color.a*m[0][3];\" +\n\t\t\t\t\"newColor.g = color.r*m[1][0] + color.g*m[1][1] + color.b*m[1][2] + color.a*m[1][3];\" +\n\t\t\t\t\"newColor.b = color.r*m[2][0] + color.g*m[2][1] + color.b*m[2][2] + color.a*m[2][3];\" +\n\t\t\t\t\"newColor.a = color.r*m[3][0] + color.g*m[3][1] + color.b*m[3][2] + color.a*m[3][3];\" +\n\n\t\t\t\t\"gl_FragColor = newColor + uColorMatrixOffset;\" +\n\t\t\t\"}\"\n\t\t);\n\t}\n\tvar p = createjs.extend(ColorMatrixFilter, createjs.Filter);\n\n\t// TODO: deprecated\n\t// p.initialize = function() {}; // searchable for devs wondering where it is. REMOVED. See docs for details.\n\n\t/** docced in super class **/\n\tp.shaderParamSetup = function(gl, stage, shaderProgram) {\n\t\tvar mat = this.matrix;\n\t\tvar colorMatrix = new Float32Array([\n\t\t\tmat[0],mat[1],mat[2],mat[3],\n\t\t\tmat[5],mat[6],mat[7],mat[8],\n\t\t\tmat[10],mat[11],mat[12],mat[13],\n\t\t\tmat[15],mat[16],mat[17],mat[18]\n\t\t]);\n\n\t\tgl.uniformMatrix4fv(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorMatrix\"),\n\t\t\tfalse, colorMatrix\n\t\t);\n\t\tgl.uniform4f(\n\t\t\tgl.getUniformLocation(shaderProgram, \"uColorMatrixOffset\"),\n\t\t\tmat[4]/255, mat[9]/255, mat[14]/255, mat[19]/255\n\t\t);\n\t};\n\n// public methods:\n\t/** docced in super class **/\n\tp.toString = function() {\n\t\treturn \"[ColorMatrixFilter]\";\n\t};\n\n\t/** docced in super class **/\n\tp.clone = function() {\n\t\treturn new ColorMatrixFilter(this.matrix);\n\t};\n\n// private methods:\n\t/** docced in super class **/\n\tp._applyFilter = function(imageData) { \n\t\tvar data = imageData.data;\n\t\tvar l = data.length;\n\t\tvar r,g,b,a;\n\t\tvar mtx = this.matrix;\n\t\tvar m0 =  mtx[0],  m1 =  mtx[1],  m2 =  mtx[2],  m3 =  mtx[3],  m4 =  mtx[4];\n\t\tvar m5 =  mtx[5],  m6 =  mtx[6],  m7 =  mtx[7],  m8 =  mtx[8],  m9 =  mtx[9];\n\t\tvar m10 = mtx[10], m11 = mtx[11], m12 = mtx[12], m13 = mtx[13], m14 = mtx[14];\n\t\tvar m15 = mtx[15], m16 = mtx[16], m17 = mtx[17], m18 = mtx[18], m19 = mtx[19];\n\n\t\tfor (var i=0; i<l; i+=4) {\n\t\t\tr = data[i];\n\t\t\tg = data[i+1];\n\t\t\tb = data[i+2];\n\t\t\ta = data[i+3];\n\t\t\tdata[i] = r*m0+g*m1+b*m2+a*m3+m4; // red\n\t\t\tdata[i+1] = r*m5+g*m6+b*m7+a*m8+m9; // green\n\t\t\tdata[i+2] = r*m10+g*m11+b*m12+a*m13+m14; // blue\n\t\t\tdata[i+3] = r*m15+g*m16+b*m17+a*m18+m19; // alpha\n\t\t}\n\t\treturn true;\n\t};\n\n\tcreatejs.ColorMatrixFilter = createjs.promote(ColorMatrixFilter, \"Filter\");\n}());\n\n//##############################################################################\n// Touch.js\n//##############################################################################\n\nthis.createjs = this.createjs||{};\n\n(function() {\n\t\"use strict\";\n\n\n// constructor:\n\t/**\n * Global utility for working with multi-touch enabled devices in EaselJS. Currently supports W3C Touch API (iOS and\n * modern Android browser) and the Pointer API (IE), including ms-prefixed events in IE10, and unprefixed in IE11.\n *\n * Ensure that you {{#crossLink \"Touch/disable\"}}{{/crossLink}} touch when cleaning up your application. You do not have\n * to check if touch is supported to enable it, as it will fail gracefully if it is not supported.\n *\n * <h4>Example</h4>\n *\n *      var stage = new createjs.Stage(\"canvasId\");\n *      createjs.Touch.enable(stage);\n *\n * <strong>Note:</strong> It is important to disable Touch on a stage that you are no longer using:\n *\n *      createjs.Touch.disable(stage);\n *\n * @class Touch\n * @static\n **/\n\tfunction Touch() {\n\t\tthrow \"Touch cannot be instantiated\";\n\t}\n\n\n// public static methods:\n\t/**\n\t * Returns `true` if touch is supported in the current browser.\n\t * @method isSupported\n\t * @return {Boolean} Indicates whether touch is supported in the current browser.\n\t * @static\n\t **/\n\tTouch.isSupported = function() {\n\t\treturn\t!!(('ontouchstart' in window) // iOS & Android\n\t\t\t|| (window.navigator['msPointerEnabled'] && window.navigator['msMaxTouchPoints'] > 0) // IE10\n\t\t\t|| (window.navigator['pointerEnabled'] && window.navigator['maxTouchPoints'] > 0)); // IE11+\n\t};\n\n\t/**\n\t * Enables touch interaction for the specified EaselJS {{#crossLink \"Stage\"}}{{/crossLink}}. Currently supports iOS\n\t * (and compatible browsers, such as modern Android browsers), and IE10/11. Supports both single touch and\n\t * multi-touch modes. Extends the EaselJS {{#crossLink \"MouseEvent\"}}{{/crossLink}} model, but without support for\n\t * double click or over/out events. See the MouseEvent {{#crossLink \"MouseEvent/pointerId:property\"}}{{/crossLink}}\n\t * for more information.\n\t * @method enable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to enable touch on.\n\t * @param {Boolean} [singleTouch=false] If `true`, only a single touch will be active at a time.\n\t * @param {Boolean} [allowDefault=false] If `true`, then default gesture actions (ex. scrolling, zooming) will be\n\t * allowed when the user is interacting with the target canvas.\n\t * @return {Boolean} Returns `true` if touch was successfully enabled on the target stage.\n\t * @static\n\t **/\n\tTouch.enable = function(stage, singleTouch, allowDefault) {\n\t\tif (!stage || !stage.canvas || !Touch.isSupported()) { return false; }\n\t\tif (stage.__touch) { return true; }\n\n\t\t// inject required properties on stage:\n\t\tstage.__touch = {pointers:{}, multitouch:!singleTouch, preventDefault:!allowDefault, count:0};\n\n\t\t// note that in the future we may need to disable the standard mouse event model before adding\n\t\t// these to prevent duplicate calls. It doesn't seem to be an issue with iOS devices though.\n\t\tif ('ontouchstart' in window) { Touch._IOS_enable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_enable(stage); }\n\t\treturn true;\n\t};\n\n\t/**\n\t * Removes all listeners that were set up when calling `Touch.enable()` on a stage.\n\t * @method disable\n\t * @param {Stage} stage The {{#crossLink \"Stage\"}}{{/crossLink}} to disable touch on.\n\t * @static\n\t **/\n\tTouch.disable = function(stage) {\n\t\tif (!stage) { return; }\n\t\tif ('ontouchstart' in window) { Touch._IOS_disable(stage); }\n\t\telse if (window.navigator['msPointerEnabled'] || window.navigator[\"pointerEnabled\"]) { Touch._IE_disable(stage); }\n\t\t\n\t\tdelete stage.__touch;\n\t};\n\n\n// Private static methods:\n\t/**\n\t * @method _IOS_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IOS_handleEvent(stage,e); };\n\t\tcanvas.addEventListener(\"touchstart\", f, false);\n\t\tcanvas.addEventListener(\"touchmove\", f, false);\n\t\tcanvas.addEventListener(\"touchend\", f, false);\n\t\tcanvas.addEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IOS_disable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tif (!canvas) { return; }\n\t\tvar f = stage.__touch.f;\n\t\tcanvas.removeEventListener(\"touchstart\", f, false);\n\t\tcanvas.removeEventListener(\"touchmove\", f, false);\n\t\tcanvas.removeEventListener(\"touchend\", f, false);\n\t\tcanvas.removeEventListener(\"touchcancel\", f, false);\n\t};\n\n\t/**\n\t * @method _IOS_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IOS_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault&&e.preventDefault(); }\n\t\tvar touches = e.changedTouches;\n\t\tvar type = e.type;\n\t\tfor (var i= 0,l=touches.length; i<l; i++) {\n\t\t\tvar touch = touches[i];\n\t\t\tvar id = touch.identifier;\n\t\t\tif (touch.target != stage.canvas) { continue; }\n\n\t\t\tif (type == \"touchstart\") {\n\t\t\t\tthis._handleStart(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchmove\") {\n\t\t\t\tthis._handleMove(stage, id, e, touch.pageX, touch.pageY);\n\t\t\t} else if (type == \"touchend\" || type == \"touchcancel\") {\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_enable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_enable = function(stage) {\n\t\tvar canvas = stage.canvas;\n\t\tvar f = stage.__touch.f = function(e) { Touch._IE_handleEvent(stage,e); };\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\tcanvas.addEventListener(\"MSPointerDown\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.addEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.msTouchAction = \"none\"; }\n\t\t} else {\n\t\t\tcanvas.addEventListener(\"pointerdown\", f, false);\n\t\t\twindow.addEventListener(\"pointermove\", f, false);\n\t\t\twindow.addEventListener(\"pointerup\", f, false);\n\t\t\twindow.addEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.__touch.preventDefault) { canvas.style.touchAction = \"none\"; }\n\n\t\t}\n\t\tstage.__touch.activeIDs = {};\n\t};\n\n\t/**\n\t * @method _IE_disable\n\t * @protected\n\t * @param {Stage} stage\n\t * @static\n\t **/\n\tTouch._IE_disable = function(stage) {\n\t\tvar f = stage.__touch.f;\n\n\t\tif (window.navigator[\"pointerEnabled\"] === undefined) {\n\t\t\twindow.removeEventListener(\"MSPointerMove\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerUp\", f, false);\n\t\t\twindow.removeEventListener(\"MSPointerCancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"MSPointerDown\", f, false);\n\t\t\t}\n\t\t} else {\n\t\t\twindow.removeEventListener(\"pointermove\", f, false);\n\t\t\twindow.removeEventListener(\"pointerup\", f, false);\n\t\t\twindow.removeEventListener(\"pointercancel\", f, false);\n\t\t\tif (stage.canvas) {\n\t\t\t\tstage.canvas.removeEventListener(\"pointerdown\", f, false);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _IE_handleEvent\n\t * @param {Stage} stage\n\t * @param {Object} e The event to handle.\n\t * @protected\n\t * @static\n\t **/\n\tTouch._IE_handleEvent = function(stage, e) {\n\t\tif (!stage) { return; }\n\t\tif (stage.__touch.preventDefault) { e.preventDefault && e.preventDefault(); }\n\t\tvar type = e.type;\n\t\tvar id = e.pointerId;\n\t\tvar ids = stage.__touch.activeIDs;\n\n\t\tif (type == \"MSPointerDown\" || type == \"pointerdown\") {\n\t\t\tif (e.srcElement != stage.canvas) { return; }\n\t\t\tids[id] = true;\n\t\t\tthis._handleStart(stage, id, e, e.pageX, e.pageY);\n\t\t} else if (ids[id]) { // it's an id we're watching\n\t\t\tif (type == \"MSPointerMove\" || type == \"pointermove\") {\n\t\t\t\tthis._handleMove(stage, id, e, e.pageX, e.pageY);\n\t\t\t} else if (type == \"MSPointerUp\" || type == \"MSPointerCancel\"\n\t\t\t\t\t|| type == \"pointerup\" || type == \"pointercancel\") {\n\t\t\t\tdelete(ids[id]);\n\t\t\t\tthis._handleEnd(stage, id, e);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @method _handleStart\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleStart = function(stage, id, e, x, y) {\n\t\tvar props = stage.__touch;\n\t\tif (!props.multitouch && props.count) { return; }\n\t\tvar ids = props.pointers;\n\t\tif (ids[id]) { return; }\n\t\tids[id] = true;\n\t\tprops.count++;\n\t\tstage._handlePointerDown(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleMove\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @param {Number} x\n\t * @param {Number} y\n\t * @protected\n\t **/\n\tTouch._handleMove = function(stage, id, e, x, y) {\n\t\tif (!stage.__touch.pointers[id]) { return; }\n\t\tstage._handlePointerMove(id, e, x, y);\n\t};\n\n\t/**\n\t * @method _handleEnd\n\t * @param {Stage} stage\n\t * @param {String|Number} id\n\t * @param {Object} e\n\t * @protected\n\t **/\n\tTouch._handleEnd = function(stage, id, e) {\n\t\t// TODO: cancel should be handled differently for proper UI (ex. an up would trigger a click, a cancel would more closely resemble an out).\n\t\tvar props = stage.__touch;\n\t\tvar ids = props.pointers;\n\t\tif (!ids[id]) { return; }\n\t\tprops.count--;\n\t\tstage._handlePointerUp(id, e, true);\n\t\tdelete(ids[id]);\n\t};\n\n\n\tcreatejs.Touch = Touch;\n}());\n\n//##############################################################################\n// version.js\n//##############################################################################\n\nthis.createjs = this.createjs || {};\n\n(function() {\n\t\"use strict\";\n\n\t/**\n\t * Static class holding library specific information such as the version and buildDate of\n\t * the library.\n\t * @class EaselJS\n\t **/\n\tvar s = createjs.EaselJS = createjs.EaselJS || {};\n\n\t/**\n\t * The version string for this release.\n\t * @property version\n\t * @type String\n\t * @static\n\t **/\n\ts.version = /*=version*/\"1.0.0\"; // injected by build process\n\n\t/**\n\t * The build date for this release in UTC format.\n\t * @property buildDate\n\t * @type String\n\t * @static\n\t **/\n\ts.buildDate = /*=date*/\"Thu, 14 Sep 2017 19:47:53 GMT\"; // injected by build process\n\n})();"]}